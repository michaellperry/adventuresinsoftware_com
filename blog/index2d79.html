<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">


<!-- Mirrored from adventuresinsoftware.com/blog/?cat=26 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 12:55:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Adventures in Software   &raquo; dof</title>

<meta name="generator" content="WordPress 2.3.3" /> <!-- leave this for stats -->

<link rel="stylesheet" href="wp-content/themes/ais2/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Adventures in Software RSS Feed" href="indexd784.html?feed=rss2" />
<link rel="pingback" href="xmlrpc.html" />
    <script type="text/javascript">
        function onSilverlightError(sender, args) {
            var appSource = "";
            if (sender != null && sender != 0) {
              appSource = sender.getHost().Source;
            }
            
            var errorType = args.ErrorType;
            var iErrorCode = args.ErrorCode;

            if (errorType == "ImageError" || errorType == "MediaError") {
              return;
            }

            var errMsg = "Unhandled Error in Silverlight Application " +  appSource + "\n" ;

            errMsg += "Code: "+ iErrorCode + "    \n";
            errMsg += "Category: " + errorType + "       \n";
            errMsg += "Message: " + args.ErrorMessage + "     \n";

            if (errorType == "ParserError") {
                errMsg += "File: " + args.xamlFile + "     \n";
                errMsg += "Line: " + args.lineNumber + "     \n";
                errMsg += "Position: " + args.charPosition + "     \n";
            }
            else if (errorType == "RuntimeError") {           
                if (args.lineNumber != 0) {
                    errMsg += "Line: " + args.lineNumber + "     \n";
                    errMsg += "Position: " +  args.charPosition + "     \n";
                }
                errMsg += "MethodName: " + args.methodName + "     \n";
            }

            throw new Error(errMsg);
        }
    </script>

	<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc0db0.php?rsd" />
 <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml" /> <style type='text/css'>
<!--#header { background: url('wp-content/themes/ais2/images/header-imgae03.html?upper=A7A73F&amp;lower=77773F') no-repeat bottom center; }
--></style>
</head>
<body>
<div id="page">

<div class="aisTopBar">
	<form method="get" id="searchform" action="http://adventuresinsoftware.com/blog/">
<div>
<a href="indexd784.html?feed=rss2"><img src="../images/feed-icon-28x28.png" border="0"></a>
<input type="text" value="" name="s" id="s" />
<input type="submit" id="searchsubmit" value="Search" />
</div>
</form>
</div>

<div class="aisHeaderImageRight">
	<div class="aisHeaderImage">
	<div class="aisHeaderCornerRight">
	<div class="aisHeaderCornerLeft">
	<div class="aisImageBar">
	<div class="aisSubSites">
		<a href="index.html" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			home</span></span></span></a>
		<a class="aisSubSiteLink" href="indexb60a.html?cat=27"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			historic modeling</span></span></span></a>
		<a class="aisSubSiteLink" href="indexa88f.html?cat=36"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			update controls</span></span></span></a>
		<a href="index2d79.html?cat=26" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			degrees of freedom</span></span></span></a>
		<a class="aisSubSiteLink" href="indexba53.html?page_id=2"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			about us</span></span></span></a>

	</div>
	</div>
	</div>
	</div>
	</div>
</div>

<table style="width: 100%" cellspacing="0" cellpadding="0">
	<tr valign="top">
		<td width="210px">
<div id="sidebar">
<div class="aisLeftColumnFill">
<div class="aisLeftColumnBottom">
<div class="aisLeftColumnTop">
<div id="twitter_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Updates</h2>
<ul id="twitter_update_list"></ul>
<a href="http://twitter.com/michaellperry" id="follow">Follow me</a>
</div>
<div id="twitter_reply_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Replies</h2>
<ul id="twitter_reply_list"></ul>
</div>

<div class="aisLeftNav">
<a href='http://ineta.org/Speakers/SearchCommunitySpeakers.aspx?SpeakerId=c5110e21-9243-461b-a464-a6548524e885'><img alt='INETA Community Speakers Program' border='0' src='../../www.ineta.org/images/OfficialLogos/InetaCommunitySpeakersRequestMe.html' /></a>
</div>

<div class="aisLeftNav">
	<li class="pagenav"><h2>Pages</h2><ul><li class="page_item page-item-2"><a href="indexba53.html?page_id=2" title="About Us">About Us</a></li>
<li class="page_item page-item-210"><a href="index6ae3.html?page_id=210" title="Templates">Templates</a></li>
</ul></li></div>

<div class="aisLeftNav">
<h2>Archives</h2>
<ul>
	<li><a href='indexb4d5.html?m=201110' title='October 2011'>October 2011</a></li>
	<li><a href='indexc61a.html?m=201106' title='June 2011'>June 2011</a></li>
	<li><a href='indexa80d.html?m=201105' title='May 2011'>May 2011</a></li>
	<li><a href='index512b.html?m=201104' title='April 2011'>April 2011</a></li>
	<li><a href='index08fb.html?m=201103' title='March 2011'>March 2011</a></li>
	<li><a href='index52f4.html?m=201102' title='February 2011'>February 2011</a></li>
	<li><a href='index74f1.html?m=201101' title='January 2011'>January 2011</a></li>
	<li><a href='index8956.html?m=201012' title='December 2010'>December 2010</a></li>
	<li><a href='indexa1aa.html?m=201011' title='November 2010'>November 2010</a></li>
	<li><a href='indexe3d5.html?m=201010' title='October 2010'>October 2010</a></li>
	<li><a href='index9ab9.html?m=201009' title='September 2010'>September 2010</a></li>
	<li><a href='index1ff0.html?m=201008' title='August 2010'>August 2010</a></li>
	<li><a href='index9f11.html?m=201007' title='July 2010'>July 2010</a></li>
	<li><a href='index31f0.html?m=201006' title='June 2010'>June 2010</a></li>
	<li><a href='indexd189.html?m=201005' title='May 2010'>May 2010</a></li>
	<li><a href='indexb5c0.html?m=201004' title='April 2010'>April 2010</a></li>
	<li><a href='indexf258.html?m=201003' title='March 2010'>March 2010</a></li>
	<li><a href='index6e30.html?m=201002' title='February 2010'>February 2010</a></li>
	<li><a href='index6b19.html?m=201001' title='January 2010'>January 2010</a></li>
	<li><a href='index5c0a.html?m=200912' title='December 2009'>December 2009</a></li>
	<li><a href='index8f62.html?m=200911' title='November 2009'>November 2009</a></li>
	<li><a href='index451d.html?m=200910' title='October 2009'>October 2009</a></li>
	<li><a href='index3e04.html?m=200909' title='September 2009'>September 2009</a></li>
	<li><a href='index425a.html?m=200908' title='August 2009'>August 2009</a></li>
	<li><a href='index9907.html?m=200907' title='July 2009'>July 2009</a></li>
	<li><a href='index3104.html?m=200906' title='June 2009'>June 2009</a></li>
	<li><a href='indexc36d.html?m=200905' title='May 2009'>May 2009</a></li>
	<li><a href='index17e8.html?m=200904' title='April 2009'>April 2009</a></li>
	<li><a href='index10a5.html?m=200903' title='March 2009'>March 2009</a></li>
	<li><a href='index8988.html?m=200902' title='February 2009'>February 2009</a></li>
	<li><a href='index1419.html?m=200901' title='January 2009'>January 2009</a></li>
	<li><a href='index7866.html?m=200812' title='December 2008'>December 2008</a></li>
	<li><a href='index55f6.html?m=200811' title='November 2008'>November 2008</a></li>
	<li><a href='indexa7bc.html?m=200810' title='October 2008'>October 2008</a></li>
	<li><a href='indexe77c.html?m=200809' title='September 2008'>September 2008</a></li>
	<li><a href='indexcffc.html?m=200808' title='August 2008'>August 2008</a></li>
	<li><a href='index0e62.html?m=200807' title='July 2008'>July 2008</a></li>
	<li><a href='indexfda7.html?m=200806' title='June 2008'>June 2008</a></li>
	<li><a href='index7d64.html?m=200805' title='May 2008'>May 2008</a></li>
	<li><a href='index94dd.html?m=200804' title='April 2008'>April 2008</a></li>
	<li><a href='index9631.html?m=200803' title='March 2008'>March 2008</a></li>
	<li><a href='indexdd52.html?m=200802' title='February 2008'>February 2008</a></li>
	<li><a href='index21ee.html?m=200801' title='January 2008'>January 2008</a></li>
	<li><a href='index363c.html?m=200712' title='December 2007'>December 2007</a></li>
	<li><a href='index7493.html?m=200711' title='November 2007'>November 2007</a></li>
	<li><a href='index93a7.html?m=200710' title='October 2007'>October 2007</a></li>
	<li><a href='index4ca8.html?m=200709' title='September 2007'>September 2007</a></li>
	<li><a href='index6124.html?m=200708' title='August 2007'>August 2007</a></li>
	<li><a href='index6013.html?m=200707' title='July 2007'>July 2007</a></li>
	<li><a href='index2ab6.html?m=200706' title='June 2007'>June 2007</a></li>
	<li><a href='index44f0.html?m=200705' title='May 2007'>May 2007</a></li>
	<li><a href='indexf0b4.html?m=200704' title='April 2007'>April 2007</a></li>
	<li><a href='index481d.html?m=200703' title='March 2007'>March 2007</a></li>
	<li><a href='indexcbea.html?m=200702' title='February 2007'>February 2007</a></li>
	<li><a href='index9cdc.html?m=200701' title='January 2007'>January 2007</a></li>
	<li><a href='index3ea4.html?m=200612' title='December 2006'>December 2006</a></li>
	<li><a href='index67ca.html?m=200611' title='November 2006'>November 2006</a></li>
	<li><a href='indexff49.html?m=200610' title='October 2006'>October 2006</a></li>
	<li><a href='index611c.html?m=200609' title='September 2006'>September 2006</a></li>
	<li><a href='index9a21.html?m=200608' title='August 2006'>August 2006</a></li>
	<li><a href='index3ee9.html?m=200607' title='July 2006'>July 2006</a></li>
	<li><a href='indexe13a.html?m=200606' title='June 2006'>June 2006</a></li>
</ul>
</div>

<div class="aisLeftNav">
	</div>

<div class="aisLeftNav">
<h2>Books</h2>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0764526413&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I5" id="I5"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0201633612&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I6" id="I6"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0136291554&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I7" id="I7"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=1888009195&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I8" id="I8"></iframe>
</div>
<div class="aisLeftNav">
<h2>Meta</h2>
<ul>
		<li><a href="wp-login.html">Login</a></li>
	<li><a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional">Valid <abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a></li>
	<li><a href="http://gmpg.org/xfn/"><abbr title="XHTML Friends Network">XFN</abbr></a></li>
	<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress</a></li>
	</ul>
</div>
<div class="aisLeftContent">
<h2>Community</h2>
<ul>
	<script type="text/javascript" src="../../localhost/embed/92q2bbma.js"></script>
</ul>
</div>

</div></div></div>
</div>		</td>
		<td>

	<div id="content" class="narrowcolumn">

		
		 		<h2 class="pagetitle">Archive for the &#8216;dof&#8217; Category</h2>

 	  

		<div class="navigation">
			<div class="alignleft"><a href="indexa204.html?cat=26&amp;paged=2">&laquo; Previous Entries</a></div>
			<div class="alignright"></div>
		</div>

				<div class="post">
				<h3 id="post-568"><a href="index3a5c.html?p=568" rel="bookmark" title="Permanent Link to The meaning of &ldquo;when&rdquo;">The meaning of &ldquo;when&rdquo;</a></h3>
				<small>Monday, October 4th, 2010</small>

				<div class="entry">
					<p>Observe the difference between these two requirements:</p>
<blockquote><p>When the user closes the lid, the laptop goes to sleep.</p>
</blockquote>
<p>Versus</p>
<blockquote><p>When the lid is closed, the laptop is asleep.</p>
</blockquote>
<p>It is the same as the difference between these two implementations:</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">LaptopPowerManagerEventDriven
</span>{
    <span style="color: blue">private bool </span>_sleeping = <span style="color: blue">false</span>;

    <span style="color: blue">public </span>LaptopPowerManagerEventDriven(<span style="color: #2b91af">LaptopLid </span>lid)
    {
        lid.Closed += () =&gt; _sleeping = <span style="color: blue">true</span>;
        lid.Opened += () =&gt; _sleeping = <span style="color: blue">false</span>;
    }

    <span style="color: blue">public bool </span>Sleeping
    {
        <span style="color: blue">get </span>{ <span style="color: blue">return </span>_sleeping; }
    }
}</pre>
<p>Versus</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">LaptopPowerManagerDependencyDriven
</span>{
    <span style="color: blue">private </span><span style="color: #2b91af">LaptopLid </span>_lid;

    <span style="color: blue">public </span>LaptopPowerManagerDependencyDriven(<span style="color: #2b91af">LaptopLid </span>lid)
    {
        _lid = lid;
    }

    <span style="color: blue">public bool </span>IsSleeping
    {
        <span style="color: blue">get </span>{ <span style="color: blue">return </span>_lid.IsClosed; }
    }
}</pre>
<p>I don’t have any inside information regarding how OS X or Windows implement power management, but I can guess which one uses which approach.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="index3a5c.html?p=568#respond" title="Comment on The meaning of &ldquo;when&rdquo;">No Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-487"><a href="indexe3b6.html?p=487" rel="bookmark" title="Permanent Link to Pass through view model">Pass through view model</a></h3>
				<small>Sunday, March 21st, 2010</small>

				<div class="entry">
					<p>I will be speaking at the <a href="http://dallasxaml.com/">Dallas XAML</a> user’s group on May 4. I’ll guide the group through the creation of a simple MVVM application to demonstrate why you want to use the pattern. This is a hands-on format, so bring your laptop. We will be using Visual Studio 2008 and WPF, so no special downloads will be required.</p>
<p>In preparing for this presentation, I’ve researched much of the MVVM advice currently available. Here are just some of the sources that I’ve found:</p>
<ul>
<li><a href="http://blog.lab49.com/archives/2650">Jason Dolinger on Model-View-ViewModel</a> </li>
<li><a href="http://live.visitmix.com/MIX10/Sessions/EX14">Laurent Bugnion Understanding the Model-View-ViewModel pattern</a> </li>
<li><a href="http://live.visitmix.com/MIX10/Sessions/EX15">Ron Eisenberg Build your own MVVM Framework</a> </li>
<li><a href="http://joshsmithonwpf.wordpress.com/advanced-mvvm/">Josh Smith Advanced MVVM</a> </li>
<li><a href="http://weblogs.asp.net/craigshoemaker/archive/2009/11/03/vm-workshop-model-view-viewmodel-mvvm-and-the-presentation-model-pattern-in-5-ui-platforms.aspx">Craig Shoemaker VM Workshop</a> </li>
<li><a href="http://www.vimeo.com/8915487">MVVM Made Easy</a> </li>
</ul>
<p>In almost every example, the presenter copies data from their Model into the View Model. Some don’t even have a Model at all! I, on the other hand, create pass-through View Models. My View Models don’t store any data. So either I’m doing it wrong, or my idea of MVVM is different from everybody else’s. Before I present the pattern to a room full of people with laptops, I’d like to know which.</p>
<p><strong>Disconnected View Model</strong>     <br />The typical example of a View Model example keeps a copy of its data. The properties work against local fields.</p>
<pre><span style="color: blue">public</span> <span style="color: blue">class</span> <span style="color: #2b91af">PersonViewModel</span> : <span style="color: #2b91af">INotifyPropertyChanged</span>
{
    <span style="color: blue">public</span> <span style="color: blue">event</span> <span style="color: #2b91af">PropertyChangedEventHandler</span> PropertyChanged;

    <span style="color: blue">private</span> <span style="color: blue">string</span> _firstName;
    <span style="color: blue">private</span> <span style="color: blue">string</span> _lastName;

    <span style="color: blue">public</span> <span style="color: blue">string</span> FirstName
    {
        <span style="color: blue">get</span>
        {
            <span style="color: blue">return</span> _firstName;
        }
        <span style="color: blue">set</span>
        {
            _firstName = value;
            FirePropetyChanged(<span style="color: maroon">&quot;FirstName&quot;</span>);
            FirePropetyChanged(<span style="color: maroon">&quot;FullName&quot;</span>);
        }
    }

    <span style="color: blue">public</span> <span style="color: blue">string</span> LastName
    {
        <span style="color: blue">get</span>
        {
            <span style="color: blue">return</span> _lastName;
        }
        <span style="color: blue">set</span>
        {
            _lastName = value;
            FirePropetyChanged(<span style="color: maroon">&quot;LastName&quot;</span>);
            FirePropetyChanged(<span style="color: maroon">&quot;FullName&quot;</span>);
        }
    }

    <span style="color: blue">public</span> <span style="color: blue">string</span> FullName
    {
        <span style="color: blue">get</span>
        {
            <span style="color: blue">return</span> <span style="color: blue">string</span>.Format(<span style="color: maroon">&quot;{1}, {0}&quot;</span>, _firstName, _lastName);
        }
    }

    <span style="color: blue">private</span> <span style="color: blue">void</span> FirePropetyChanged(<span style="color: blue">string</span> propertyName)
    {
        <span style="color: blue">if</span> (PropertyChanged != <span style="color: blue">null</span>)
            PropertyChanged(<span style="color: blue">this</span>, <span style="color: blue">new</span> <span style="color: #2b91af">PropertyChangedEventArgs</span>(propertyName));
    }
}</pre>
<p>Before you display the view, you have to copy the data into the view model. At some point later, you copy the data back out of the view model.</p>
<pre><span style="color: blue">public</span> <span style="color: blue">class</span> <span style="color: #2b91af">PersonViewModel</span>

    <span style="color: green">//...</span>

    <span style="color: blue">public</span> <span style="color: blue">static</span> <span style="color: #2b91af">PersonViewModel</span> FromPerson(<span style="color: #2b91af">Person</span> person)
    {
        <span style="color: blue">return</span> <span style="color: blue">new</span> <span style="color: #2b91af">PersonViewModel</span>()
        {
            FirstName = person.FirstName,
            LastName = person.LastName
        };
    }

    <span style="color: blue">public</span> <span style="color: blue">void</span> ToPerson(<span style="color: #2b91af">Person</span> person)
    {
        person.FirstName = _firstName;
        person.LastName = _lastName;
    }
}</pre>
<p>Some of the experts just skip the model class altogether and go straight from their view model to the database or service.</p>
<p><strong>Pass Through View Model</strong> </p>
<p>I prefer the pass through style. The view model stores no data.</p>
<pre><span style="color: blue">public</span> <span style="color: blue">class</span> <span style="color: #2b91af">PersonViewModel</span> : <span style="color: #2b91af">INotifyPropertyChanged</span>
{
    <span style="color: blue">public</span> <span style="color: blue">event</span> <span style="color: #2b91af">PropertyChangedEventHandler</span> PropertyChanged;

    <strong><span style="color: blue">private</span> <span style="color: #2b91af">Person</span> _person;</strong>

<strong>    <span style="color: blue">public</span> PersonViewModel(<span style="color: #2b91af">Person</span> person)
    {
        _person = person;
    }
</strong>
    <span style="color: blue">public</span> <span style="color: blue">string</span> FirstName
    {
        <span style="color: blue">get</span>
        {
            <span style="color: blue">return</span> _<strong>person.FirstName</strong>;
        }
        <span style="color: blue">set</span>
        {
            <strong>_person.FirstName</strong> = value;
            FirePropetyChanged(<span style="color: maroon">&quot;FirstName&quot;</span>);
            FirePropetyChanged(<span style="color: maroon">&quot;FullName&quot;</span>);
        }
    }

    <span style="color: blue">public</span> <span style="color: blue">string</span> LastName
    {
        <span style="color: blue">get</span>
        {
            <span style="color: blue">return</span> <strong>_person.LastName;</strong>
        }
        <span style="color: blue">set</span>
        {
            <strong>_person.LastName</strong> = value;
            FirePropetyChanged(<span style="color: maroon">&quot;LastName&quot;</span>);
            FirePropetyChanged(<span style="color: maroon">&quot;FullName&quot;</span>);
        }
    }

    <span style="color: blue">public</span> <span style="color: blue">string</span> FullName
    {
        <span style="color: blue">get</span>
        {
            <span style="color: blue">return</span> <span style="color: blue">string</span>.Format(<span style="color: maroon">&quot;{1}, {0}&quot;</span>, <strong>_person.FirstName</strong>, <strong>_person.LastName</strong>);
        }
    }

    <span style="color: blue">private</span> <span style="color: blue">void</span> FirePropetyChanged(<span style="color: blue">string</span> propertyName)
    {
        <span style="color: blue">if</span> (PropertyChanged!= <span style="color: blue">null</span>)
            PropertyChanged(<span style="color: blue">this</span>, <span style="color: blue">new</span> <span style="color: #2b91af">PropertyChangedEventArgs</span>(propertyName));
    }
}</pre>
<p>Instead of storing a copy of the Person data, this view model uses the storage that is in the actual Person model. There is no back-and-forth copying of data.</p>
<p><strong>The advantages of pass through</strong> </p>
<p>I prefer the pass through style because it limits the number of moving parts in the application; in other words, it minimizes the “degrees of freedom”. Fewer moving parts means:</p>
<ol>
<li>Less code </li>
<li>Fewer tests </li>
<li>Fewer things that could break </li>
<li>Simpler communication </li>
</ol>
<p>If data exists in two places, then it will diverge. Data in one place will be more up-to-date than data in the other place. You have to write code to manage the divergence. That code needs to be tested. That code could break.</p>
<p>Many of the MVVM frameworks that the experts use have a mechanism for sending messages from one view model to another. This is necessary because each view model has its own copy of the data. But if each view model passes through to the same model object, then message passing is no longer necessary. The data model itself becomes the means of communication between view models.</p>
<p><strong>The disadvantages of pass through</strong> </p>
<p>There is a trade-off between the disconnected and pass through styles. The pass through style does have some disadvantages:</p>
<ol>
<li>Harder to support Cancel </li>
<li>Requires change notification from model </li>
<li>Difficult to represent complex transformations </li>
</ol>
<p>Some applications call for the modal dialog OK/Cancel metaphor. It is easier to implement this metaphor if you copy the data into a disconnected view model. If the user presses cancel, you just don’t copy the data back to the model.</p>
<p>While view models can use the data model to share data, they need to be notified of changes that other view models are making. That means that your view models not only implement INotifyPropertyChanged, they also subscribe to it. This can lead to a lot of bookkeeping code. Fortunately, there is a <a href="http://www.code-magazine.com/Article.aspx?quickid=0907101">solution to this</a>, but you have to use a third-party library.</p>
<p>Some transformations cannot be easily represented as a pass through. Maybe the objects in the data model need to be combined or regrouped in different ways. This regrouping cannot be easily done with pass through properties. A disconnected view model can make large scale transformations during the copying process.</p>
<p>None of the experts that I’ve studied make a distinction between disconnected view models and pass through view models. This is unfortunate, because the differences are significant. Where the advantages of a pass through view model outweigh the disadvantages, I find it to be an excellent choice. But before you can make that choice, you have to know that there is a choice to be made.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexa88f.html?cat=36" title="View all posts in Update Controls" rel="category">Update Controls</a>,  <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="indexe3b6.html?p=487#comments" title="Comment on Pass through view model">2 Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-423"><a href="indexb351.html?p=423" rel="bookmark" title="Permanent Link to Exercise in proof">Exercise in proof</a></h3>
				<small>Tuesday, September 1st, 2009</small>

				<div class="entry">
					<p>In Q.E.D. Hour, we will be proving things about our code. To get the group started in thinking about proof, I assigned some homework. It has to do with a watch.</p>
<p>The mechanism inside of a wristwatch is known as a movement. It has many moving parts, but all of those parts work together in unison. It measures only one thing. It has only one degree of freedom.</p>
<p>The secret to why the movement works is not in the parts. It is in the connections between the parts, where a connection is the point at which two moving parts touch. Which brings us to our proof.</p>
<p><strong>Given:</strong> A movement with 20 moving parts having one degree of freedom.</p>
<p><strong>Prove: </strong>There are ___ connections among those parts.</p>
<p>Fill in the blank. I'm sure you already know the answer. But the challenge is to prove it. This is representative of the types of proofs that we will write in Q.E.D. Hour.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a>,  <a href="index51fa.html?cat=40" title="View all posts in qed" rel="category">qed</a> |   <a href="indexb351.html?p=423#respond" title="Comment on Exercise in proof">No Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-362"><a href="indexe4db.html?p=362" rel="bookmark" title="Permanent Link to Queries are dependent; records are independent">Queries are dependent; records are independent</a></h3>
				<small>Tuesday, May 26th, 2009</small>

				<div class="entry">
					<p>I just requested a change to a use case that will save the project two man-weeks.</p>
<p><strong>eCommerce users and accounts</strong><br />In the ABSG eCommerce system, a user shops on behalf of an account. Some users can shop on behalf of more than one account, so they get to choose at the beginning of their shopping experience. We populate their list of choices from all of the accounts to which they have access.</p>
<p>Employees of ABSG log on to the eCommerce system to help people. Some of these employees are sales representatives for certain accounts. Every account as one sales rep.</p>
<p>Not all users are employees, and not all employees are users. We enter an employee ID in the user profile to relate the two.</p>
<p><strong>The UserAccount table</strong><br /><a href="wp-content/uploads/2009/05/useraccountaccesserd.png"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="248" alt="UserAccountAccessERD" src="wp-content/uploads/2009/05/useraccountaccesserd-thumb.png" width="441" align="right" border="0"></a> We have an associative table that relates users with the accounts that they have access to. This is the table that we use to present the list of choices at the beginning of the user's shopping experience.</p>
<p>I'm sure at one point the BA asked me how a user is granted access to an account. I told her about the UserAccount table. It was probably that conversation that led to the Automatic Account Access use case.</p>
<p><strong>Automatic account access</strong><br />Use case 1019: Automatic Account Access stated that the system shall periodically check for changes:</p>
<ul>
<li>An account is created or deleted.</li>
<li>A user is created or deleted.</li>
<li>The sales representative for an account is changed to a different employee.</li>
<li>The employee ID of a user is changed.</li>
</ul>
<p>When one of these changes happens, it will:</p>
<ul>
<li>Identify the sales rep user for each affected account.</li>
<li>If there is no existing UserAccount record for that sales rep, insert it.</li>
<li>If there is an existing UserAccount record for a prior sales rep, delete it.</li>
</ul>
<p>This to be accomplished via an impressive combination of replication, triggers, and cursors.</p>
<p><strong>The problems</strong><br />There are a number of problems with this approach.</p>
<ul>
<li>It would take a DBA a couple of weeks to build and test it.</li>
<li>Testing cannot be easily automated.</li>
<li>It has too many moving parts (a.k.a. degrees of freedom), each one of which would have to be monitored.</li>
<li>It is difficult to determine whether a UserAccount record was created automatically or intentionally. We could either delete UserAccount records that a human created, or fail to delete UserAccount records that a program created.</li>
<li>It does not take effect immediately. People could be diagnosing a failure of the system, only to learn that the process hasn't yet run.</li>
</ul>
<p>These are all symptomatic problems. Each one could be addressed individually. But here are the two big systemic problems:</p>
<ul>
<li>The use case dictated a solution.</li>
<li>The solution treated dependent behavior as independent behavior.</li>
</ul>
<p><strong>Here's my solution</strong><br />Use case 1019 has been deleted, and replaced with a single business rule in use case 1020: User Account Selection. This rule reads "A user may select any account for which their employee ID matches the accounts sales representative employee ID." No mention of how this is accomplished. That solves one problem.</p>
<p>To solve the other, we simply change the query that fetches the list of accounts at the beginning of the shopping experience. Instead of just getting UserAccount records, we also include accounts where account.SalesRepEmployeeID = user.EmployeeID. One small change to a query, instead of a rats nest of triggers.</p>
<p>The basic flaw in the Rube Goldberg reasoning that produced the original design was that it treated dependent behavior (which accounts the user could select) as independent behavior (UserAccount records). Changes to independent behavior (INSERTs, UPDATEs, and DELETEs) are permanent. Changes to dependent behavior (SELECTs) are not. It is therefore harder to code, test, monitor, and troubleshoot independent behavior. It is easier to do all of those things with dependent behavior.</p>
<p>Records are independent. Queries are dependent. Never use independent behavior when dependent behavior is sufficient.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexc728.html?cat=7" title="View all posts in Databases" rel="category">Databases</a>,  <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="indexe4db.html?p=362#respond" title="Comment on Queries are dependent; records are independent">No Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-337"><a href="indexf6a9.html?p=337" rel="bookmark" title="Permanent Link to AutoMapper misses the point">AutoMapper misses the point</a></h3>
				<small>Sunday, April 19th, 2009</small>

				<div class="entry">
					<p>Jimmy Bogard created <a href="http://www.lostechies.com/blogs/jimmy_bogard/archive/2009/01/22/automapper-the-object-object-mapper.aspx">AutoMapper</a> to generate left-hand-right-hand code. This is the mapping code that often appears when you are translating one object model to another parallel object model. He gives the example of mapping a data model to a view model:</p>
<pre><span style="color: blue">public</span> <span style="color: blue">class</span> <font color="#0080c0">OrderToOrderViewModelMapper</font>
{
    <span style="color: blue">public</span> <font color="#0080c0">OrderViewModel</font> Map(<font color="#0080c0">Order</font> order)
    {
        <span style="color: blue">return</span> <span style="color: blue">new</span> <font color="#0080c0">OrderViewModel</font>
            {
                CustomerFullName = order.Customer.GetFullName(),
                Total = order.GetTotal(),
                LineItems = order.GetLineItems()
                    .Select(x =&gt; <span style="color: blue">new</span> <font color="#0080c0">OrderLineItemViewModel</font>
                        {
                            Price = x.Price,
                            Quantity = x.Quantity,
                            Total = x.GetTotal(),
                            ProductName = x.Product.Name
                        })
                    .ToArray()
            };
    }
}</pre>
<p>This misses the point. The problem is not in the tedious mapping code. The problem is that you are doubling the amount of independent data.</p>
<p>Let me start at the beginning. This is a field:</p>
<pre><span style="color: blue">public</span> <span style="color: blue">class</span> <font color="#0080c0">Customer</font>
{
    <strong><span style="color: blue">private</span> <font color="#0000ff">string</font> _fullName;</strong>
}
</pre>
<p>This field is independent data. It can change independent of anything else in the system.</p>
<p>This is a property:</p>
<pre><span style="color: blue">public</span> <span style="color: blue">class</span> <font color="#0080c0">Customer</font>
{
    <span style="color: blue">private</span> <font color="#0000ff">string</font> _fullName;

<strong>    <span style="color: blue">public</span> <font color="#0000ff">string</font> FullName
    {
        <font color="#0000ff">get</font> { <span style="color: blue">return</span> _fullName; }
        <font color="#0000ff">set</font> { _fullName = <font color="#0000ff">value</font>; }
    }
</strong>}
</pre>
<p>This property is dependent data. Its behavior depends entirely on the field.</p>
<p>This is an immutable field:</p>
<pre><span style="color: blue">public</span> <span style="color: blue">class</span> <font color="#0080c0">OrderViewModel</font>
{
    <strong><span style="color: blue">private</span> <font color="#0080c0">Order</font> _order;</strong>

    <span style="color: blue">public</span> OrderViewModel(<strong><font color="#0080c0">Order</font> order</strong>)
    {
        <strong>_order = order;</strong>
    }
}
</pre>
<p>This immutable field is not independent. It cannot be changed. It is immutable.</p>
<p>This is another property:</p>
<pre><span style="color: blue">public</span> <span style="color: blue">class</span> <font color="#0080c0">OrderViewModel</font>
{
    <span style="color: blue">private</span> <font color="#0080c0">Order</font> _order;

    <span style="color: blue">public</span> OrderViewModel(<font color="#0080c0">Order</font> order)
    {
        _order = order;
    }

<strong>    <span style="color: blue">public</span> <font color="#0000ff">string</font> CustomerFullName
    {
        <font color="#0000ff">get</font> { <span style="color: blue">return</span> _order.Customer.FullName; }
    }
</strong>}
</pre>
<p>Adding independent data to a system increases its degrees of freedom. Adding dependent data does not. Adding an immutable field does not.</p>
<p>You want no more degrees of freedom in the system than the problem calls for. Degrees of freedom are moving parts. Moving parts break. Moving parts need to be tested. You should therefore avoid adding independent data when dependent data is sufficient.</p>
<p>The problem with Jimmy Bogard's example wasn't the code to copy data from one object to another. It was that data had to be copied at all. The view model should not have fields (independent data). It should have properties (dependent data).</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a>,  <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="indexf6a9.html?p=337#comments" title="Comment on AutoMapper misses the point">4 Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-295"><a href="index1422.html?p=295" rel="bookmark" title="Permanent Link to The five axioms of software behavior">The five axioms of software behavior</a></h3>
				<small>Sunday, March 1st, 2009</small>

				<div class="entry">
					<p>Inspired by Euclid's Elements. Software as a mathematical description of behavior.</p>
<p><strong>Identity</strong><br />An object is that which has identity. Identity implies consistent behavior.</p>
<p><strong>Interface</strong><br />An interface is the means by which an object exposes its consistent behavior. Interface implies identity.</p>
<p><strong>Ownership</strong><br />Every object except for a singleton has one and only one owner. Ownership cannot be transferred.</p>
<p><strong>Dependency</strong><br />Behavior is either independent or dependent. Independent behavior can be changed by acting upon the object, while dependent behavior represents an objects reaction to other dependent or independent behavior.</p>
<p><strong>Transaction</strong><br />All changes to independent behavior occur within the scope of a transaction. All behaviors dependent upon those changes are simultaneously visible. There exists a partial order among transactions, whereby one transaction could be said to be a prerequisite of another.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="index1422.html?p=295#comments" title="Comment on The five axioms of software behavior">4 Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-257"><a href="index548d.html?p=257" rel="bookmark" title="Permanent Link to Dependent and independent object data">Dependent and independent object data</a></h3>
				<small>Wednesday, October 15th, 2008</small>

				<div class="entry">
					<p>An object has two kinds of data: dependent and independent. Independent data can be changed at any time by a user action. Dependent data is derived from other data in the system.</p>
<p>For example, a Person object has three properties: FirstName, LastName, and FullName. The user can directly set the first and last name, but the full name is derived. The user has no direct control over the full name. She can only influence it by changing the first or last name.</p>
<p>Sometimes it's hard to see the difference between dependent and independent data. Both kinds of data change in response to a user action. The key question is not &quot;when does it change&quot;, but rather &quot;what determines its value&quot;. </p>
<p>The UI might allow the user to enter a full name. When she types a new value, the UI parses the text she enters and determines the first and last names. It sets these two independent properties, and then calculates the full name. If the user entered well-formed input, the calculated output will be exactly the same. If not, the system will have &quot;fixed&quot; her mistakes (extra spaces, inconsistent formatting, etc.)</p>
<p>The number of independent properties is exactly equal to the number of <a href="indexff23.html?p=169">degrees of freedom</a> that an object has. Ideally, independent properties are unconstrained. Constraints are codified in the dependent properties.</p>
<p><strong>Keep the data flowing</strong>    <br />There are several strategies for updating dependent data. The most straight forward strategy is to recalculate dependent properties directly when an independent property is changed. I could code my person object to set the full name every time the first or last name is changed. This solution is easy to code, but breaks down quickly. For example, when I import a person from a CSV file, the importer writes both the first and last names. My naive implementation would calculate the full name twice.</p>
<p>Another strategy is to keep a marker for dependent data that is out-of-date. When the independent data changes, set the marker. When someone asks for the dependent data, check the marker. This postpones the update and therefore avoids redundancy.</p>
<p>When dependent data in one object relies upon independent data in another, things get even more interesting. If you take the direct approach of notifying the dependent object from the independent one, you end up with tightly coupled objects. The <a href="http://en.wikipedia.org/wiki/Observer_pattern">observer pattern</a> breaks that coupling. There are several other patterns that offer benefits over observer (including <a href="http://updatecontrols.net/">my own</a>) that are too numerous to list here.</p>
<p>Now add to the mix the fact that dependent data may rely on other dependent data. So a change to an independent property should result in the update of all of its direct and indirect dependencies. This could be accomplished through cascading notifications, whereby the direct dependent upon receipt of notice turns around and notifies the indirect dependent. But to avoid potential redundancy or cycles, this is more often handled through dependency analysis. That is certainly too deep for this post.</p>
<p><strong>Ebb and flow</strong>    <br />No matter which strategy you use to update dependent properties, these two types of data create an ebb and flow within a system. A user action directly changes one or more independent properties. Those changes flow back toward the user in the form of dependent properties.</p>
<p>My synchronization framework starts with this fundamental concept. All object behavior is either dependent or independent.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index489b.html?cat=34" title="View all posts in Synchronization" rel="category">Synchronization</a>,  <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="index548d.html?p=257#respond" title="Comment on Dependent and independent object data">No Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-238"><a href="index3dc6.html?p=238" rel="bookmark" title="Permanent Link to Relativity and the partial order of facts">Relativity and the partial order of facts</a></h3>
				<small>Tuesday, April 1st, 2008</small>

				<div class="entry">
					<p>Regarding the automotive wireless system that I am currently working on, we are having a discussion about feed reconciliation. It breaks down into two camps: validate everything and reject out-of-order feeds, or accept everything and sort it out later.</p>
<p>In this system, the manufacturer of the wireless device identifies the unit by MEID. They obtain some phone numbers (MDN and MIN) and pair them to the device. They then ship the device to the automaker, who installs it in a vehicle (identified by VIN). Once we have MEID, MDN, MIN, and VIN, we can create an account.</p>
<p>This scenario can be represented with an <a href="index5a6a.html?p=192">Entity Fact Diagram</a>. My understanding of the system has changed since this original post, so the diagram is different. A subset of the new diagram follows:</p>
<p><a href="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/04/new_facts.png" title="Entity Fact Diagram"><img border="0" align="left" src="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/04/new_facts.png" alt="Entity Fact Diagram" style="float: left" /></a><img border="0" align="left" width="1" src="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/04/new_facts.png" alt="Entity Fact Diagram" height="1" />We receive a feed for the pairing of MDN/MIN with MEID. We then receive a feed for the shipment. Finally, we receive a feed from the automaker for the installation of the MEID in a VIN. The installation feed does not include the phone numbers, so we have to have both Pairing and Installation before we create an account.</p>
<p>The argument is what to do when we've received an Installation record for an MEID that we haven't seen in the Pairing feed. It shouldn't happen, because it takes days for the device to be shipped, received, and installed. Nevertheless, it could happen and probably will.</p>
<p>So the validate everything camp wants to reject Installation records for which Shipment has not been received, and Shipment for which Pairing has not been received. Getting things out of order is indicative of a problem in the overall business process, and should be flagged as early as possible.</p>
<p>Meanwhile, the accept everything camp wants to gather and store all of this input, then run reports to reveal problems. Aging reports will show when things move forward too slowly, and exception reports will show when things skip steps. You still get the feedback, but it stays a business problem and doesn't become a system problem.</p>
<p><strong>Here's my solution</strong><br />
The entity fact diagram shows me a hybrid solution. As illustrated, the Pairing feed is a prerequisite of the Shipment feed. The arrow between them has two consequences: first, the Shipment has to have enough information to identify the Pairing. Second, the Shipment cannot exist without the Pairing. This second consequence is of particular importance.</p>
<p>The Pairing and Shipment feeds are from the same source, as indicated by color. These are completely automated feeds produced by a database at the wireless device factory. If we see a Shipment without a Pairing, then it truly is a system problem.</p>
<p>The Installation feed, however, comes from a different source. We have to be more lenient with the relative timing between different sources. If, for example, we are on Einstein's train moving near the speed of light away from the manufacturer toward the automaker, we will see the Installation lightning strike in front of us before the Pairing strikes behind us. Sure, it seems crazy, but in enterprise software these things happen.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="index3dc6.html?p=238#respond" title="Comment on Relativity and the partial order of facts">No Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-207"><a href="indexeb91.html?p=207" rel="bookmark" title="Permanent Link to Composability and orthogonality in language design">Composability and orthogonality in language design</a></h3>
				<small>Wednesday, February 20th, 2008</small>

				<div class="entry">
					<p>Each time I delve into the HTML/CSS world, I am reminded of why I love the Algol-derived languages.</p>
<p>Algol was the ancestor of modern imperative languages like C# and Java. It introduced the concepts of orthogonality and composability to computer language design. Orthogonality is the property of a construct that means it does not intersect with others. There is just one way to express any single idea. Composability is the property of constructs that they can be combined to express larger ideas.</p>
<p>Java is an excellent example of an orthogonal, composable language. Classes, methods, statements, and expressions are all different things (orthogonal). If you want to describe a type of object, you use a class. If you want to describe behavior, it's a method. Through composition, you can describe more complex ideas, like the behaviors of types (class + methods), anonymous types (class + expression), and loops (statement + expressions).</p>
<p>C# relaxes the ideas just a little. For example, a delegate is both a type (class) and a behavior (method). Properties look like members, but act like methods. Since these language constructs serve dual purposes, there is sometimes more than one way to express a simple idea. This was done in the name of convenience, at the expense of language purity.</p>
<p><strong>HTML and CSS</strong><br />
Contrast this with the two ubiquitous languages of the web.</p>
<p>HTML is composable, since you nest elements to construct pages. But these constructs are not orthogonal. An image, for example, could be represented either by an &lt;img&gt; tag or by a &lt;div&gt; with a background-image style. HTML lack of orthogonality is due mainly in part to legacy, as CSS obsoletes elements like &lt;b&gt;.</p>
<p>CSS lacks both composability and orthogonality. Cascading is a limited set of rules, not a true composition mechanism. And several of the attributes interact such that you cannot control one without influencing another.</p>
<p><strong>The "Ken Burns" effect</strong><br />
For example, I am currently implementing the "Ken Burns" effect in Javascript. Images zoom, pan, and fade into one another. Yes, this would be better done in Silverlight or Flash (both highly composable and orthogonal, by the way). But I'd like a solution that requires no plug-in. And having had success with <a href="index9430.html?p=104">cover flow</a>, I thought I would give it a try.</p>
<p>For the effect, I need to fade from one image to another. So the two images must overlap. In addition, I need to pan and zoom within the frame. This requires that I crop the images. CSS has constructs for both. Unfortunately, they interact.</p>
<p>There are two interrelated concepts at play in the placement of elements on a CSS-based web page: location and layout. Location is the placement of an element itself, whereas layout determines how an element affects the placement of other elements around it.</p>
<p><strong>Position and overflow</strong><br />
The position attribute in CSS affects both placement and layout. The default position is "static", which means that it is entirely under the control of layout. To move an element, you usually set the position to "absolute". This not only gives you control of its position, but also takes it out of the layout equation. For panning, you set position to "absolute".</p>
<p>Now to get the clipping working. We can put the images inside a &lt;div&gt; to define the clip region. Setting overflow of the &lt;div&gt; to "hidden" causes all child objects that fall outside its borders to be cropped.</p>
<p>Unfortunately, for reasons I have yet to comprehend, "overflow: hidden" does not affect child elements with "position: absolute". One attribute controls clipping, while the other controls placement. They should be orthogonal, but they are not.</p>
<p>To solve this problem, I have to select a strange value for position. The position "relative" is properly clipped. However, it combines the ideas of location and layout. Relative positioning is not relative to the containing &lt;div&gt;, as you might expect. Instead, it is relative to the object's resting place as determined by layout. To further confuse the issue, layout proceeds around the object as if it was not moved.</p>
<p>Since I have two images inside the &lt;div&gt; - one fading into the other - the layout of the second is going to depend upon the size of the first. I have to do some extra math based on the size of the first image to adjust the placement of the second. Furthermore, when I switch to a new image, I need to quickly readjust that compensation. I haven't yet determined how to accomplish this without causing some kind of flicker.</p>
<p>Because the CSS attributes are non-orthogonal, I have to solve a multi-variable problem to determine which CSS properties to use to express any given idea. Maybe a plug-in is not so bad.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb97c.html?cat=30" title="View all posts in CSS" rel="category">CSS</a>,  <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="indexeb91.html?p=207#respond" title="Comment on Composability and orthogonality in language design">No Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-177"><a href="indexb7c7.html?p=177" rel="bookmark" title="Permanent Link to Historic Modeling">Historic Modeling</a></h3>
				<small>Wednesday, December 5th, 2007</small>

				<div class="entry">
					<p>There is one pattern for using definitive behavior that I failed to mention in the <a href="indexa09e.html?p=175">previous post</a>. This is perhaps the most important of them all, so it deserves special treatment.</p>
<p>Historic modeling is quite simply storing a history of actions, not the current state of a system. The current state is mutable, whereas history is fixed. Once something has been done, it cannot be undone, and it cannot be changed. A history is an ever growing log of permanent records.</p>
<p>One example of historic modeling from the real world is a chess game. The position of the board changes regularly during the course of a game. The position is dynamic. Yet the record of moves does not change. Once a move is made, it cannot be taken back or changed.</p>
<p>Another example is a checkbook register. The current balance can change over time, but the history of checks, once written, never changes.</p>
<p><strong>Advantages of historic modeling</strong>    <br />History is sufficient. Given a history of a system, it is trivial to go back to any point in time to construct it's state. If you have a record of chess moves, you just make each move in turn to produce the board position at every point in the game. If you have a ledger of checks, you can just add up the amounts including the opening balance up to a certain point in time. The current state doesn't contain enough information to reconstruct the history, but the history is sufficient to reconstruct the current state.</p>
<p>History is atomic. Each action in the history has happened. Actions not yet in the history have not. There is no middle ground. This is why <a href="index2c90.html?p=120">banks keep ledgers of account transfers</a>, rather than trying to decrement one account balance and increment another. Balance, being state, is not atomic.</p>
<p>History is consistent. Two people comparing notes can easily disagree on the current state of a system. To come to an agreement, they must compare histories. That's why the bank sends you a list of transactions at the end of each month, rather than just your account balance. That's the only way to reconcile your version of the truth with your bank's. Eventually, all parties will come to agree on the same version of history.</p>
<p>History is transparent. Logging and auditing systems exist to help us trace anomalies to their source. Without them, all we could do is look at the current state and wonder if it is correct. It is relatively easy to hide money in a series of accounts; but if you must produce an accurate history of transactions, each one can be called into question.</p>
<p><strong>History as definitive behavior</strong>    <br />So what does historic modeling have to do with definitive behavior? After all, history is always growing, while definitive behavior is something that doesn't change during the life of an object.</p>
<p>While the history of a given system changes, each event in history is constant. Once it is added to history, it cannot be changed. The behavior of the event is definitive, even if the history of events is dynamic.</p>
<p>The effect of an event might change over time. For example, you might think you have enough in your account to write that check, only to learn later that your spouse made a withdrawal beforehand. In your original history, that check left a positive balance in the account. But after learning about other events, you discover that the check left you overdrawn. Still, that doesn't change the fact that the check was written for a certain amount.</p>
<p><strong>History in practice</strong>    <br />By the above discussion, a historic model is a database that allows inserts, but no updates or deletes. Every time you need to make a change, you insert the appropriate type of record. To determine the current state of the system, you need to query the aggregate of history.</p>
<p>This is obviously impractical. Such a database would grow without bounds. The aggregate queries would get slower over time and eventually make the system unusable. We need one more observation to make it all work.</p>
<p>A system is historic if it appears to be so, whether it actually works as advertised. This observation allows for optimizations like caching, archiving, and pruning. As long as there is some level of abstraction at which you cannot see that the optimization is taking place (without using a stopwatch), then you can still claim to have a historic model. Future posts will discuss these optimizations in detail.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb60a.html?cat=27" title="View all posts in Historic Modeling" rel="category">Historic Modeling</a>,  <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a>,  <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="indexb7c7.html?p=177#comments" title="Comment on Historic Modeling">1 Comment &#187;</a></p>

			</div>

		
		<div class="navigation">
			<div class="alignleft"><a href="indexa204.html?cat=26&amp;paged=2">&laquo; Previous Entries</a></div>
			<div class="alignright"></div>
		</div>

	
	</div>
		</td>
	</tr>
</table>

<hr />
<div id="footer">
<!-- If you'd like to support WordPress, having the "powered by" link someone on your blog is the best way, it's our only promotion or advertising. -->
	<p>
		Adventures in Software is proudly powered by 
		<a href="http://wordpress.org/">WordPress</a>
		<br /><a href="indexd784.html?feed=rss2">Entries (RSS)</a>
		and <a href="indexa6da.html?feed=comments-rss2">Comments (RSS)</a>.
		<!-- 17 queries. 0.490 seconds. -->
	</p>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-389401-3");
pageTracker._trackPageview();
} catch(err) {}</script></div>

<!-- Gorgeous design by Michael Heilemann - http://binarybonsai.com/kubrick/ -->

		<div id="sk2-footer" style="color:#FFF; background-color:#444; padding: 3px 2px 3px 2px; border-top: #888 solid 1px;">This blog is protected by <a href="http://unknowngenius.com/blog/" title="Dave">dr Dave</a>'s <strong><a href="http://unknowngenius.com/blog/wordpress/spam-karma/" title="SK2">Spam Karma 2</a></strong>: <strong>274531</strong>  Spams eaten and counting...</div><script type="text/javascript" src="replies.js"></script>
<script type="text/javascript" src="blogger.js"></script>
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/michaellperry.json?callback=twitterCallback2&amp;count=5"></script>
<script type="text/javascript" src="http://search.twitter.com/search.json?q=@michaellperry&amp;callback=twitterCallbackReplies&amp;rpp=5"></script>
</body>

<!-- Mirrored from adventuresinsoftware.com/blog/?cat=26 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 12:55:18 GMT -->
</html>
