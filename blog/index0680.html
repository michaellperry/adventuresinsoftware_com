<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">


<!-- Mirrored from adventuresinsoftware.com/blog/?paged=19 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 13:10:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Adventures in Software  </title>

<meta name="generator" content="WordPress 2.3.3" /> <!-- leave this for stats -->

<link rel="stylesheet" href="wp-content/themes/ais2/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Adventures in Software RSS Feed" href="indexd784.html?feed=rss2" />
<link rel="pingback" href="xmlrpc.html" />
    <script type="text/javascript">
        function onSilverlightError(sender, args) {
            var appSource = "";
            if (sender != null && sender != 0) {
              appSource = sender.getHost().Source;
            }
            
            var errorType = args.ErrorType;
            var iErrorCode = args.ErrorCode;

            if (errorType == "ImageError" || errorType == "MediaError") {
              return;
            }

            var errMsg = "Unhandled Error in Silverlight Application " +  appSource + "\n" ;

            errMsg += "Code: "+ iErrorCode + "    \n";
            errMsg += "Category: " + errorType + "       \n";
            errMsg += "Message: " + args.ErrorMessage + "     \n";

            if (errorType == "ParserError") {
                errMsg += "File: " + args.xamlFile + "     \n";
                errMsg += "Line: " + args.lineNumber + "     \n";
                errMsg += "Position: " + args.charPosition + "     \n";
            }
            else if (errorType == "RuntimeError") {           
                if (args.lineNumber != 0) {
                    errMsg += "Line: " + args.lineNumber + "     \n";
                    errMsg += "Position: " +  args.charPosition + "     \n";
                }
                errMsg += "MethodName: " + args.methodName + "     \n";
            }

            throw new Error(errMsg);
        }
    </script>

	<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc0db0.php?rsd" />
 <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml" /> <style type='text/css'>
<!--#header { background: url('wp-content/themes/ais2/images/header-imgae03.html?upper=A7A73F&amp;lower=77773F') no-repeat bottom center; }
--></style>
</head>
<body>
<div id="page">

<div class="aisTopBar">
	<form method="get" id="searchform" action="http://adventuresinsoftware.com/blog/">
<div>
<a href="indexd784.html?feed=rss2"><img src="../images/feed-icon-28x28.png" border="0"></a>
<input type="text" value="" name="s" id="s" />
<input type="submit" id="searchsubmit" value="Search" />
</div>
</form>
</div>

<div class="aisHeaderImageRight">
	<div class="aisHeaderImage">
	<div class="aisHeaderCornerRight">
	<div class="aisHeaderCornerLeft">
	<div class="aisImageBar">
	<div class="aisSubSites">
		<a href="index.html" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			home</span></span></span></a>
		<a class="aisSubSiteLink" href="indexb60a.html?cat=27"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			historic modeling</span></span></span></a>
		<a class="aisSubSiteLink" href="indexa88f.html?cat=36"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			update controls</span></span></span></a>
		<a href="index2d79.html?cat=26" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			degrees of freedom</span></span></span></a>
		<a class="aisSubSiteLink" href="indexba53.html?page_id=2"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			about us</span></span></span></a>

	</div>
	</div>
	</div>
	</div>
	</div>
</div>

<table style="width: 100%" cellspacing="0" cellpadding="0">
	<tr valign="top">
		<td width="210px">
<div id="sidebar">
<div class="aisLeftColumnFill">
<div class="aisLeftColumnBottom">
<div class="aisLeftColumnTop">
<div id="twitter_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Updates</h2>
<ul id="twitter_update_list"></ul>
<a href="http://twitter.com/michaellperry" id="follow">Follow me</a>
</div>
<div id="twitter_reply_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Replies</h2>
<ul id="twitter_reply_list"></ul>
</div>

<div class="aisLeftNav">
<a href='http://ineta.org/Speakers/SearchCommunitySpeakers.aspx?SpeakerId=c5110e21-9243-461b-a464-a6548524e885'><img alt='INETA Community Speakers Program' border='0' src='../../www.ineta.org/images/OfficialLogos/InetaCommunitySpeakersRequestMe.html' /></a>
</div>

<div class="aisLeftNav">
	<li class="pagenav"><h2>Pages</h2><ul><li class="page_item page-item-2"><a href="indexba53.html?page_id=2" title="About Us">About Us</a></li>
<li class="page_item page-item-210"><a href="index6ae3.html?page_id=210" title="Templates">Templates</a></li>
</ul></li></div>

<div class="aisLeftNav">
<h2>Archives</h2>
<ul>
	<li><a href='indexb4d5.html?m=201110' title='October 2011'>October 2011</a></li>
	<li><a href='indexc61a.html?m=201106' title='June 2011'>June 2011</a></li>
	<li><a href='indexa80d.html?m=201105' title='May 2011'>May 2011</a></li>
	<li><a href='index512b.html?m=201104' title='April 2011'>April 2011</a></li>
	<li><a href='index08fb.html?m=201103' title='March 2011'>March 2011</a></li>
	<li><a href='index52f4.html?m=201102' title='February 2011'>February 2011</a></li>
	<li><a href='index74f1.html?m=201101' title='January 2011'>January 2011</a></li>
	<li><a href='index8956.html?m=201012' title='December 2010'>December 2010</a></li>
	<li><a href='indexa1aa.html?m=201011' title='November 2010'>November 2010</a></li>
	<li><a href='indexe3d5.html?m=201010' title='October 2010'>October 2010</a></li>
	<li><a href='index9ab9.html?m=201009' title='September 2010'>September 2010</a></li>
	<li><a href='index1ff0.html?m=201008' title='August 2010'>August 2010</a></li>
	<li><a href='index9f11.html?m=201007' title='July 2010'>July 2010</a></li>
	<li><a href='index31f0.html?m=201006' title='June 2010'>June 2010</a></li>
	<li><a href='indexd189.html?m=201005' title='May 2010'>May 2010</a></li>
	<li><a href='indexb5c0.html?m=201004' title='April 2010'>April 2010</a></li>
	<li><a href='indexf258.html?m=201003' title='March 2010'>March 2010</a></li>
	<li><a href='index6e30.html?m=201002' title='February 2010'>February 2010</a></li>
	<li><a href='index6b19.html?m=201001' title='January 2010'>January 2010</a></li>
	<li><a href='index5c0a.html?m=200912' title='December 2009'>December 2009</a></li>
	<li><a href='index8f62.html?m=200911' title='November 2009'>November 2009</a></li>
	<li><a href='index451d.html?m=200910' title='October 2009'>October 2009</a></li>
	<li><a href='index3e04.html?m=200909' title='September 2009'>September 2009</a></li>
	<li><a href='index425a.html?m=200908' title='August 2009'>August 2009</a></li>
	<li><a href='index9907.html?m=200907' title='July 2009'>July 2009</a></li>
	<li><a href='index3104.html?m=200906' title='June 2009'>June 2009</a></li>
	<li><a href='indexc36d.html?m=200905' title='May 2009'>May 2009</a></li>
	<li><a href='index17e8.html?m=200904' title='April 2009'>April 2009</a></li>
	<li><a href='index10a5.html?m=200903' title='March 2009'>March 2009</a></li>
	<li><a href='index8988.html?m=200902' title='February 2009'>February 2009</a></li>
	<li><a href='index1419.html?m=200901' title='January 2009'>January 2009</a></li>
	<li><a href='index7866.html?m=200812' title='December 2008'>December 2008</a></li>
	<li><a href='index55f6.html?m=200811' title='November 2008'>November 2008</a></li>
	<li><a href='indexa7bc.html?m=200810' title='October 2008'>October 2008</a></li>
	<li><a href='indexe77c.html?m=200809' title='September 2008'>September 2008</a></li>
	<li><a href='indexcffc.html?m=200808' title='August 2008'>August 2008</a></li>
	<li><a href='index0e62.html?m=200807' title='July 2008'>July 2008</a></li>
	<li><a href='indexfda7.html?m=200806' title='June 2008'>June 2008</a></li>
	<li><a href='index7d64.html?m=200805' title='May 2008'>May 2008</a></li>
	<li><a href='index94dd.html?m=200804' title='April 2008'>April 2008</a></li>
	<li><a href='index9631.html?m=200803' title='March 2008'>March 2008</a></li>
	<li><a href='indexdd52.html?m=200802' title='February 2008'>February 2008</a></li>
	<li><a href='index21ee.html?m=200801' title='January 2008'>January 2008</a></li>
	<li><a href='index363c.html?m=200712' title='December 2007'>December 2007</a></li>
	<li><a href='index7493.html?m=200711' title='November 2007'>November 2007</a></li>
	<li><a href='index93a7.html?m=200710' title='October 2007'>October 2007</a></li>
	<li><a href='index4ca8.html?m=200709' title='September 2007'>September 2007</a></li>
	<li><a href='index6124.html?m=200708' title='August 2007'>August 2007</a></li>
	<li><a href='index6013.html?m=200707' title='July 2007'>July 2007</a></li>
	<li><a href='index2ab6.html?m=200706' title='June 2007'>June 2007</a></li>
	<li><a href='index44f0.html?m=200705' title='May 2007'>May 2007</a></li>
	<li><a href='indexf0b4.html?m=200704' title='April 2007'>April 2007</a></li>
	<li><a href='index481d.html?m=200703' title='March 2007'>March 2007</a></li>
	<li><a href='indexcbea.html?m=200702' title='February 2007'>February 2007</a></li>
	<li><a href='index9cdc.html?m=200701' title='January 2007'>January 2007</a></li>
	<li><a href='index3ea4.html?m=200612' title='December 2006'>December 2006</a></li>
	<li><a href='index67ca.html?m=200611' title='November 2006'>November 2006</a></li>
	<li><a href='indexff49.html?m=200610' title='October 2006'>October 2006</a></li>
	<li><a href='index611c.html?m=200609' title='September 2006'>September 2006</a></li>
	<li><a href='index9a21.html?m=200608' title='August 2006'>August 2006</a></li>
	<li><a href='index3ee9.html?m=200607' title='July 2006'>July 2006</a></li>
	<li><a href='indexe13a.html?m=200606' title='June 2006'>June 2006</a></li>
</ul>
</div>

<div class="aisLeftNav">
			<li id="linkcat-16" class="linkcat"><h2>Blogroll</h2>
	<ul>
<li><a href="http://ayende.com/Blog">Ayende Rahien</a></li>
<li><a href="http://www.softinsight.com/bnoyes/default.aspx">Brian Noyes</a></li>
<li><a href="http://chriskoenig.net/">Chris Koenig</a></li>
<li><a href="http://scienceblogs.com/goodmath/" title="MarkCC reveals the beauty in mathematics and exposes its misuse.">Good Math, Bad Math</a></li>
<li><a href="http://joshsmithonwpf.wordpress.com/">Josh Smith on WPF</a></li>
<li><a href="http://west-wind.com/Weblog/default.aspx">Rick Strahl</a></li>
<li><a href="http://www.udidahan.com/?blog=true">Udi Dahan</a></li>

	</ul>
</li>
<li id="linkcat-17" class="linkcat"><h2>Links</h2>
	<ul>
<li><a href="http://www.absg.com/" title="my day job">ABSG</a></li>
<li><a href="http://www.d20universe.com/" title="my friends boostrap">d20 Universe</a></li>
<li><a href="http://updatecontrols.net/" title="my open source project">Update Controls .NET</a></li>

	</ul>
</li>
<li id="linkcat-32" class="linkcat"><h2>Podroll</h2>
	<ul>
<li><a href="http://dotnetrocks.com/" title="Interviews with leaders in the .NET community.">.NET Rocks!</a></li>
<li><a href="http://hanselminutes.com/" title="News and interviews from all aspects of software, with an insider&#039;s view of Microsoft.">Hanselminutes</a></li>

	</ul>
</li>
	</div>

<div class="aisLeftNav">
<h2>Books</h2>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0764526413&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I5" id="I5"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0201633612&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I6" id="I6"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0136291554&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I7" id="I7"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=1888009195&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I8" id="I8"></iframe>
</div>
<div class="aisLeftNav">
<h2>Meta</h2>
<ul>
		<li><a href="wp-login.html">Login</a></li>
	<li><a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional">Valid <abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a></li>
	<li><a href="http://gmpg.org/xfn/"><abbr title="XHTML Friends Network">XFN</abbr></a></li>
	<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress</a></li>
	</ul>
</div>
<div class="aisLeftContent">
<h2>Community</h2>
<ul>
	<script type="text/javascript" src="../../localhost/embed/92q2bbma.js"></script>
</ul>
</div>

</div></div></div>
</div>		</td>
		<td>

	<div id="content" class="narrowcolumn">

	
		
			<div class="post" id="post-283">
				<h2><a href="index30e3.html?p=283" rel="bookmark" title="Permanent Link to Update Controls for WPF">Update Controls for WPF</a></h2>
				<small>December 24th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>I've released Update Controls support for WPF. You can see a <a href="http://updatecontrols.net/videos/XAML/XAML.html">quick demo video</a> that demonstrates building a WPF application from scratch using the new markup extension. It's better than data binding.</p>
<p>With this release, you can bind WPF controls directly to CLR properties without implementing INotifyPropertyChanged. All you do is use the Independent class to keep track of gets and sets. And the Visual Studio add-in will even do that for you when you select the properties and hit Ctrl+D, G.</p>
<div style="font-family: courier new"><span style="color: blue">public</span>&nbsp;<span style="color: blue">class</span> Person <br />{ <br />&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span>&nbsp;<span style="color: blue">string</span> _firstName; <br />&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span>&nbsp;<span style="color: blue">string</span> _lastName; <br />&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span>&nbsp;<span style="color: blue">int</span> _displayStrategy; </p>
<p>&nbsp;&nbsp;&nbsp; <span style="color: blue">#region</span> Independent properties <br />&nbsp;&nbsp;&nbsp; <span style="color: green">// Generated by Update Controls --------------------------------</span> <br />&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> Independent _indDisplayStrategy = <span style="color: blue">new</span> Independent(); <br />&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> Independent _indFirstName = <span style="color: blue">new</span> Independent(); <br />&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> Independent _indLastName = <span style="color: blue">new</span> Independent(); </p>
<p>&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> FirstName <br />&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { _indFirstName.OnGet(); <span style="color: blue">return</span> _firstName; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">set</span> { _indFirstName.OnSet(); _firstName = value; } <br />&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> LastName <br />&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { _indLastName.OnGet(); <span style="color: blue">return</span> _lastName; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">set</span> { _indLastName.OnSet(); _lastName = value; } <br />&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">int</span> DisplayStrategy <br />&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { _indDisplayStrategy.OnGet(); <span style="color: blue">return</span> _displayStrategy; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">set</span> { _indDisplayStrategy.OnSet(); _displayStrategy = value; } <br />&nbsp;&nbsp;&nbsp; } <br />&nbsp;&nbsp;&nbsp; <span style="color: green">// End generated code --------------------------------</span> <br />&nbsp;&nbsp;&nbsp; <span style="color: blue">#endregion</span> </p>
<p>&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> FirstLast <br />&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> FirstName + <span style="color: maroon">" "</span> + LastName; } <br />&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> LastFirst <br />&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> LastName + <span style="color: maroon">", "</span> + FirstName; } <br />&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> Display <br />&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> DisplayStrategy == <span style="color: maroon">0</span> ? FirstLast : LastFirst; } <br />&nbsp;&nbsp;&nbsp; } <br />} </div>
<p>The FirstName, LastName, and DisplayStrategy properties are all independent. Their values are determined by the user. The FirstLast, LastFirst, and Display properties are all dependent. Their values are determined by code. Notice that there is absolutely no bookkeeping code around the dependent properties. Yet you can still bind to them using u:Update.</p>
<pre><span style="color: blue">&lt;</span><span style="color: maroon">Window</span> <span style="color: red">x:Class</span>="<span style="color: blue">UpdateControls.XAML.Test.Window1</span>"
    <span style="color: red">xmlns</span>="<span style="color: blue">http://schemas.microsoft.com/winfx/2006/xaml/presentation</span>"
    <span style="color: red">xmlns:x</span>="<span style="color: blue">http://schemas.microsoft.com/winfx/2006/xaml</span>"
    <span style="color: red">xmlns:u="clr-namespace:UpdateControls.XAML;assembly</span>=UpdateControls.XAML"
    <span style="color: red">Title</span>="<span style="color: blue">{u:Update Display}</span>" <span style="color: red">Height</span>="<span style="color: blue">300</span>" <span style="color: red">Width</span>="<span style="color: blue">300</span>"<span style="color: blue">&gt;</span>
	<span style="color: blue">&lt;</span><span style="color: maroon">StackPanel</span><span style="color: blue">&gt;</span>
		<span style="color: blue">&lt;</span><span style="color: maroon">StackPanel</span> <span style="color: red">Orientation</span>="<span style="color: blue">Horizontal</span>"<span style="color: blue">&gt;</span>
			<span style="color: blue">&lt;</span><span style="color: maroon">Label</span> <span style="color: red">Content</span>="<span style="color: blue">First Name:</span>" <span style="color: red">Width</span>="<span style="color: blue">100</span>"/<span style="color: blue">&gt;</span>
			<span style="color: blue">&lt;</span><span style="color: maroon">TextBox</span> <span style="color: red">Text</span>="<span style="color: blue">{u:Update FirstName}</span>" <span style="color: red">Width</span>="<span style="color: blue">170</span>"/<span style="color: blue">&gt;</span>
		<span style="color: blue">&lt;</span>/<span style="color: maroon">StackPanel</span><span style="color: blue">&gt;</span>
		<span style="color: blue">&lt;</span><span style="color: maroon">StackPanel</span> <span style="color: red">Orientation</span>="<span style="color: blue">Horizontal</span>"<span style="color: blue">&gt;</span>
			<span style="color: blue">&lt;</span><span style="color: maroon">Label</span> <span style="color: red">Content</span>="<span style="color: blue">Last Name:</span>" <span style="color: red">Width</span>="<span style="color: blue">100</span>"/<span style="color: blue">&gt;</span>
			<span style="color: blue">&lt;</span><span style="color: maroon">TextBox</span> <span style="color: red">Text</span>="<span style="color: blue">{u:Update LastName}</span>" <span style="color: red">Width</span>="<span style="color: blue">170</span>"/<span style="color: blue">&gt;</span>
		<span style="color: blue">&lt;</span>/<span style="color: maroon">StackPanel</span><span style="color: blue">&gt;</span>
		<span style="color: blue">&lt;</span><span style="color: maroon">StackPanel</span> <span style="color: red">Orientation</span>="<span style="color: blue">Horizontal</span>"<span style="color: blue">&gt;</span>
			<span style="color: blue">&lt;</span><span style="color: maroon">Label</span> <span style="color: red">Content</span>="<span style="color: blue">Display As:</span>" <span style="color: red">Width</span>="<span style="color: blue">100</span>"/<span style="color: blue">&gt;</span>
			<span style="color: blue">&lt;</span><span style="color: maroon">ComboBox</span> <span style="color: red">SelectedIndex</span>="<span style="color: blue">{u:Update DisplayStrategy}</span>" <span style="color: red">Width</span>="<span style="color: blue">170</span>"<span style="color: blue">&gt;</span>
				<span style="color: blue">&lt;</span><span style="color: maroon">ComboBoxItem</span> <span style="color: red">Content</span>="<span style="color: blue">{u:Update FirstLast}</span>" /<span style="color: blue">&gt;</span>
				<span style="color: blue">&lt;</span><span style="color: maroon">ComboBoxItem</span> <span style="color: red">Content</span>="<span style="color: blue">{u:Update LastFirst}</span>"/<span style="color: blue">&gt;</span>
			<span style="color: blue">&lt;</span>/<span style="color: maroon">ComboBox</span><span style="color: blue">&gt;</span>
		<span style="color: blue">&lt;</span>/<span style="color: maroon">StackPanel</span><span style="color: blue">&gt;</span>
	<span style="color: blue">&lt;</span>/<span style="color: maroon">StackPanel</span><span style="color: blue">&gt;</span>
<span style="color: blue">&lt;</span>/<span style="color: maroon">Window</span><span style="color: blue">&gt;</span></pre>
<p><span style="color: blue"></span></p>
<div style="font-family: courier new"><span style="color: blue">public</span>&nbsp;<span style="color: blue">partial</span>&nbsp;<span style="color: blue">class</span> Window1 : Window <br />{ <br />&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> Window1() <br />&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; InitializeComponent(); <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DataContext = <span style="color: blue">new</span> Person(); <br />&nbsp;&nbsp;&nbsp; } <br />} </div>
<p>And, by the way, it still supports Winforms.</p>
<p><a href="http://updatecontrols.net/cs/download20.shtml">Download</a> it and try it in your next WPF application. You'll never want to go back to plain-old data binding again.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexa88f.html?cat=36" title="View all posts in Update Controls" rel="category">Update Controls</a> |   <a href="index30e3.html?p=283#respond" title="Comment on Update Controls for WPF">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-282">
				<h2><a href="indexa8da.html?p=282" rel="bookmark" title="Permanent Link to Update Controls in WPF and Silverlight">Update Controls in WPF and Silverlight</a></h2>
				<small>December 10th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p><a href="http://updatecontrols.net/">Update Controls .NET</a> is a library of controls for Windows Forms that automatically update themselves. They are superior to data binding because they can see through layers of business logic and respond to changes in the underlying data. It is not necessary to implement INotifyPropertyChanged, or to bubble up state-change events by any means.</p>
<p>In WPF, and now in Silverlight 2.0, Microsoft has provided a significant improvement to data binding. It is now easy to add data binding to any user control. Data binding can now be expressed declaratively within XAML. And it is trivially simple for one dependency property to depend upon another one. The improvements are so great that it is difficult for people to see the pain that is still there.</p>
<p><strong>INotifyPropertyChanged and ObservableCollection&lt;T&gt;</strong><br />In WPF and Silverlight data binding, it is still necessary for the developer to fire property changed events. These events are fired by an object that implements INotifyPropertyChanged. The interface makes it possible for dependency properties to register for these events.</p>
<p>Some helper classes implement this interface on your behalf. For example, ObservableCollection&lt;T&gt; is a generic container that fires property changed events when items are added or removed. By exposing these helper classes from your own business class, you can offload the responsibility of notification.</p>
<p>Typically, you use ObservableCollection&lt;T&gt; in your data objects. If you bind your user interface directly to your data objects, then everything works just fine. But if you want a layer of business logic between the data layer and the UI, ObservableCollection&lt;T&gt; is no longer helpful to you. What you want is an intermediate collection that can filter the source, or wrap adapters around each of the items. ObservableCollection&lt;T&gt; only provides a way to bind directly to the source collection without modification.</p>
<p><strong>Presentation Model pattern</strong><br />The <a href="http://blogs.msdn.com/johngossman/archive/2005/10/08/478683.aspx">Model/View/ViewModel</a> pattern was created by the Blend team to separate user interface logic from business logic. In this pattern, the view model transforms the raw data from the model into the visible data shown to the user. The view model observes the underlying data model and notifies the view when it changes.</p>
<p>Martin Fowler documents a similar pattern called the <a href="http://martinfowler.com/eaaDev/PresentationModel.html">Presentation Model</a>. In his document, the role of the ViewModel is played by the Presentation Model. I find this a more descriptive term, so it is the one I adopt. He calls out synchronization between the presentation model and view is the most annoying part of the pattern. While .NET data binding attempts to solve this problem, it still requires that the presentation model subscribe to notifications from the model and forward them to the view.</p>
<p><strong>Update Controls Presentation Model</strong><br />I am currently working on full support of the Presentation Model pattern in Update Controls. Since the strong point of Update Controls is tracking dependency through layers of business logic, it closes this annoying gap in Fowler's pattern. I will be releasing source code shortly, but here's what I have so far:</p>
<div style="font-family: courier new">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">class</span> PersonPresentation : PresentationObject&lt;Person&gt; <br />&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> PresentationProperty&lt;<span style="color: blue">string</span>&gt; _firstName; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> PresentationProperty&lt;<span style="color: blue">string</span>&gt; _lastName; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> PresentationProperty&lt;<span style="color: blue">string</span>&gt; _firstLast; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> PresentationProperty&lt;<span style="color: blue">string</span>&gt; _lastFirst; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> PresentationProperty&lt;<span style="color: blue">int</span>&gt; _displayStrategy; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> PresentationProperty&lt;<span style="color: blue">string</span>&gt; _title; </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> PersonPresentation(Person person) : <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">base</span>(person) <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _firstName = <span style="color: blue">new</span> PresentationProperty&lt;<span style="color: blue">string</span>&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"FirstName"</span>,</div>
<div style="font-family: courier new">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; () =&gt; BusinessObject.FirstName); <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _lastName = <span style="color: blue">new</span> PresentationProperty&lt;<span style="color: blue">string</span>&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"LastName"</span>,</div>
<div style="font-family: courier new">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; () =&gt; BusinessObject.LastName); <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _firstLast = <span style="color: blue">new</span> PresentationProperty&lt;<span style="color: blue">string</span>&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"FirstLast"</span>,</div>
<div style="font-family: courier new">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; () =&gt; CalculateFirstLast()); <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _lastFirst = <span style="color: blue">new</span> PresentationProperty&lt;<span style="color: blue">string</span>&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"LastFirst"</span>,</div>
<div style="font-family: courier new">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; () =&gt; CalculateLastFirst()); <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _displayStrategy = <span style="color: blue">new</span> PresentationProperty&lt;<span style="color: blue">int</span>&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"DisplayStrategy"</span>,</div>
<div style="font-family: courier new">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; () =&gt; BusinessObject.DisplayStrategy); <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _title = <span style="color: blue">new</span> PresentationProperty&lt;<span style="color: blue">string</span>&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"Title"</span>, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; () =&gt; <span style="color: maroon">"Person - "</span> + (BusinessObject.DisplayStrategy == <span style="color: maroon">0</span> ? CalculateFirstLast() : CalculateLastFirst())); <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span>&nbsp;<span style="color: blue">string</span> CalculateLastFirst() <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">return</span> BusinessObject.LastName + <span style="color: maroon">", "</span> + BusinessObject.FirstName; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span>&nbsp;<span style="color: blue">string</span> CalculateFirstLast() <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">return</span> BusinessObject.FirstName + <span style="color: maroon">" "</span> + BusinessObject.LastName; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> FirstName <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _firstName.Value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">set</span> { BusinessObject.FirstName = value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> LastName <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _lastName.Value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">set</span> { BusinessObject.LastName = value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">int</span> DisplayStrategy <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _displayStrategy.Value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">set</span> { BusinessObject.DisplayStrategy = value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> FirstLast <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _firstLast.Value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> LastFirst <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _lastFirst.Value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> Title <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _title.Value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <br />&nbsp;&nbsp;&nbsp; } </div>
<p>The PersonPresentation object (presentation model) wraps the Person business object (data model). The PresentationObject base class implements INotifyPropertyChanged on your behalf. PresentationProperty is a wrapper around a data type that calls a provided Action when the property is out-of-date. You expose the value of each presentation property through a CLR property getter, and pass the setter through to the underlying business object. This allows you to specify attributes like "{Binding FirstName}" in your WPF or Silverlight.</p>
<p>Collections are handled in a similar fashion:</p>
<div style="font-family: courier new">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">class</span> PresentationAddressBook : PresentationObject&lt;AddressBook&gt; <br />&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> PresentationCollection&lt;Person, PresentationPerson&gt; _people; </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> PresentationAddressBook(AddressBook addressBook) : <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">base</span>(addressBook) <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _people = <span style="color: blue">new</span> PresentationCollection&lt;Person, PresentationPerson&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"People"</span>, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; () =&gt; BusinessObject.People, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; person =&gt; <span style="color: blue">new</span> PresentationPerson(person)); <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> ICollection&lt;PresentationPerson&gt; People <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _people.Value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">void</span> AddPerson() <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BusinessObject.AddPerson(); <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <br />&nbsp;&nbsp;&nbsp; } </div>
<p>The PresentationCollection performs two actions rather than just one. It first gets the collection of business objects from the parent business object. Then, it wraps each business object in another presentation object. In the process, it performs object recycling so that you reuse a presentation object for a given business object.</p>
<p><strong>Coming soon</strong><br />I am still refining this mechanism. When it is finished, it will be part of the new Update Controls .NET 2.0 release. I would like to reduce the amount of code necessary to write a presentation object. Ideally, you would need no base class and no members (besides the business object reference). A presentation model should be as simple as this:</p>
<div style="font-family: courier new">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">class</span> PersonPresentation <br />&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> Person _person; </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> PersonPresentation(Person person) <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _person = person; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> FirstName <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _person.FirstName; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">set</span> { _person.FirstName = value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> LastName <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _person.LastName; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">set</span> { _person.LastName = value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">int</span> DisplayStrategy <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _person.DisplayStrategy; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">set</span> { _person.DisplayStrategy = value; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> FirstLast <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _person.FirstName + <span style="color: maroon">" "</span> + _person.LastName; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> LastFirst <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _person.LastName + <span style="color: maroon">", "</span> + _person.FirstName; } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span>&nbsp;<span style="color: blue">string</span> Title <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span>&nbsp;<span style="color: maroon">"Person - "</span> + (DisplayStrategy == <span style="color: maroon">0</span> ? FirstLast : LastFirst); } <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <br />&nbsp;&nbsp;&nbsp; } </div>
<p>That's my goal. Let's see how close I get.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexa88f.html?cat=36" title="View all posts in Update Controls" rel="category">Update Controls</a> |   <a href="indexa8da.html?p=282#respond" title="Comment on Update Controls in WPF and Silverlight">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-281">
				<h2><a href="index73fa.html?p=281" rel="bookmark" title="Permanent Link to Using the generic type &#8216;System.Action&lt;T&gt;&#8217; requires &#8216;1&#8242; type arguments">Using the generic type &#8216;System.Action&lt;T&gt;&#8217; requires &#8216;1&#8242; type arguments</a></h2>
				<small>December 7th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>The Action and Func delegates are brilliant -- if late -- additions to the .NET framework. A delegate is a method that can be passed as a parameter. They can be used anywhere that you could use an interface with only one method. But delegate syntax is lighter weight than interface syntax.</p>
<p>The type of a delegate is really nothing more than a function signature. But even though the syntax for declaring a delegate is simpler than the syntax for declaring an interface, it is still more complex than it needs to be. Like any other type, a delegate is given a name. But the name is not important, only the signature.</p>
<p>The Action and Func generic delegates were added to the .NET framework in 2.0, which was the first version of the framework to support generics. Using these generics, the signature of a delegate can be declared in line. No separate type needs to be declared, no name needs to be specified, and all information is visible via intellisense.</p>
<p>One problem, however, was that no Action could be specified taking no arguments and returning no value. At least not until .NET 3.5. My guess is that Microsoft left this out so that the compiler wouldn't get confused having a class and a generic with the same name. But .NET 3.5 includes a compiler upgrade (for features like Linq, extension methods, and many more), so they probably fixed this minor issue at the same time. I haven't taken the time to test this theory.</p>
<p>Regardless the reason, if you need an Action with no parameters and no return type, then you have to target .NET 3.5. If you ever get this error message, check your Target Framework setting in the project properties.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index81ea.html?cat=3" title="View all posts in Error messages" rel="category">Error messages</a> |   <a href="index73fa.html?p=281#comments" title="Comment on Using the generic type &#8216;System.Action&lt;T&gt;&#8217; requires &#8216;1&#8242; type arguments">2 Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-280">
				<h2><a href="index90dd.html?p=280" rel="bookmark" title="Permanent Link to Correspondence preview drop">Correspondence preview drop</a></h2>
				<small>December 4th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>It is with pride (and not a little fear) that I release a preview of Correspondence. Please <a href="../bin/bugtracker.zip">download</a> and follow along with the discussion.</p>
<p>The preview drop includes the bug tracker sample model that we've been building over the past month. It also includes a unit test that exercises that model using the Postgres storage strategy. I have not yet decided on a license model for the Correspondence library itself. As it is now, it is not yet suitable for production use. So the library is provided for demonstration purposes only, without warrantee, and without license for use in any product or derived work.</p>
<p>The contents of the zip file are an Eclipse project. My preferred distribution of Eclipse is <a href="http://eclipse.org/ganymede">Ganymede</a>, which is ideally suited to building web applications. If you are not an Eclipse user, you can port the project to your environment of choice. I have not included an Ant script, but feel free to do so if that's how you work.</p>
<p>You will have to install <a href="http://www.postgresql.org/">Postgres</a> to run the test. Please drop the postgresql jar file in the lib folder and update the reference in bugtracker_model_test. You will then need to run the correspondence.sql script to build the Correspondence database. I could have used the in-memory storage strategy, but I thought you would get more out of seeing an actual working database.</p>
<p>Please give this preview a try and let me know how it goes. This will allow us to continue the conversation about Correspondence by exchanging working source code. Enjoy!</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb60a.html?cat=27" title="View all posts in Historic Modeling" rel="category">Historic Modeling</a> |   <a href="index90dd.html?p=280#respond" title="Comment on Correspondence preview drop">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-279">
				<h2><a href="index45c8.html?p=279" rel="bookmark" title="Permanent Link to Correspondence storage strategy provider model">Correspondence storage strategy provider model</a></h2>
				<small>November 30th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>The Correspondence library synchronizes object models between memory and storage. Eventually, it will synchronize object models between machines. But for right now, let's talk about storage.</p>
<p>The storage mechanism for Correspondence is not relational. Correspondence is not an ORM. But it is sometimes useful to implement Correspondence storage on top of a relational container. For one thing, relational databases already exist and are easy to use. For another, Correspondence can interface with relational data. It would be beneficial to have one transactional boundary around both the Correspondence data and the relational data.</p>
<p>The storage mechanism used to persist Correspondence objects is isolated from the core library itself. This allows you to select the most appropriate storage mechanism for your application. A provider for storage implements the StorageStrategy interface. You select a storage strategy when you configure your Community.</p>
<p><strong>Mementos and IDs</strong><br />A StorageStrategy does not deal directly with CorrespondenceObjects. It is isolated from your code by dealing with Mementos. A Memento stores the immutable state of a Correspondence object. This includes the type name and version number, the predecessors, and the fields. Successors are not immutable, so they are not part of the Memento.</p>
<p>A Memento's size is strictly limited to 1024 bytes. If you create a CorrespondenceObject whose fields contain more than 1K of data, you have to break it up. This hard limit is there to protect the memory, storage, and network components. It prevents buffer overrun attacks, helps ensure scalability, and makes the system more performant.</p>
<p>A Memento calculates a hash code, which is used as a first check to see if two Correspondence objects are equal. Remember that a Correspondence object's identity relies upon its predecessors and fields. If these are the same, then it is the same object. A Memento contains only these identifying attributes, so its hash code is used for identity checks.</p>
<p>But the hash code itself is not sufficient. We know that a hash is not unique. So in addition, the StorageStrategy deals with ObjectIDs. An ObjectID is nothing more than a wrapper for a 64 bit integer. These integers are unique only within a given database. Since the Memento uses ObjectIDs, a Memento is also specific to a database. Mementos and ObjectIDs do not make sense in application code. In fact, unless you create your own StorageStrategy, you will only encounter the Memento type in the constructors of your objects. These constructors are used to load a Correspondence object from storage.</p>
<p><strong>The StorageStrategy interface</strong><br />The StorageStrategy interface has very few methods. The most interesting ones are described here:</p>
<pre><span style="color: blue">public</span> <span style="color: blue">interface</span> StorageStrategy {

	Memento load(ObjectID id) <span style="color: blue">throws</span> CorrespondenceException;
	ObjectID save(Memento memento) <span style="color: blue">throws</span> CorrespondenceException;
	ObjectID findExistingObject(Memento memento) <span style="color: blue">throws</span> CorrespondenceException;
	Iterable&lt;Pair&lt;ObjectID, Memento&gt;&gt; executeQuery(QueryDefinition queryDefinition, ObjectID id) <span style="color: blue">throws</span> CorrespondenceException;

}
</pre>
<p>The <strong>load</strong> and <strong>save</strong> methods are the workhorses of the strategy. Given an ObjectID, the strategy needs to load a Memento. Or given a Memento, it needs to save it and return its ObjectID. If a matching Memento is already in storage, the ObjectID of that Memento will be returned instead.</p>
<p>Like save, <strong>findExistingObject</strong> will return the ObjectID of a matching Memento. But unlike save, it will not store the Memento if it doesn't already exist. This method is used for getObject, whereas save is used for addObject.</p>
<p>The last method is the most interesting. A Query is a collection of joins. Each join is either to a successor or a predecessor. When a Query is observed, it calls <strong>executeQuery</strong> and sends its QueryDefinition to the storage strategy. The storage strategy returns the collection of objects that satisfy that query. The storage strategy is free to use whatever means necessary to execute the query, including dynamically generating SQL.</p>
<p><strong>Not relational</strong><br />It's pretty easy to see from this interface that Correspondence does not offer all of the features of a relational database. The only relationships allowed between objects are predecessor/successor relationships. And predecessors can't change. There is (currently) no arbitrary lookup by field, like you have with a relational query by column. Correspondence works by its own limited set of rules.</p>
<p>But that limitation is also a strength. Because relational databases have to deliver on so many difficult promises, they cannot synchronize as easily as a Correspondence model. The set of operations that Correspondence allows was specifically selected to make it easy to share data from memory, to storage, across the network, and with other users. It's a different programming model, but one that you will eventually come to find as natural as relational or OO.</p>
<p><strong>Existing and future storage strategies</strong><br />I currently have Correspondence libraries written in C# and Java. In the Java version, I have implemented the Postgres storage strategy. In .NET, I have implemented SQL Server, SQL CE, and Access. I also have an in-memory version in both platforms strictly for unit testing. In the future, I plan to support MySQL, and to port storage strategies between .NET and Java. In addition, I'll create stand-alone strategies based on flat files or memory-mapped files.</p>
<p>But for now, I'm releasing the Java version of Correspondence with the Postgres storage strategy. Check back later this week for a download and instructions.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexc728.html?cat=7" title="View all posts in Databases" rel="category">Databases</a>,  <a href="indexb60a.html?cat=27" title="View all posts in Historic Modeling" rel="category">Historic Modeling</a> |   <a href="index45c8.html?p=279#respond" title="Comment on Correspondence storage strategy provider model">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-278">
				<h2><a href="index1641.html?p=278" rel="bookmark" title="Permanent Link to Cancel a Javascript drop-down on click">Cancel a Javascript drop-down on click</a></h2>
				<small>November 25th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>I'm working on a web application with a drop-down color picker. Click a button to show a box, and click a color to select it. If you click outside the box, it cancels.</p>
<p>Showing and hiding a div is easy. The div's position is "absolute" so that it doesn't cause any layout. I could toggle style.display between "none" and "block", but in this case I'm just creating and destroying the DOM element. It's that "click outside the box" feature that gets interesting.</p>
<p><strong>Body onclick</strong><br />A quick search reveals that the standard method for dismissing a drop-down when clicking outside of the box is to handle body.onclick. If you click anywhere in the body, this event gets fired. So handle it, see if you have a drop-down open, and close it.</p>
<p>The trick is that the event gets fired even if a child element has already handled the click. This is actually a good thing, because that other child element doesn't know to dismiss your drop-down. Letting body.onclick do its thing means that the drop-down will be closed whether the user clicks a link, a button, an input box, or whitespace.</p>
<p><strong>Isolate the drop-downs</strong><br />This page may have several controls on it, each with different drop-down behavior. So I chose a pattern that would allow a drop-down to install its behavior in isolation, but still play nice with its neighbors. Instead of having one page-wide function that manages all drop-downs, each one installs its own body.onclick.</p>
<p>When the page is initialized, I set up the first body.onclick. This is just a simple no-op placeholder.</p>
<pre><span style="color: blue">function</span> initialize() {
	document.body.onclick = <span style="color: blue">function</span>() {};
}

YAHOO.util.Event.onDOMReady(initialize);</pre>
<p>Then, when a drop-down appears, it calls any body.onclick that may have been previously installed, then installs its own.</p>
<pre>	<span style="color: blue">var</span> cancelPickColor = <span style="color: blue">function</span>() {
		<span style="color: blue">if</span> (colorPicker != <span style="color: blue">null</span>) {
			groupTagListDiv.removeChild(colorPicker);
			colorPicker = <span style="color: blue">null</span>;
		}
	};

	<span style="color: blue">this</span>.beginPickColor = <span style="color: blue">function</span>() {
		document.body.onclick();

		<span style="color: green">// Create a color picker div.</span>
		colorPicker = document.createElement(<span style="color: maroon">'div'</span>);
		colorPicker.className = <span style="color: maroon">'colorPicker'</span>;
		groupTagListDiv.appendChild(colorPicker);

		<span style="color: green">// ...</span>

		document.body.onclick = cancelPickColor;
	};
</pre>
<p>Following this pattern, I don't need to change existing drop-downs when I add another.</p>
<p><strong>The picker does not appear</strong><br />This is where the trouble starts. When I tested this code, I found that the color picker did not show up. Placing a breakpoint in Firebug, I saw that it in fact was appearing, but then immediately disappearing. Someone was calling cancelPickColor without my permission!</p>
<p>As I said, body.onclick is called even if a child element has handled the click message. This includes the button that the user just clicked to show the drop-down. After I install my own function inside of onclick, body.onclick fires, calls my function, and hides the drop-down.</p>
<p><strong>The clever bit</strong><br />I can't prevent body.onclick from firing. I need to let it happen and install my function afterward. So after a little thought, I changed the last line of beginPickColor to this:</p>
<pre>		document.body.onclick = <span style="color: blue">function</span>() { document.body.onclick = cancelPickColor };
</pre>
<p>And it works! The new body.onclick function fires, installs the cancelPickColor function, and the color picker remains visible. Sometimes hacking feels good.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index9ad7.html?cat=35" title="View all posts in Javascript" rel="category">Javascript</a> |   <a href="index1641.html?p=278#respond" title="Comment on Cancel a Javascript drop-down on click">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-277">
				<h2><a href="index9076.html?p=277" rel="bookmark" title="Permanent Link to The Correspondence Community">The Correspondence Community</a></h2>
				<small>November 20th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>Correspondence is about agreement. Every person, every application, every machine involved in the correspondence network comes to agree upon the history of the objects that they share. This set of people, applications, and machines is collectively known as the Community.</p>
<p><strong>The Community object</strong><br />In code, the Community is represented by a Community proxy object. This proxy is the center of all Correspondence operations. We've already seen the addObject method, which puts a Correspondence object into the system. Here's a complete list of methods:</p>
<ul>
<li>addObject(T prototype) : T {where T extends CorrespondenceObject}</li>
<li>getObject(T prototype) : T {where T extends CorrespondenceObject}</li>
<li>setModules(List&lt;Module&gt; modules)</li>
<li>addType(Class correspondenceObjectClass) : Community</li>
<li>addFieldSerializer(Class fieldType, FieldSerializer fieldSerializer) : Community</li>
</ul>
<p>The addObject method is by far the most used. It shares an object with the rest of the community. It places it in the database, attaches it to related objects (via queries), and sends it out over the network.</p>
<p>The addObject method takes a prototype. An object's predecessors and fields define its identity. So if an object matching the prototype is already in the Community, that existing object is returned. If no matching object is in the Community, the new object is added and returned.</p>
<p>The getObject method also takes a prototype and returns an object. The difference is that getObject will return null if the object is not currently in the Community. AddObject is used to express intent, whereas getObject is used just to look something up.</p>
<p><strong>Initializing the Community</strong><br />The other three fields are used to initialize the Community. SetModules assigns a list of Module objects. A Module is an interface with only one method: registerTypes. RegisterTypes takes the Community object and calls the other two methods: addType and addFieldSerializer. This pattern allows collections of Correspondence object types to be grouped together as reusable components.</p>
<p>The addType method registers a Correspondence object type with the Community. In order for addObject, getObject, and Query to work properly, a type must be registered with the Community. AddType is typically called from within a Module. This method returns the Community itself, so that it can be chained with other calls to addType.</p>
<p>The addFieldSerializer method is used less often. It registers a strategy object that reads and writes fields to binary streams. The common data types (int, float, string, date, UUID, etc.) are registered by default. You can define a custom data type, implement the FieldSerializer interface, and register it within a Module. Most of the time, however, the predefined field types are sufficient.</p>
<p><strong>The getCommunity method</strong><br />Every Correspondence object has direct access to its Community. Call the getCommunity method within a Correspondence object any time you want to perform an action. The typical pattern (as we've seen with mutable properties) is to call getCommunity().addObject( new ChildObject(this, more parameters)).</p>
<p>Adding an object to the Community causes it to be returned from relevant Queries. If that Query is used to get a list of children, then the object appears in that collection. If it is used to get the value of a mutable property, that new value appears. If it is used to cause the exists method to return false, the appropriate object is deleted. All of these changes take place automatically. Queries are dependent behavior; adding an object to the Community is independent behavior.</p>
<p><strong>Coming soon</strong><br />I realize that this is a lot of talk about code without being able to compile any of it. I'm getting the Java version of Correspondence ready to share with you. Within a week or two, you will be able to download a JAR file and sample code. The C# version is about a month behind. In the mean time, there is one last concept I'd like to present, so the next post will talk about the StorageStrategy interface.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb60a.html?cat=27" title="View all posts in Historic Modeling" rel="category">Historic Modeling</a> |   <a href="index9076.html?p=277#respond" title="Comment on The Correspondence Community">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-276">
				<h2><a href="index44be.html?p=276" rel="bookmark" title="Permanent Link to Coding mutable properties">Coding mutable properties</a></h2>
				<small>November 12th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p><a href="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/10/image5.png"><img height="177" alt="image" src="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/10/image-thumb3.png" width="244" align="right" border="0"></a>
<p>Fields in a Correspondence object are immutable. To represent a mutable property, you create a new object for each change. The object not only records the new value of the property, it also records the prior objects that it replaces. These become predecessors of the new object, and form a tree of version history. Only the leaves of the tree have not been replaced, and therefore contribute to the current value of the property.</p>
<p>This pattern requires five steps to code. You define:</p>
<ul>
<li>A <strong>class</strong> to represent the property.</li>
<li>A <strong>predecessor set</strong> to represent prior versions.</li>
<li>An <strong>exists method</strong> to hide prior versions.</li>
<li>A <strong>query</strong> to get the current version (or versions, in case of a conflict).</li>
<li><strong>Get and set</strong> methods.</li>
</ul>
<p>Let's walk through these five steps in the bug tracker example.</p>
<p><strong>The property class</strong><br />We want to add a mutable property to the Project class. This property will be the project name. We will therefore create a new class called <strong>ProjectName</strong>.</p>
<p>Every time the project name changes, an instance of ProjectName is created. One predecessor is, of course, the Project. In addition, ProjectName stores the name as a field.</p>
<pre>@Correspondence
<span style="color: blue">public</span> <span style="color: blue">class</span> ProjectName <span style="color: blue">extends</span> CorrespondenceObject {

	<span style="color: blue">private</span> PredecessorObj&lt;Project&gt; project;

	<span style="color: blue">private</span> @Field String name;

	<span style="color: blue">public</span> ProjectName(Project project, String name) {
		<span style="color: blue">this</span>.project = <span style="color: blue">new</span> PredecessorObj&lt;Project&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"project_name"</span>, project);

		<span style="color: blue">this</span>.name = name;
	}

	<span style="color: blue">public</span> ProjectName(Memento memento) <span style="color: blue">throws</span> CorrespondenceException {
		<span style="color: blue">this</span>.project = <span style="color: blue">new</span> PredecessorObj&lt;Project&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"project_name"</span>, memento);
	}

	<span style="color: blue">public</span> String getName() {
		<span style="color: blue">return</span> name;
	}

}
</pre>
<p>Every time a ProjectName is created, we want to record the current knowledge about the project name. This helps us piece together the history and later determine which names were replaced by another. We add a predecessor set to record all prior ProjectNames. By convention, these predecessors use the role name "next".</p>
<pre>@Correspondence
<span style="color: blue">public</span> <span style="color: blue">class</span> ProjectName <span style="color: blue">extends</span> CorrespondenceObject {

	<span style="color: blue">private</span> PredecessorObj&lt;Project&gt; project;
	<strong><span style="color: blue">private</span> PredecessorSet&lt;ProjectName&gt; prior;</strong>

	<span style="color: blue">private</span> @Field String name;

	<span style="color: blue">public</span> ProjectName(Project project, ObjectList&lt;ProjectName&gt; prior, String name) {
		<span style="color: blue">this</span>.project = <span style="color: blue">new</span> PredecessorObj&lt;Project&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"project_name"</span>, project);
		<strong><span style="color: blue">this</span>.prior = <span style="color: blue">new</span> PredecessorSet&lt;ProjectName&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"next"</span>, prior);</strong>

		<span style="color: blue">this</span>.name = name;
	}

	<span style="color: blue">public</span> ProjectName(Memento memento) <span style="color: blue">throws</span> CorrespondenceException {
		<span style="color: blue">this</span>.project = <span style="color: blue">new</span> PredecessorObj&lt;Project&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"project_name"</span>, memento);
		<strong><span style="color: blue">this</span>.prior = <span style="color: blue">new</span> PredecessorSet&lt;ProjectName&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"next"</span>, memento);</strong>
	}

	<span style="color: blue">public</span> String getName() {
		<span style="color: blue">return</span> name;
	}

}
</pre>
<p><strong>The exists method</strong><br />A ProjectName replaces its predecessors. Those predecessors cease to exist. We add an exists method to ProjectName that returns true only when there are no successors. To find successors, we need a query.</p>
<pre>@Correspondence
<span style="color: blue">public</span> <span style="color: blue">class</span> ProjectName <span style="color: blue">extends</span> CorrespondenceObject {

	<span style="color: blue">private</span> PredecessorObj&lt;Project&gt; project;
	<span style="color: blue">private</span> PredecessorSet&lt;ProjectName&gt; prior;

	<strong><span style="color: blue">private</span> Query&lt;ProjectName&gt; next = <span style="color: blue">new</span> Query&lt;ProjectName&gt;(<span style="color: blue">this</span>)
		.joinSuccessors(<span style="color: maroon">"next"</span>);
</strong>
	<span style="color: blue">private</span> @Field String name;

	<span style="color: blue">public</span> ProjectName(Project project, ObjectList&lt;ProjectName&gt; prior, String name) {
		<span style="color: blue">this</span>.project = <span style="color: blue">new</span> PredecessorObj&lt;Project&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"project_name"</span>, project);
		<span style="color: blue">this</span>.prior = <span style="color: blue">new</span> PredecessorSet&lt;ProjectName&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"next"</span>, prior);

		<span style="color: blue">this</span>.name = name;
	}

	<span style="color: blue">public</span> ProjectName(Memento memento) <span style="color: blue">throws</span> CorrespondenceException {
		<span style="color: blue">this</span>.project = <span style="color: blue">new</span> PredecessorObj&lt;Project&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"project_name"</span>, memento);
		<span style="color: blue">this</span>.prior = <span style="color: blue">new</span> PredecessorSet&lt;ProjectName&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"next"</span>, memento);
	}

<strong>	@Override
	<span style="color: blue">protected</span> <span style="color: blue">boolean</span> exists() {
		<span style="color: blue">return</span> next.isVoid();
	}
</strong>
	<span style="color: blue">public</span> String getName() {
		<span style="color: blue">return</span> name;
	}

}
</pre>
<p>Notice that the exists method uses <strong>isVoid</strong> rather than <strong>isEmpty</strong>. The difference is significant. An empty query is one that currently returns no objects. A void query is one that never has. Objects that return false from exists are not included in query results. So if a successor is created and then "destroyed", the query will again be empty. It will not, however, be void.</p>
<p>When the project began, its name was first set to "WSE". Later, the name was changed to "Indigo". The ProjectName "Indigo" replaced "WSE" and caused its next query to return an empty result set. Some time later, the ProjectName "WCF" was created. It caused "Indigo" exists to return false, which in turn caused the "WSE" next query to return a non-empty result set. If exists was based on isEmpty, then "WSE" would again show up as a project name. That's not what we want, so we use isVoid instead. Once isVoid is true, it can never go back to being false.</p>
<p><strong>The property query</strong><br />The Project needs to know about its ProjectName successors to determine its current name. So we add a query to the Project class to find them. This query will only return the ProjectNames that still exist. Because of their exists method, this will only be the leaves of the tree. Any ProjectName that has been replaced will have a successor and therefore no longer exist.</p>
<pre>@Correspondence
<span style="color: blue">public</span> <span style="color: blue">class</span> Project <span style="color: blue">extends</span> CorrespondenceObject {

<strong>	<span style="color: blue">private</span> Query&lt;ProjectName&gt; name = <span style="color: blue">new</span> Query&lt;ProjectName&gt;(<span style="color: blue">this</span>)
		.joinSuccessors(<span style="color: maroon">"project_name"</span>);
</strong>	<span style="color: blue">private</span> Query&lt;Issue&gt; issue = <span style="color: blue">new</span> Query&lt;Issue&gt;(<span style="color: blue">this</span>)
		.joinSuccessors(<span style="color: maroon">"project_issue"</span>);

	<span style="color: blue">private</span> @Field UUID id;

	<span style="color: blue">public</span> Project() {
		id = UUID.randomUUID();
	}

	<span style="color: blue">public</span> Project(Memento memento) {
	}

	<span style="color: blue">public</span> Iterable&lt;Issue&gt; getIssues() {
		<span style="color: blue">return</span> issue;
	}

}
</pre>
<p><strong>The getter and setter</strong><br />The property query gives us all the information we need to get and set the property value. The current value of the property is based on the leaves of the version history tree, which is precisely what the query returns. If there is no conflict, then there is only one leaf. If there is a conflict, then we can resolve it. For now, we'll take the easy way out and return the most recent conflicting version. Other strategies are possible.</p>
<p>When setting the property, we want to replace all current versions of it. The predecessors of the new ProjectName are all of the leaves of the version history tree. This technique allows the user to resolve a conflict by entering the correct value of the property. All of the conflicting versions are replaced by the one correct version. The branches of the tree are grafted together and we end up with just one leaf. No more conflict.</p>
<pre>@Correspondence
<span style="color: blue">public</span> <span style="color: blue">class</span> Project <span style="color: blue">extends</span> CorrespondenceObject {

	<span style="color: blue">private</span> Query&lt;ProjectName&gt; name = <span style="color: blue">new</span> Query&lt;ProjectName&gt;(<span style="color: blue">this</span>)
		.joinSuccessors(<span style="color: maroon">"project_name"</span>);
	<span style="color: blue">private</span> Query&lt;Issue&gt; issue = <span style="color: blue">new</span> Query&lt;Issue&gt;(<span style="color: blue">this</span>)
		.joinSuccessors(<span style="color: maroon">"project_issue"</span>);

	<span style="color: blue">private</span> @Field UUID id;

	<span style="color: blue">public</span> Project() {
		id = UUID.randomUUID();
	}

	<span style="color: blue">public</span> Project(Memento memento) {
	}

<strong>	<span style="color: blue">public</span> String getName() {
		<span style="color: green">// Get the most recent leaf.</span>
		ProjectName leaf = name.getLast();
		<span style="color: blue">if</span> (leaf == <span style="color: blue">null</span>)
			<span style="color: blue">return</span> <span style="color: maroon">"&lt;New Project&gt;"</span>;
		<span style="color: blue">else</span>
			<span style="color: blue">return</span> leaf.getName();
	}

	<span style="color: blue">public</span> <span style="color: blue">void</span> setName(String name) {
		getCommunity().addObject(<span style="color: blue">new</span> ProjectName(<span style="color: blue">this</span>, <span style="color: blue">this</span>.name.getObjectList(), name));
	}
</strong>
	<span style="color: blue">public</span> Iterable&lt;Issue&gt; getIssues() {
		<span style="color: blue">return</span> issue;
	}

}
</pre>
<p>By following these five steps, we define a mutable property for a Correspondence object. Instead of allowing mutation to be a primitive of the system, we implement mutation as a pattern. This allows the core system to remain synchronization friendly while giving us the behavior that users expect.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb60a.html?cat=27" title="View all posts in Historic Modeling" rel="category">Historic Modeling</a> |   <a href="index44be.html?p=276#respond" title="Comment on Coding mutable properties">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-275">
				<h2><a href="index0b1f.html?p=275" rel="bookmark" title="Permanent Link to How to delete a Correspondence object">How to delete a Correspondence object</a></h2>
				<small>November 5th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>A Correspondence object records the fact that an atomic operation has taken place. No matter what happens in the future, the fact remains that that operation occurred. No action can truly expunge an object.</p>
<p>But one atomic operation can negate the effect of another. It can leave the system as a whole in a state equivalent to one in which the first operation never happened. At least from an application point-of-view.</p>
<p>So the way to delete a Correspondence object is to create a successor that negates it.</p>
<p><strong>The exists method</strong><br />
The CorrespondenceObject base class defines a method called <strong>exists</strong>. A derived class overrides this method to return true if the object exists, or false if it does not. This test must be performed by examining the results of queries. So the method returns true if the query for negating objects returns an empty set.</p>
<p>Suppose we want the ability to delete an issue in our bug tracking system. To do so, we have to define a new class called <strong>IssueDelete</strong> that causes the issue not to exist. We'll start with this simple definition.</p>
<pre>@Correspondence<span style="color: blue">
public</span> <span style="color: blue">class</span> IssueDelete <span style="color: blue">extends</span> CorrespondenceObject {

	<span style="color: green">// Issue that was deleted.</span>
	<span style="color: blue">private</span> PredecessorObj&lt;Issue&gt; issue;

	<span style="color: blue">public</span> IssueDelete(Issue issue) {
		<span style="color: blue">this</span>.issue = <span style="color: blue">new</span> PredecessorObj&lt;Issue&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"issue_delete"</span>, issue);
	}

	<span style="color: blue">public</span> IssueDelete(Memento memento) <span style="color: blue">throws</span> CorrespondenceException {
		<span style="color: blue">this</span>.issue = <span style="color: blue">new</span> PredecessorObj&lt;Issue&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"issue_delete"</span>, memento);
	}
}</pre>
<p>The Issue class is modified to query for <strong>IssueDelete</strong> successors and to cease to exist when one is found.</p>
<pre>@Correspondence
<span style="color: blue">public</span> <span style="color: blue">class</span> Issue <span style="color: blue">extends</span> CorrespondenceObject {

	<span style="color: green">// The project to which this issue belogs.</span>
	<span style="color: blue">private</span> PredecessorObj&lt;Project&gt; project;

<strong>	<span style="color: green">// Query for deletion of this issue.</span>
	<span style="color: blue">private</span> Query&lt;IssueDelete&gt; delete = <span style="color: blue">new</span> Query&lt;IssueDelete&gt;(<span style="color: blue">this</span>)
		.joinSuccessors(<span style="color: maroon">"issue_delete"</span>);
</strong>
	<span style="color: green">// Identity.</span>
	<span style="color: blue">private</span> @Field UUID id;

	<span style="color: blue">public</span> Issue(Project project) {
		<span style="color: blue">this</span>.project = <span style="color: blue">new</span> PredecessorObj&lt;Project&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"project_issue"</span>, project);
		<span style="color: blue">this</span>.id = UUID.randomUUID();
	}

	<span style="color: blue">public</span> Issue(Memento memento) <span style="color: blue">throws</span> CorrespondenceException {
		<span style="color: blue">this</span>.project = <span style="color: blue">new</span> PredecessorObj&lt;Project&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"project_issue"</span>, memento);
	}

	<span style="color: blue">public</span> Project getProject() {
		<span style="color: blue">return</span> project.getObject();
	}

<strong>	@Override
	<span style="color: blue">protected</span> <span style="color: blue">boolean</span> exists() {
		<span style="color: blue">return</span> delete.isEmpty();
	}

	<span style="color: blue">public</span> <span style="color: blue">void</span> delete() {
		getCommunity().addObject(<span style="color: blue">new</span> IssueDelete(<span style="color: blue">this</span>));
	}
</strong>}</pre>
<p>The <strong>delete</strong> query looks for successors in the "issue_delete" role of the type <strong>IssueDelete</strong>. If any such objects are created, the results of this query will no longer be empty. That will cause the <strong>exists</strong> method to return false. Just such an object is created in the <strong>delete</strong> method. Notice that the object is added to the <strong>Community</strong>, which is the repository for all Correspondence objects. We'll have a lot more to say about the Community in later posts.</p>
<p><strong>Restore a deleted object</strong><br />
But this feature is not finished. While the <strong>IssueDelete</strong> class makes it possible to delete an issue, that deletion cannot be undone. Just like any other atomic operation, the fact that the deletion occurred cannot be expunged. In order to undo the deletion, we need to delete <strong>IssueDelete</strong>.</p>
<p>We do this by creating a class called <strong>IssueRestore</strong>.</p>
<pre>@Correspondence
<span style="color: blue">public</span> <span style="color: blue">class</span> IssueRestore <span style="color: blue">extends</span> CorrespondenceObject {

	<span style="color: green">// The deletion to undo.</span>
	<span style="color: blue">private</span> PredecessorObj&lt;IssueDelete&gt; delete;

	<span style="color: blue">public</span> IssueRestore(IssueDelete delete) {
		<span style="color: blue">this</span>.delete = <span style="color: blue">new</span> PredecessorObj&lt;IssueDelete&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"undo"</span>, delete);
	}

	<span style="color: blue">public</span> IssueRestore(Memento memento) <span style="color: blue">throws</span> CorrespondenceException {
		<span style="color: blue">this</span>.delete = <span style="color: blue">new</span> PredecessorObj&lt;IssueDelete&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"undo"</span>, memento);
	}
}</pre>
<p>And then we modify <strong>IssueDelete</strong> to exist only when there are no such successors:</p>
<pre>@Correspondence
<span style="color: blue">public</span> <span style="color: blue">class</span> IssueDelete <span style="color: blue">extends</span> CorrespondenceObject {

	<span style="color: green">// Issue that was deleted.</span>
	<span style="color: blue">private</span> PredecessorObj&lt;Issue&gt; issue;

<strong>	<span style="color: green">// Query for restore.</span>
	<span style="color: blue">private</span> Query&lt;IssueRestore&gt; restore = <span style="color: blue">new</span> Query&lt;IssueRestore&gt;(<span style="color: blue">this</span>)
		.joinSuccessors(<span style="color: maroon">"undo"</span>);
</strong>
	<span style="color: blue">public</span> IssueDelete(Issue issue) {
		<span style="color: blue">this</span>.issue = <span style="color: blue">new</span> PredecessorObj&lt;Issue&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"issue_delete"</span>, issue);
	}

	<span style="color: blue">public</span> IssueDelete(Memento memento) <span style="color: blue">throws</span> CorrespondenceException {
		<span style="color: blue">this</span>.issue = <span style="color: blue">new</span> PredecessorObj&lt;Issue&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"issue_delete"</span>, memento);
	}

<strong>	@Override
	<span style="color: blue">protected</span> <span style="color: blue">boolean</span> exists() {
		<span style="color: blue">return</span> restore.isEmpty();
	}
</strong>}</pre>
<p><strong>Uniqueness of a deletion</strong><br />
We are almost done. There's just one last problem. Delete an issue, and it disappears. Restore it, and it comes back. But if we delete it a second time, nothing happens. Why?</p>
<p>The set of an object's predecessors and fields is its identity. If you create an instance of the same class with the same predecessors and fields, you will get the same object. The second time we attempt to delete an issue, we only succeed in reasserting the existence of the first deletion. For this system to work, deletions must be unique.</p>
<p>To make an object unique, we give it a unique field. We add a UUID to <strong>IssueDelete</strong>:</p>
<pre>@Correspondence
<span style="color: blue">public</span> <span style="color: blue">class</span> IssueDelete <span style="color: blue">extends</span> CorrespondenceObject {

	<span style="color: green">// Issue that was deleted.</span>
	<span style="color: blue">private</span> PredecessorObj&lt;Issue&gt; issue;

	<span style="color: green">// Query for restore.</span>
	<span style="color: blue">private</span> Query&lt;IssueRestore&gt; restore = <span style="color: blue">new</span> Query&lt;IssueRestore&gt;(<span style="color: blue">this</span>)
		.joinSuccessors(<span style="color: maroon">"undo"</span>);

<strong>	<span style="color: green">// Identity.</span>
	<span style="color: blue">private</span> @Field UUID id;
</strong>
	<span style="color: blue">public</span> IssueDelete(Issue issue) {
		<span style="color: blue">this</span>.issue = <span style="color: blue">new</span> PredecessorObj&lt;Issue&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"issue_delete"</span>, issue);
<strong>		id = UUID.randomUUID();
</strong>	}

	<span style="color: blue">public</span> IssueDelete(Memento memento) <span style="color: blue">throws</span> CorrespondenceException {
		<span style="color: blue">this</span>.issue = <span style="color: blue">new</span> PredecessorObj&lt;Issue&gt;(<span style="color: blue">this</span>, <span style="color: maroon">"issue_delete"</span>, memento);
	}

	@Override
	<span style="color: blue">protected</span> <span style="color: blue">boolean</span> exists() {
		<span style="color: blue">return</span> restore.isEmpty();
	}
}</pre>
<p>And so with this pattern a Correspondence object can be deleted, restored, and deleted again. Deletion and restoration both represent atomic operations, and are therefore both recorded as new objects. Although they represent modifications of the object graph from an application point-of-view, these Correspondence objects adhere to the law that an object is immutable. As we've discussed in previous posts, this is the law that makes synchronization possible.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb60a.html?cat=27" title="View all posts in Historic Modeling" rel="category">Historic Modeling</a> |   <a href="index0b1f.html?p=275#respond" title="Comment on How to delete a Correspondence object">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-272">
				<h2><a href="indexcde3.html?p=272" rel="bookmark" title="Permanent Link to Mutable properties">Mutable properties</a></h2>
				<small>October 30th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>All of the fields of a Correspondence object are immutable. They are set at the time of construction. They define the identity of an object, so they cannot be allowed to change.</p>
<p>How, then, can you represent mutable properties in Correspondence? By doing the only thing that Correspondence allows you to do: create more objects.<strong></p>
<p></strong>
<p><strong>A class for each atomic operation</strong><br />A Correspondence object represents an atomic operation. It records the fact that someone has made a change. So one such change could be the modification of a property. Let's express the atomic operations of a project and one of its mutable properties:</p>
<ul>
<li>CreateProject(): Project</li>
<li>SetProjectName(project: Project, name: string)</li>
</ul>
<p>Since we have two atomic operations, we define two Correspondence classes. The class that represents the CreateProject operation is the Project itself. The class that represents the SetProjectName operation will be called ProjectName.</p>
<p><strong>Define prerequisites</strong><br />It is apparent from the definitions of these two atomic operations that the Project is a prerequisite for the ProjectName. You can't name a project before you create it. And in order for the ProjectName to make sense, you must know which Project you are talking about.</p>
<p><a href="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/10/image2.png"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="94" alt="image" src="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/10/image-thumb.png" width="244" align="right" border="0"></a> So if Project is the only prerequisite for ProjectName, we can have an object model like the diagram on the right. If we set the project name three times, we end up with three ProjectName objects that are equal successors of the Project object.</p>
<p>There's one significant problem with the model just described. It is impossible to tell from the model alone which is the correct name of the project. It was set three times, and nothing about the diagram tells us which is the intended name. We could go by the time of creation, but that is insufficient in light of synchronization. One user might have set the name on one machine, while another user set the name on a different machine. We can't see the intent of the users in the model, so we can't make a reasonable decision.</p>
<p><strong>Current knowledge is a prerequisite</strong><br />The solution is to capture that intent by adding prerequisites. The prerequisites of an atomic operation are not just the parameters required for the operation to make sense in isolation. They also include the operations that have come before. The operation was performed by a user with a certain set of knowledge. If we capture that knowledge as prerequisites, we can glean the user's intent.</p>
<p><a href="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/10/image5.png"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="177" alt="image" src="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/10/image-thumb3.png" width="244" align="left" border="0"></a> In our case, we are going to capture the current project name as a prerequisite for any new project name. The user knew that the project was called WSE when he changed it to Indigo. Later, he knew that it was Indigo when changing it to WCF. This changes the diagram to the one on the left.</p>
<p>This diagram captures the intent of the user. He was changing the project name with the knowledge of the prior project name. And now the diagram clearly shows what the current name is: it is the last in the chain of succession.</p>
<p><strong>Detect conflicts</strong><br /><a href="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/10/image4.png"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="144" alt="image" src="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/10/image-thumb2.png" width="244" align="right" border="0"></a> So what about the case of the two users on different machines? What if the developer chose the name Indigo while the analyst chose WCF? Both of those decisions were made with the knowledge of the name WSE, and so you get the diagram on the right.</p>
<p>From this diagram, it is apparent that there is a conflict. We no longer have just one leaf of the tree of ProjectNames. Now we have two leaves. Both of these siblings are just as worthy in the chain of succession of representing the current name of the project.</p>
<p>Correspondence makes no assumptions about how to resolve conflicts. But it does make it obvious when they have occurred. It is now up to the application to decide on a conflict resolution strategy. Knowing that there was a problem is the first step.</p>
<p>Fields of a Correspondence object are immutable. Modifiable properties are implemented as a pattern involving a new class, prior operations as prerequisites, and conflict detection. Conflict resolution is the responsibility of the application.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb60a.html?cat=27" title="View all posts in Historic Modeling" rel="category">Historic Modeling</a> |   <a href="indexcde3.html?p=272#respond" title="Comment on Mutable properties">No Comments &#187;</a></p>
			</div>

		
		<div class="navigation">
			<div class="alignleft"><a href="index7cef.html?paged=20">&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="index5ea9.html?paged=18">Next Entries &raquo;</a></div>
		</div>

	
	</div>
		</td>
	</tr>
</table>

<hr />
<div id="footer">
<!-- If you'd like to support WordPress, having the "powered by" link someone on your blog is the best way, it's our only promotion or advertising. -->
	<p>
		Adventures in Software is proudly powered by 
		<a href="http://wordpress.org/">WordPress</a>
		<br /><a href="indexd784.html?feed=rss2">Entries (RSS)</a>
		and <a href="indexa6da.html?feed=comments-rss2">Comments (RSS)</a>.
		<!-- 21 queries. 0.506 seconds. -->
	</p>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-389401-3");
pageTracker._trackPageview();
} catch(err) {}</script></div>

<!-- Gorgeous design by Michael Heilemann - http://binarybonsai.com/kubrick/ -->

		<div id="sk2-footer" style="color:#FFF; background-color:#444; padding: 3px 2px 3px 2px; border-top: #888 solid 1px;">This blog is protected by <a href="http://unknowngenius.com/blog/" title="Dave">dr Dave</a>'s <strong><a href="http://unknowngenius.com/blog/wordpress/spam-karma/" title="SK2">Spam Karma 2</a></strong>: <strong>274531</strong>  Spams eaten and counting...</div><script type="text/javascript" src="replies.js"></script>
<script type="text/javascript" src="blogger.js"></script>
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/michaellperry.json?callback=twitterCallback2&amp;count=5"></script>
<script type="text/javascript" src="http://search.twitter.com/search.json?q=@michaellperry&amp;callback=twitterCallbackReplies&amp;rpp=5"></script>
</body>

<!-- Mirrored from adventuresinsoftware.com/blog/?paged=19 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 13:10:45 GMT -->
</html>
