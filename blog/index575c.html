<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">


<!-- Mirrored from adventuresinsoftware.com/blog/?paged=21 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 13:10:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Adventures in Software  </title>

<meta name="generator" content="WordPress 2.3.3" /> <!-- leave this for stats -->

<link rel="stylesheet" href="wp-content/themes/ais2/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Adventures in Software RSS Feed" href="indexd784.html?feed=rss2" />
<link rel="pingback" href="xmlrpc.html" />
    <script type="text/javascript">
        function onSilverlightError(sender, args) {
            var appSource = "";
            if (sender != null && sender != 0) {
              appSource = sender.getHost().Source;
            }
            
            var errorType = args.ErrorType;
            var iErrorCode = args.ErrorCode;

            if (errorType == "ImageError" || errorType == "MediaError") {
              return;
            }

            var errMsg = "Unhandled Error in Silverlight Application " +  appSource + "\n" ;

            errMsg += "Code: "+ iErrorCode + "    \n";
            errMsg += "Category: " + errorType + "       \n";
            errMsg += "Message: " + args.ErrorMessage + "     \n";

            if (errorType == "ParserError") {
                errMsg += "File: " + args.xamlFile + "     \n";
                errMsg += "Line: " + args.lineNumber + "     \n";
                errMsg += "Position: " + args.charPosition + "     \n";
            }
            else if (errorType == "RuntimeError") {           
                if (args.lineNumber != 0) {
                    errMsg += "Line: " + args.lineNumber + "     \n";
                    errMsg += "Position: " +  args.charPosition + "     \n";
                }
                errMsg += "MethodName: " + args.methodName + "     \n";
            }

            throw new Error(errMsg);
        }
    </script>

	<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc0db0.php?rsd" />
 <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml" /> <style type='text/css'>
<!--#header { background: url('wp-content/themes/ais2/images/header-imgae03.html?upper=A7A73F&amp;lower=77773F') no-repeat bottom center; }
--></style>
</head>
<body>
<div id="page">

<div class="aisTopBar">
	<form method="get" id="searchform" action="http://adventuresinsoftware.com/blog/">
<div>
<a href="indexd784.html?feed=rss2"><img src="../images/feed-icon-28x28.png" border="0"></a>
<input type="text" value="" name="s" id="s" />
<input type="submit" id="searchsubmit" value="Search" />
</div>
</form>
</div>

<div class="aisHeaderImageRight">
	<div class="aisHeaderImage">
	<div class="aisHeaderCornerRight">
	<div class="aisHeaderCornerLeft">
	<div class="aisImageBar">
	<div class="aisSubSites">
		<a href="index.html" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			home</span></span></span></a>
		<a class="aisSubSiteLink" href="indexb60a.html?cat=27"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			historic modeling</span></span></span></a>
		<a class="aisSubSiteLink" href="indexa88f.html?cat=36"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			update controls</span></span></span></a>
		<a href="index2d79.html?cat=26" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			degrees of freedom</span></span></span></a>
		<a class="aisSubSiteLink" href="indexba53.html?page_id=2"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			about us</span></span></span></a>

	</div>
	</div>
	</div>
	</div>
	</div>
</div>

<table style="width: 100%" cellspacing="0" cellpadding="0">
	<tr valign="top">
		<td width="210px">
<div id="sidebar">
<div class="aisLeftColumnFill">
<div class="aisLeftColumnBottom">
<div class="aisLeftColumnTop">
<div id="twitter_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Updates</h2>
<ul id="twitter_update_list"></ul>
<a href="http://twitter.com/michaellperry" id="follow">Follow me</a>
</div>
<div id="twitter_reply_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Replies</h2>
<ul id="twitter_reply_list"></ul>
</div>

<div class="aisLeftNav">
<a href='http://ineta.org/Speakers/SearchCommunitySpeakers.aspx?SpeakerId=c5110e21-9243-461b-a464-a6548524e885'><img alt='INETA Community Speakers Program' border='0' src='../../www.ineta.org/images/OfficialLogos/InetaCommunitySpeakersRequestMe.html' /></a>
</div>

<div class="aisLeftNav">
	<li class="pagenav"><h2>Pages</h2><ul><li class="page_item page-item-2"><a href="indexba53.html?page_id=2" title="About Us">About Us</a></li>
<li class="page_item page-item-210"><a href="index6ae3.html?page_id=210" title="Templates">Templates</a></li>
</ul></li></div>

<div class="aisLeftNav">
<h2>Archives</h2>
<ul>
	<li><a href='indexb4d5.html?m=201110' title='October 2011'>October 2011</a></li>
	<li><a href='indexc61a.html?m=201106' title='June 2011'>June 2011</a></li>
	<li><a href='indexa80d.html?m=201105' title='May 2011'>May 2011</a></li>
	<li><a href='index512b.html?m=201104' title='April 2011'>April 2011</a></li>
	<li><a href='index08fb.html?m=201103' title='March 2011'>March 2011</a></li>
	<li><a href='index52f4.html?m=201102' title='February 2011'>February 2011</a></li>
	<li><a href='index74f1.html?m=201101' title='January 2011'>January 2011</a></li>
	<li><a href='index8956.html?m=201012' title='December 2010'>December 2010</a></li>
	<li><a href='indexa1aa.html?m=201011' title='November 2010'>November 2010</a></li>
	<li><a href='indexe3d5.html?m=201010' title='October 2010'>October 2010</a></li>
	<li><a href='index9ab9.html?m=201009' title='September 2010'>September 2010</a></li>
	<li><a href='index1ff0.html?m=201008' title='August 2010'>August 2010</a></li>
	<li><a href='index9f11.html?m=201007' title='July 2010'>July 2010</a></li>
	<li><a href='index31f0.html?m=201006' title='June 2010'>June 2010</a></li>
	<li><a href='indexd189.html?m=201005' title='May 2010'>May 2010</a></li>
	<li><a href='indexb5c0.html?m=201004' title='April 2010'>April 2010</a></li>
	<li><a href='indexf258.html?m=201003' title='March 2010'>March 2010</a></li>
	<li><a href='index6e30.html?m=201002' title='February 2010'>February 2010</a></li>
	<li><a href='index6b19.html?m=201001' title='January 2010'>January 2010</a></li>
	<li><a href='index5c0a.html?m=200912' title='December 2009'>December 2009</a></li>
	<li><a href='index8f62.html?m=200911' title='November 2009'>November 2009</a></li>
	<li><a href='index451d.html?m=200910' title='October 2009'>October 2009</a></li>
	<li><a href='index3e04.html?m=200909' title='September 2009'>September 2009</a></li>
	<li><a href='index425a.html?m=200908' title='August 2009'>August 2009</a></li>
	<li><a href='index9907.html?m=200907' title='July 2009'>July 2009</a></li>
	<li><a href='index3104.html?m=200906' title='June 2009'>June 2009</a></li>
	<li><a href='indexc36d.html?m=200905' title='May 2009'>May 2009</a></li>
	<li><a href='index17e8.html?m=200904' title='April 2009'>April 2009</a></li>
	<li><a href='index10a5.html?m=200903' title='March 2009'>March 2009</a></li>
	<li><a href='index8988.html?m=200902' title='February 2009'>February 2009</a></li>
	<li><a href='index1419.html?m=200901' title='January 2009'>January 2009</a></li>
	<li><a href='index7866.html?m=200812' title='December 2008'>December 2008</a></li>
	<li><a href='index55f6.html?m=200811' title='November 2008'>November 2008</a></li>
	<li><a href='indexa7bc.html?m=200810' title='October 2008'>October 2008</a></li>
	<li><a href='indexe77c.html?m=200809' title='September 2008'>September 2008</a></li>
	<li><a href='indexcffc.html?m=200808' title='August 2008'>August 2008</a></li>
	<li><a href='index0e62.html?m=200807' title='July 2008'>July 2008</a></li>
	<li><a href='indexfda7.html?m=200806' title='June 2008'>June 2008</a></li>
	<li><a href='index7d64.html?m=200805' title='May 2008'>May 2008</a></li>
	<li><a href='index94dd.html?m=200804' title='April 2008'>April 2008</a></li>
	<li><a href='index9631.html?m=200803' title='March 2008'>March 2008</a></li>
	<li><a href='indexdd52.html?m=200802' title='February 2008'>February 2008</a></li>
	<li><a href='index21ee.html?m=200801' title='January 2008'>January 2008</a></li>
	<li><a href='index363c.html?m=200712' title='December 2007'>December 2007</a></li>
	<li><a href='index7493.html?m=200711' title='November 2007'>November 2007</a></li>
	<li><a href='index93a7.html?m=200710' title='October 2007'>October 2007</a></li>
	<li><a href='index4ca8.html?m=200709' title='September 2007'>September 2007</a></li>
	<li><a href='index6124.html?m=200708' title='August 2007'>August 2007</a></li>
	<li><a href='index6013.html?m=200707' title='July 2007'>July 2007</a></li>
	<li><a href='index2ab6.html?m=200706' title='June 2007'>June 2007</a></li>
	<li><a href='index44f0.html?m=200705' title='May 2007'>May 2007</a></li>
	<li><a href='indexf0b4.html?m=200704' title='April 2007'>April 2007</a></li>
	<li><a href='index481d.html?m=200703' title='March 2007'>March 2007</a></li>
	<li><a href='indexcbea.html?m=200702' title='February 2007'>February 2007</a></li>
	<li><a href='index9cdc.html?m=200701' title='January 2007'>January 2007</a></li>
	<li><a href='index3ea4.html?m=200612' title='December 2006'>December 2006</a></li>
	<li><a href='index67ca.html?m=200611' title='November 2006'>November 2006</a></li>
	<li><a href='indexff49.html?m=200610' title='October 2006'>October 2006</a></li>
	<li><a href='index611c.html?m=200609' title='September 2006'>September 2006</a></li>
	<li><a href='index9a21.html?m=200608' title='August 2006'>August 2006</a></li>
	<li><a href='index3ee9.html?m=200607' title='July 2006'>July 2006</a></li>
	<li><a href='indexe13a.html?m=200606' title='June 2006'>June 2006</a></li>
</ul>
</div>

<div class="aisLeftNav">
			<li id="linkcat-16" class="linkcat"><h2>Blogroll</h2>
	<ul>
<li><a href="http://ayende.com/Blog">Ayende Rahien</a></li>
<li><a href="http://www.softinsight.com/bnoyes/default.aspx">Brian Noyes</a></li>
<li><a href="http://chriskoenig.net/">Chris Koenig</a></li>
<li><a href="http://scienceblogs.com/goodmath/" title="MarkCC reveals the beauty in mathematics and exposes its misuse.">Good Math, Bad Math</a></li>
<li><a href="http://joshsmithonwpf.wordpress.com/">Josh Smith on WPF</a></li>
<li><a href="http://west-wind.com/Weblog/default.aspx">Rick Strahl</a></li>
<li><a href="http://www.udidahan.com/?blog=true">Udi Dahan</a></li>

	</ul>
</li>
<li id="linkcat-17" class="linkcat"><h2>Links</h2>
	<ul>
<li><a href="http://www.absg.com/" title="my day job">ABSG</a></li>
<li><a href="http://www.d20universe.com/" title="my friends boostrap">d20 Universe</a></li>
<li><a href="http://updatecontrols.net/" title="my open source project">Update Controls .NET</a></li>

	</ul>
</li>
<li id="linkcat-32" class="linkcat"><h2>Podroll</h2>
	<ul>
<li><a href="http://dotnetrocks.com/" title="Interviews with leaders in the .NET community.">.NET Rocks!</a></li>
<li><a href="http://hanselminutes.com/" title="News and interviews from all aspects of software, with an insider&#039;s view of Microsoft.">Hanselminutes</a></li>

	</ul>
</li>
	</div>

<div class="aisLeftNav">
<h2>Books</h2>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0764526413&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I5" id="I5"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0201633612&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I6" id="I6"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0136291554&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I7" id="I7"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=1888009195&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I8" id="I8"></iframe>
</div>
<div class="aisLeftNav">
<h2>Meta</h2>
<ul>
		<li><a href="wp-login.html">Login</a></li>
	<li><a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional">Valid <abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a></li>
	<li><a href="http://gmpg.org/xfn/"><abbr title="XHTML Friends Network">XFN</abbr></a></li>
	<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress</a></li>
	</ul>
</div>
<div class="aisLeftContent">
<h2>Community</h2>
<ul>
	<script type="text/javascript" src="../../localhost/embed/92q2bbma.js"></script>
</ul>
</div>

</div></div></div>
</div>		</td>
		<td>

	<div id="content" class="narrowcolumn">

	
		
			<div class="post" id="post-250">
				<h2><a href="indexc807.html?p=250" rel="bookmark" title="Permanent Link to Can&#8217;t create an instance of a managed WMI provider">Can&#8217;t create an instance of a managed WMI provider</a></h2>
				<small>August 28th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p><strong>Current Status</strong>    <br /><a href="indexa943.html?p=252">Solved</a></p>
<p><strong>Problem</strong>    <br />Using the .NET WMI provider extensions 2.0, I cannot create an instance of my custom provider class.</p>
<p>Windows Management Interface (WMI) is a way to expose management and configuration components from your application to scripting and operations tools, like SMS and MOM. In the past, creating a WMI provider required the use of COM. The WMI provider extensions for .NET created the ability to expose read-only management objects. In .NET 3.5, this capability was enhanced to allow for writing properties and calling methods.</p>
<p>Using these extensions, I created a management class for my application. I am having trouble creating instances of this class from the WMI command line, or any of the other WMI tools that I've tried.</p>
<p>Here's the class:</p>
<pre>using System.Management.Instrumentation;

namespace ConsoleDecoupled
{
    [ManagementEntity]
    public class Activity
    {
        private string _name;

        [ManagementBind]
        public Activity(string Name)
        {
            _name = Name;
        }

        [ManagementKey]
        public string Name
        {
            get { return _name; }
        }
    }
}</pre>
<p>
  <br />Here's the program that publishes the class to WMI:</p>
<p></p>
<pre>using System;
using System.Management.Instrumentation;

namespace ConsoleDecoupled
{
    class Program
    {
        static void Main(string[] args)
        {
            //InstrumentationManager.RegisterType(typeof(Activity));

            Activity instance = new Activity(&quot;foo&quot;);
            InstrumentationManager.Publish(instance);

            Console.WriteLine(&quot;Press enter to exit&quot;);
            Console.ReadLine();

            InstrumentationManager.Revoke(instance);
            //InstrumentationManager.UnregisterType(typeof(Activity));
        }
    }
}</pre>
<p>
  <br />And here's what wmic does when I try to create an instance:</p>
<p></p>
<pre>wmic:root\cli&gt;path Activity create Name=&quot;fee&quot;
Create instance of 'Activity' class (Y/N)?y
ERROR:
Code = 0x80041002
Description = Not found
Facility = WMI</pre>
<p>
  <br />I know that the class is found, because I can query for the instance that I created programmatically:</p>
<p></p>
<pre>wmic:root\cli&gt;path Activity where Name=&quot;foo&quot;
Name
foo</pre>
<p>
  <br />My next plan of attack is to go through this article on <a href="http://msdn.microsoft.com/en-us/library/cc268228.aspx">Writing coupled WMI providers</a>, and seeing if I run into similar problems.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index81ea.html?cat=3" title="View all posts in Error messages" rel="category">Error messages</a> |   <a href="indexc807.html?p=250#respond" title="Comment on Can&#8217;t create an instance of a managed WMI provider">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-249">
				<h2><a href="index1a93.html?p=249" rel="bookmark" title="Permanent Link to No &#8220;new&#8221;s is good news">No &#8220;new&#8221;s is good news</a></h2>
				<small>August 22nd, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>"New" is the new "goto". As mock object testing frameworks and inversion of control containers are becoming more commonplace, we are encouraged to avoid having objects directly create other objects.</p>
<p><strong>Why is "new" a bad word?</strong><br />
When a line of code includes the "new" keyword, it must also include the name of a concrete class. This line of code will appear within a different class (unless you are writing a singleton, in which case you have even bigger problems). You have just created a compile-time dependency between two classes.</p>
<p>The <a href="http://www.objectmentor.com/resources/articles/dip.pdf">dependency inversion principle</a> states that we should depend upon abstractions (i.e. interfaces and abstract base classes), rather than concrete classes. The "new" keyword immediately violates this principle because it forces us to depend upon a concrete class. The name after the "new" cannot be an interface or abstract base class, but a concrete packet of implementation.</p>
<p>Without dependency inversion, it is difficult or impossible to change units of behavior. If a class uses "new" to get access to a service component, you must change that code to replace it with a different service. If the change is a design-time decision, then recompiling the code just means more testing is required. But if the change is a run-time decision, then recompiling the code is not an option.</p>
<p>Without dependency inversion, it is difficult or impossible to mock objects for testing. If the code that you are testing is invoking "new", then the mock framework cannot intercept that and replace it with a test harness. The dummy object is there to observe the calls that leak out of the object that you are testing, and make sure that they are the ones that the test expects to induce. If those calls go into a concrete class, then the scope of the test is bigger than intended, and visibility is lost.</p>
<p><strong>Building blocks</strong><br />
I once had a manager who compared good software component design to Legos. A complete solution can be built from interchangeable pieces. If you are using "new", your components are more like a puzzle pieces than building blocks. You create a solution out of pieces, but those pieces fit together in only one way.</p>
<p>As a rule of thumb, critically examine every "new" in your software. See if you can find a way to push it up through dependency injection. If you can, push it all the way out of your code and into an IoC container. The fewer "new"s, the better.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a> |   <a href="index1a93.html?p=249#respond" title="Comment on No &#8220;new&#8221;s is good news">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-248">
				<h2><a href="indexcf9a.html?p=248" rel="bookmark" title="Permanent Link to NullReferenceException while using bean:write">NullReferenceException while using bean:write</a></h2>
				<small>July 2nd, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>Here's an obscure error that I fought for several hours today:</p>
<p>Jul 2, 2008 5:42:42 PM org.apache.catalina.core.ApplicationDispatcher invoke<br />
SEVERE: Servlet.service() for servlet jsp threw exception<br />
java.lang.NullPointerException<br />
at org.apache.struts.taglib.TagUtils.retrieveMessageResources(TagUtils.java:1175)<br />
at org.apache.struts.taglib.TagUtils.message(TagUtils.java:1038)<br />
at org.apache.struts.taglib.TagUtils.message(TagUtils.java:1013)<br />
at org.apache.struts.taglib.bean.WriteTag.retrieveFormatString(WriteTag.java:254)<br />
at org.apache.struts.taglib.bean.WriteTag.formatValue(WriteTag.java:360)<br />
at org.apache.struts.taglib.bean.WriteTag.doStartTag(WriteTag.java:232)<br />
.... (the rest is unimportant)</p>
<p>This was thrown by the following line in a JSP:</p>
<p>&lt;bean:write name="report" property="exceptionReportId" /&gt;</p>
<p>The problem is that my method getExceptionReportId() returns an int. The struts bean tag library expects all properties to be Strings. So by changing my method to return a String and using Integer.toString, I made it happy.</p>
<p>This presents a real separation-of-concerns problem. A bean should be a dumb data container. It should give you back exactly what you put in, and it should preserve your data types. The restriction that all properties are strings puts formatting into the bean, and therefore makes it specific to the JSP page.</p>
<p>Is there a tag library that separates formatting concerns from beans?</p>
<p>[UPDATE: You can format non-String property values using the bean:write format attribute. For a date, for example, &lt;bean:write name="report" property="reportDate" format="MM/dd/yyyy"/&gt;. Furthermore, to fix the NullPointerException above, I just added an empty format attribute, as in &lt;bean:write name="report" property="exceptionReportId" format="" /&gt;.]</p>
				</div>

				<p class="postmetadata">Posted in <a href="index81ea.html?cat=3" title="View all posts in Error messages" rel="category">Error messages</a>,  <a href="index5b0d.html?cat=12" title="View all posts in Java" rel="category">Java</a> |   <a href="indexcf9a.html?p=248#comments" title="Comment on NullReferenceException while using bean:write">1 Comment &#187;</a></p>
			</div>

		
			<div class="post" id="post-247">
				<h2><a href="index8cf0.html?p=247" rel="bookmark" title="Permanent Link to Inversion of Thought">Inversion of Thought</a></h2>
				<small>June 30th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>I've started a new project using Spring MVC. In doing so, I've had to invert my thinking.</p>
<p><a href="http://www.theserverside.com/tt/articles/article.tss?l=IntrotoSpring25">Spring</a> is an inversion of control container, which means that you don't code dependencies of one class directly upon another. Instead you put all of your dependencies into one configuration file and keep your code as loosely coupled as possible. This one configuration file creates a graph of objects, each with references to the others. Since the configuration file specifies the classes and references, the code for one class doesn't need to know the names of other classes.</p>
<p><strong>Why is this important?</strong><br />
<a href="http://www.objectmentor.com/resources/articles/dip.pdf">The dependency inversion principle</a> tells us that it is better to depend upon something abstract than something concrete. This helps us to change how something is done without breaking the things that need it to be done. If your code depends upon an interface, you can change the thing that implements that interface without changing your code.</p>
<p>There are other reasons which have come to light since Robert Martin published his paper back in 1996. Dependency inversion makes unit testing easier, because you can replace the components that a unit calls with mock objects. Dependency inversion makes distributed computing easier, because you can replace business objects with proxies that call business logic on remote servers. In general, dependency inversion is a good goal.</p>
<p><strong>How does Spring do it?</strong><br />
So if your class depends upon an interface rather than a concrete class, how does it get a reference to an object that implements that interface? It can't use "new" to create an instance, because "new" needs a concrete class name. To invert dependency, you have to move all of your "new"s into one place. That place is an inversion of control (IoC) container.</p>
<p>Spring reads an XML file that contains a bunch of object descriptions. You can think of each of these as a call to "new". Each one specifies a class name, an instance name, and a set of properties. These are write-once properties (what I like to call <a href="indexdd23.html?p=33">definitive</a>), and should be initialized and never changed. These properties can include references to other object instances, thus forming a graph.</p>
<p><strong>MVC</strong><br />
<a href="http://static.springframework.org/spring/docs/2.0.x/reference/mvc.html">Spring MVC</a> combines the dependency inversion principle with the model-view-controller pattern to create a pretty compelling web framework. The controllers and URL mappings are all configured through the IoC container. The URL mapper has a reference to each of the controllers, so it knows how to delegate the handling of a request. Because dependency has been inverted, the URL mapper doesn't know about the concrete classes that are the controllers, it only knows about an interface. So you can use the out-of-the-box URL mapper with your own custom controllers.</p>
<p>But it just so happens that Spring has a quaint mechanism for database access. In your XML file, you can configure a data source by providing a driver class name and a connection string to an instance of "org.apache.commons.dbcp.BasicDataSource".  Then you can use this data source to execute queries using "org.springframework.jdbc.core.simple.SimpleJdbcTemplate". I wanted to use this technique from my data access layer. However, the XML file that defines the object graph is way up in my web layer. How can I push that object graph, or at least the data source, down through the business logic layer and into the data access layer?</p>
<p><strong>The epiphany</strong><br />
That's when the full realization of dependency inversion hit me. I was thinking about the web layer depending upon the business logic layer, which then depended upon the data access layer. This is not the Spring way. Instead, the web, business logic, and data access layers are all independent. The IoC container depends upon them all. The individual components within these layers only depend upon interfaces.</p>
<p>So the one XML file declares a data source. It then declares a data access component and gives it a reference to the data source. Next comes a business logic component and with a reference to the data access component. Then, the controller with a reference to the business logic component. And finally, the URL mapper comes last with a reference to the controller. As more URLs, controllers, and components are added, this chain widens into a graph.</p>
<p>You can't pick and choose which pieces of your application use dependency inversion. Please don't try. Once you start down the Spring path, all dependencies are inverted. The graph that's defined at the highest layer of your application delves deep into the lowest, and touches all layers in between. Consider dependency inversion for your next project, and think carefully about the consequences.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index1cd2.html?cat=10" title="View all posts in Contracts" rel="category">Contracts</a>,  <a href="index5b0d.html?cat=12" title="View all posts in Java" rel="category">Java</a>,  <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a> |   <a href="index8cf0.html?p=247#comments" title="Comment on Inversion of Thought">2 Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-244">
				<h2><a href="index4978.html?p=244" rel="bookmark" title="Permanent Link to Java Query">Java Query</a></h2>
				<small>May 12th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>This is not linq for Java, but it does bear a small resemblance. Download the <a href="http://www.adventuresinsoftware.com/blog/wp-content/uploads/2008/05/query.zip" title="query.zip">source code</a> and <a href="http://www.adventuresinsoftware.com/blog/wp-content/uploads/2008/05/query_test.zip" title="unit test">unit test</a>. [Update: One unit test requires the <a href="http://javatuple.com/">Java tuple</a> library.]</p>
<p>If you've ever needed to return an Iterable&lt;T&gt; from a Java method, you know that it can be challenging. If you already have exactly the collection that you want to iterate, then all is well. If not, you have two choices.</p>
<p>Option 1, you could construct a new ArrayList&lt;T&gt;, populate it, and return it. This option is less memory efficient than it could be. But it is by far the easiest way to go. You get to write your iteration code using "for".</p>
<p>Or option 2, you could implement Iterable&lt;T&gt; with an anonymous inner class. Instead of using "for", you'll have to manage the state of your iterator yourself. Basically, you have to turn the looping code inside out and put the initialization, testing, and stepping code in separate methods. However, this saves on memory, as you don't have to store the results in an intermediate collection.</p>
<p>On a number of occasions, I've taken option 2. Having rewritten the same ugly code several times, I decided to generalize it.</p>
<p><strong>Inspiration from C#</strong><br />
Having spent some time in the .NET world, I'm familiar with two ways of solving this problem.</p>
<p>First, C# provides the "yield" keyword for turning a loop inside out. You write the code as per option 1, but instead of adding an object to a collection, you "yield return" it. The compiler turns the code inside out and makes it work like option 2. Yael has an implementation of <a href="http://chaoticjava.com/posts/how-to-write-iterators-really-really-fast/">yield return in java</a>, if you like this approach.</p>
<p>Second, C# now has built-in syntax for querying any data source, including collections of objects. This syntax is called linq, or language integrated query. I didn't want to implement all of the linq functionality in java, but I did use it as a source of inspiration.</p>
<p><strong>From</strong><br />
Linq is like upside-down SQL. The first thing that you write is the "from" clause. This is important for type safety and intellisense. Borrowing from this convention, you start a java query with:</p>
<pre>Query
    .from(collection)</pre>
<p>This returns a Query&lt;T&gt;, which gives you the rest of the methods.</p>
<p><strong>Where</strong><br />
A where clause filters the collection on-the-fly. The iterator that is produced only lands on the items that satisfy the where condition. You specify the condition by anonymously implementing the Predicate interface, as in:</p>
<pre>Query
    .from(collection)
    .where(<span style="color: blue">new</span> Predicate&lt;T&gt;() {
        <span style="color: blue">public</span> <span style="color: blue">boolean</span> where(T row) {
            <span style="color: blue">return</span> <span style="color: green">/* Condition based on row */</span>;
        }
    })</pre>
<p><strong>Join</strong><br />
A join traverses a nested collection. For each object of the first collection, you obtain an iterator over the second. The result is the same as two nested for loops. You return the inner collection using the Relation interface, as in:</p>
<pre>Query
    .from(collection)
    .join(<span style="color: blue">new</span> Relation&lt;PARENT, CHILD&gt; () {
        <span style="color: blue">public</span> Iterable&lt;CHILD&gt; join(PARENT parent) {
            <span style="color: blue">return</span> parent.getChildren();
        }
    })</pre>
<p>This produces an iterator of Join&lt;PARENT, CHILD&gt;.</p>
<p><strong>Select</strong><br />
The last clause in a query is the select. Now that you've built up and narrowed down your collection of objects, the select clause gives you a chance to transform them into the data type that you want. You provide an anonymous implementation of the Selector interface:</p>
<pre>Query
    .from(collection)
    .select(<span style="color: blue">new</span> Selector&lt;T, RESULT&gt;() {
        <span style="color: blue">public</span> RESULT select(T row) {
            <span style="color: blue">return</span> row.getProperty();
        }
    })</pre>
<p>If you want to get the objects themselves, you can simply use ".selectRow()" instead.</p>
<p><strong>Put it all together</strong><br />
You can combine these clauses to create the query you need. It has to start with a "from" and end with a "select", but you can have any combination of "join" and "where" clauses in between. Here's an example from the unit test:</p>
<pre><span style="color: green">// Iterate through the order items. Pull out order numbers where a widget is ordered.</span>
Iterator&lt;Integer&gt; orderNumbers = Query
    .from(customers)
    .join(<span style="color: blue">new</span> Relation&lt;Customer, Order&gt;() {
        <span style="color: blue">public</span> Iterable&lt;Order&gt; join(Customer parent) {
            <span style="color: blue">return</span> parent.getOrders();
        }
    })
    .join(<span style="color: blue">new</span> Relation&lt;Join&lt;Customer,Order&gt;, Item&gt;() {
        <span style="color: blue">public</span> Iterable&lt;Item&gt; join(Join&lt;Customer, Order&gt; parent) {
            <span style="color: blue">return</span> parent.getSecond().getItems();
        }
    })
    .where(<span style="color: blue">new</span> Predicate&lt;Join&lt;Join&lt;Customer,Order&gt;,Item&gt;&gt;() {
        <span style="color: blue">public</span> <span style="color: blue">boolean</span> where(Join&lt;Join&lt;Customer, Order&gt;, Item&gt; row) {
            <span style="color: blue">return</span> row.getSecond().getPart().getName().equals(<span style="color: maroon">"widget"</span>);
        }
    })
    .select(<span style="color: blue">new</span> Selector&lt;Join&lt;Join&lt;Customer,Order&gt;,Item&gt;, Integer&gt;() {
        <span style="color: blue">public</span> Integer select(Join&lt;Join&lt;Customer, Order&gt;, Item&gt; row) {
            <span style="color: blue">return</span> row.getFirst().getSecond().getNumber();
        }
    })
    .iterator();</pre>
<p>Now you can generate iterators on-the-fly without wasting memory or writing really ugly code. Under the covers, it's just doing what a for loop would do. But with a query, you can return the resulting collection to a caller without turning your code inside-out.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index5b0d.html?cat=12" title="View all posts in Java" rel="category">Java</a> |   <a href="index4978.html?p=244#respond" title="Comment on Java Query">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-243">
				<h2><a href="indexfbc5.html?p=243" rel="bookmark" title="Permanent Link to Dallas TechFest 2008">Dallas TechFest 2008</a></h2>
				<small>May 4th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>The first Dallas TechFest was this weekend. There were sessions on .NET, Ruby, REST, Groovy, Flex, AIR, and many other languages, tools, and platforms. It was a chance for members of different communities to get together and cross-train each other. I made a point of stepping outside my comfort zone, rather than sticking with the .NET track.</p>
<p>But the two sessions that I attended within the .NET track were hosted by Carl Franklin and Richard Campbell of .NET Rocks. I couldn't miss the chance to see them. The first was a recording of a .NET Rocks episode on community. The second was Richard on web application performance and scalability. If you ever get a chance to hear Richard speak, you must go.</p>
<p>After his talk, I asked Richard to take a look at Update Controls. He was very gracious and gave me at least a half an hour of his time over lunch to show him the demo. He understood the benefits of the library immediately, and gave me some pointers for getting the idea across more effectively. Finally, he told me that I need to complete the database story, which, as it happens, is in the works.</p>
<p>It was a thrill to finally meet Carl and Richard, the guys who inspired me to launch this site. And it was enlightening to see what's been going on in other parts of the industry. Who knows. Maybe I'll get a chance to present next year.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb31a.html?cat=1" title="View all posts in Uncategorized" rel="category">Uncategorized</a> |   <a href="indexfbc5.html?p=243#comments" title="Comment on Dallas TechFest 2008">2 Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-240">
				<h2><a href="indexcfe0.html?p=240" rel="bookmark" title="Permanent Link to The honest EULA">The honest EULA</a></h2>
				<small>April 15th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>If a EULA actually said what it meant:<br />
<blockquote>
<p>This agreement is a legal contract that you (the USER) make to us (the VENDOR) concerning the product (the SOFTWARE).
<p>The SOFTWARE that the USER is about to tolerate is a train wreck in progress. It is difficult to use. It is impossible to configure. It won’t behave as the USER any other rational human being would expect.
<p>In short, it is no different than any other SOFTWARE the USER has ever installed.
<p>The USER will not blame the VENDOR for the behavior of the SOFTWARE, even if the VENDOR would be found criminally negligent or deliberately maniacal. Rather, the USER agrees either to purchase additional SOFTWARE (the UPGRADE) from the VENDOR, or to abandon his data and admit his own foolishness in purchasing the SOFTWARE in the first place.
<p>The USER grants the VENDOR an unlimited license to all information voluntarily entered into the SOFTWARE. If the USER wanted to keep something from the VENDOR, why would he be entering it into the SOFTWARE in the first place? What exactly does the USER have to hide, anyway?
<p>The USER permits the SOFTWARE to contact the VENDOR periodically to transmit data collected about the USER. The USER will not inquire as to the content of the transmission. The USER will not interfere with the transmission. The USER will like it.
<p>The USER agrees to allow the SOFTWARE to install additional products from third parties (the TOOLBAR). The USER will not expect a share of the compensation that the VENDOR collects from the maker of the TOOLBAR. The USER automatically agrees to any EULA attached to the TOOLBAR.
<p>By reading this EULA the USER has already agreed to the terms herein. By ignoring this EULA, the USER is demonstrating his own ignorance and nevertheless agreeing to the terms herein.</p>
</blockquote>
				</div>

				<p class="postmetadata">Posted in <a href="index6c5d.html?cat=18" title="View all posts in Fun" rel="category">Fun</a> |   <a href="indexcfe0.html?p=240#respond" title="Comment on The honest EULA">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-239">
				<h2><a href="index1639-2.html?p=239" rel="bookmark" title="Permanent Link to Update Controls on Code Project">Update Controls on Code Project</a></h2>
				<small>April 11th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>I wrote a short article for The Code Project called <b><a href="http://www.codeproject.com/KB/miscctrl/updatecontrols.aspx">A Simple Alternative to Windows Forms Data Binding</a></b>. It's a real quick introduction to Update Controls. The goal here is just to get people trying it out to see how it simplifies Windows UI programming.</p>
<p>It's only been up for a day, but already I've gotten a comment from <b><a href="http://www.codeproject.com/script/Membership/Profiles.aspx?mid=36803">Marc Clifton</a></b> himself! If you have spent any time on <a href="http://www.codeproject.com/">Code Project</a>, you've read at least one of his articles. The man is a brilliant communicator. And he wears a nice hat.</p>
<p>Please check out the article. And if you haven't done so yet, check out <a href="http://updatecontrols.net/">Update Controls .NET</a>.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexd65e.html?cat=8" title="View all posts in User Interface" rel="category">User Interface</a> |   <a href="index1639-2.html?p=239#respond" title="Comment on Update Controls on Code Project">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-238">
				<h2><a href="index3dc6.html?p=238" rel="bookmark" title="Permanent Link to Relativity and the partial order of facts">Relativity and the partial order of facts</a></h2>
				<small>April 1st, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>Regarding the automotive wireless system that I am currently working on, we are having a discussion about feed reconciliation. It breaks down into two camps: validate everything and reject out-of-order feeds, or accept everything and sort it out later.</p>
<p>In this system, the manufacturer of the wireless device identifies the unit by MEID. They obtain some phone numbers (MDN and MIN) and pair them to the device. They then ship the device to the automaker, who installs it in a vehicle (identified by VIN). Once we have MEID, MDN, MIN, and VIN, we can create an account.</p>
<p>This scenario can be represented with an <a href="index5a6a.html?p=192">Entity Fact Diagram</a>. My understanding of the system has changed since this original post, so the diagram is different. A subset of the new diagram follows:</p>
<p><a href="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/04/new_facts.png" title="Entity Fact Diagram"><img border="0" align="left" src="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/04/new_facts.png" alt="Entity Fact Diagram" style="float: left" /></a><img border="0" align="left" width="1" src="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2008/04/new_facts.png" alt="Entity Fact Diagram" height="1" />We receive a feed for the pairing of MDN/MIN with MEID. We then receive a feed for the shipment. Finally, we receive a feed from the automaker for the installation of the MEID in a VIN. The installation feed does not include the phone numbers, so we have to have both Pairing and Installation before we create an account.</p>
<p>The argument is what to do when we've received an Installation record for an MEID that we haven't seen in the Pairing feed. It shouldn't happen, because it takes days for the device to be shipped, received, and installed. Nevertheless, it could happen and probably will.</p>
<p>So the validate everything camp wants to reject Installation records for which Shipment has not been received, and Shipment for which Pairing has not been received. Getting things out of order is indicative of a problem in the overall business process, and should be flagged as early as possible.</p>
<p>Meanwhile, the accept everything camp wants to gather and store all of this input, then run reports to reveal problems. Aging reports will show when things move forward too slowly, and exception reports will show when things skip steps. You still get the feedback, but it stays a business problem and doesn't become a system problem.</p>
<p><strong>Here's my solution</strong><br />
The entity fact diagram shows me a hybrid solution. As illustrated, the Pairing feed is a prerequisite of the Shipment feed. The arrow between them has two consequences: first, the Shipment has to have enough information to identify the Pairing. Second, the Shipment cannot exist without the Pairing. This second consequence is of particular importance.</p>
<p>The Pairing and Shipment feeds are from the same source, as indicated by color. These are completely automated feeds produced by a database at the wireless device factory. If we see a Shipment without a Pairing, then it truly is a system problem.</p>
<p>The Installation feed, however, comes from a different source. We have to be more lenient with the relative timing between different sources. If, for example, we are on Einstein's train moving near the speed of light away from the manufacturer toward the automaker, we will see the Installation lightning strike in front of us before the Pairing strikes behind us. Sure, it seems crazy, but in enterprise software these things happen.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="index3dc6.html?p=238#respond" title="Comment on Relativity and the partial order of facts">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-229">
				<h2><a href="index4580.html?p=229" rel="bookmark" title="Permanent Link to AiS 41: Scrum Doesn&#8217;t Suck">AiS 41: Scrum Doesn&#8217;t Suck</a></h2>
				<small>March 28th, 2008 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p><a href="http://media.libsyn.com/media/ais/AiS41.mp3">Listen Now</a></p>
<p><a href="http://www.ddj.com/architect/206501655" title="Agile is Relative" id="l_g6">Agile is Relative</a> by Scott Ambler.<br id="wp_r" /><a href="http://agilemanifesto.org/" title="The Agile Manifesto" id="pd8d">The Agile Manifesto</a>.<br id="docz" /><a href="http://en.wikipedia.org/wiki/Scrum_(development)" title="Scrum on Wikipedia" id="qriy">Scrum on Wikipedia</a>.<br id="pmg:" /></p>
				</div>

				<p class="postmetadata">Posted in <a href="index9035.html?cat=22" title="View all posts in Agile" rel="category">Agile</a>,  <a href="index54cb.html?cat=23" title="View all posts in Processes" rel="category">Processes</a>,  <a href="indexb5e7.html?cat=15" title="View all posts in Shows" rel="category">Shows</a> |   <a href="index4580.html?p=229#respond" title="Comment on AiS 41: Scrum Doesn&#8217;t Suck">No Comments &#187;</a></p>
			</div>

		
		<div class="navigation">
			<div class="alignleft"><a href="indexe04c.html?paged=22">&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="index7cef.html?paged=20">Next Entries &raquo;</a></div>
		</div>

	
	</div>
		</td>
	</tr>
</table>

<hr />
<div id="footer">
<!-- If you'd like to support WordPress, having the "powered by" link someone on your blog is the best way, it's our only promotion or advertising. -->
	<p>
		Adventures in Software is proudly powered by 
		<a href="http://wordpress.org/">WordPress</a>
		<br /><a href="indexd784.html?feed=rss2">Entries (RSS)</a>
		and <a href="indexa6da.html?feed=comments-rss2">Comments (RSS)</a>.
		<!-- 21 queries. 0.388 seconds. -->
	</p>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-389401-3");
pageTracker._trackPageview();
} catch(err) {}</script></div>

<!-- Gorgeous design by Michael Heilemann - http://binarybonsai.com/kubrick/ -->

		<div id="sk2-footer" style="color:#FFF; background-color:#444; padding: 3px 2px 3px 2px; border-top: #888 solid 1px;">This blog is protected by <a href="http://unknowngenius.com/blog/" title="Dave">dr Dave</a>'s <strong><a href="http://unknowngenius.com/blog/wordpress/spam-karma/" title="SK2">Spam Karma 2</a></strong>: <strong>274531</strong>  Spams eaten and counting...</div><script type="text/javascript" src="replies.js"></script>
<script type="text/javascript" src="blogger.js"></script>
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/michaellperry.json?callback=twitterCallback2&amp;count=5"></script>
<script type="text/javascript" src="http://search.twitter.com/search.json?q=@michaellperry&amp;callback=twitterCallbackReplies&amp;rpp=5"></script>
</body>

<!-- Mirrored from adventuresinsoftware.com/blog/?paged=21 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 13:10:49 GMT -->
</html>
