<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">


<!-- Mirrored from adventuresinsoftware.com/blog/?paged=35 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 13:11:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Adventures in Software  </title>

<meta name="generator" content="WordPress 2.3.3" /> <!-- leave this for stats -->

<link rel="stylesheet" href="wp-content/themes/ais2/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Adventures in Software RSS Feed" href="indexd784.html?feed=rss2" />
<link rel="pingback" href="xmlrpc.html" />
    <script type="text/javascript">
        function onSilverlightError(sender, args) {
            var appSource = "";
            if (sender != null && sender != 0) {
              appSource = sender.getHost().Source;
            }
            
            var errorType = args.ErrorType;
            var iErrorCode = args.ErrorCode;

            if (errorType == "ImageError" || errorType == "MediaError") {
              return;
            }

            var errMsg = "Unhandled Error in Silverlight Application " +  appSource + "\n" ;

            errMsg += "Code: "+ iErrorCode + "    \n";
            errMsg += "Category: " + errorType + "       \n";
            errMsg += "Message: " + args.ErrorMessage + "     \n";

            if (errorType == "ParserError") {
                errMsg += "File: " + args.xamlFile + "     \n";
                errMsg += "Line: " + args.lineNumber + "     \n";
                errMsg += "Position: " + args.charPosition + "     \n";
            }
            else if (errorType == "RuntimeError") {           
                if (args.lineNumber != 0) {
                    errMsg += "Line: " + args.lineNumber + "     \n";
                    errMsg += "Position: " +  args.charPosition + "     \n";
                }
                errMsg += "MethodName: " + args.methodName + "     \n";
            }

            throw new Error(errMsg);
        }
    </script>

	<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc0db0.php?rsd" />
 <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml" /> <style type='text/css'>
<!--#header { background: url('wp-content/themes/ais2/images/header-imgae03.html?upper=A7A73F&amp;lower=77773F') no-repeat bottom center; }
--></style>
</head>
<body>
<div id="page">

<div class="aisTopBar">
	<form method="get" id="searchform" action="http://adventuresinsoftware.com/blog/">
<div>
<a href="indexd784.html?feed=rss2"><img src="../images/feed-icon-28x28.png" border="0"></a>
<input type="text" value="" name="s" id="s" />
<input type="submit" id="searchsubmit" value="Search" />
</div>
</form>
</div>

<div class="aisHeaderImageRight">
	<div class="aisHeaderImage">
	<div class="aisHeaderCornerRight">
	<div class="aisHeaderCornerLeft">
	<div class="aisImageBar">
	<div class="aisSubSites">
		<a href="index.html" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			home</span></span></span></a>
		<a class="aisSubSiteLink" href="indexb60a.html?cat=27"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			historic modeling</span></span></span></a>
		<a class="aisSubSiteLink" href="indexa88f.html?cat=36"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			update controls</span></span></span></a>
		<a href="index2d79.html?cat=26" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			degrees of freedom</span></span></span></a>
		<a class="aisSubSiteLink" href="indexba53.html?page_id=2"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			about us</span></span></span></a>

	</div>
	</div>
	</div>
	</div>
	</div>
</div>

<table style="width: 100%" cellspacing="0" cellpadding="0">
	<tr valign="top">
		<td width="210px">
<div id="sidebar">
<div class="aisLeftColumnFill">
<div class="aisLeftColumnBottom">
<div class="aisLeftColumnTop">
<div id="twitter_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Updates</h2>
<ul id="twitter_update_list"></ul>
<a href="http://twitter.com/michaellperry" id="follow">Follow me</a>
</div>
<div id="twitter_reply_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Replies</h2>
<ul id="twitter_reply_list"></ul>
</div>

<div class="aisLeftNav">
<a href='http://ineta.org/Speakers/SearchCommunitySpeakers.aspx?SpeakerId=c5110e21-9243-461b-a464-a6548524e885'><img alt='INETA Community Speakers Program' border='0' src='../../www.ineta.org/images/OfficialLogos/InetaCommunitySpeakersRequestMe.html' /></a>
</div>

<div class="aisLeftNav">
	<li class="pagenav"><h2>Pages</h2><ul><li class="page_item page-item-2"><a href="indexba53.html?page_id=2" title="About Us">About Us</a></li>
<li class="page_item page-item-210"><a href="index6ae3.html?page_id=210" title="Templates">Templates</a></li>
</ul></li></div>

<div class="aisLeftNav">
<h2>Archives</h2>
<ul>
	<li><a href='indexb4d5.html?m=201110' title='October 2011'>October 2011</a></li>
	<li><a href='indexc61a.html?m=201106' title='June 2011'>June 2011</a></li>
	<li><a href='indexa80d.html?m=201105' title='May 2011'>May 2011</a></li>
	<li><a href='index512b.html?m=201104' title='April 2011'>April 2011</a></li>
	<li><a href='index08fb.html?m=201103' title='March 2011'>March 2011</a></li>
	<li><a href='index52f4.html?m=201102' title='February 2011'>February 2011</a></li>
	<li><a href='index74f1.html?m=201101' title='January 2011'>January 2011</a></li>
	<li><a href='index8956.html?m=201012' title='December 2010'>December 2010</a></li>
	<li><a href='indexa1aa.html?m=201011' title='November 2010'>November 2010</a></li>
	<li><a href='indexe3d5.html?m=201010' title='October 2010'>October 2010</a></li>
	<li><a href='index9ab9.html?m=201009' title='September 2010'>September 2010</a></li>
	<li><a href='index1ff0.html?m=201008' title='August 2010'>August 2010</a></li>
	<li><a href='index9f11.html?m=201007' title='July 2010'>July 2010</a></li>
	<li><a href='index31f0.html?m=201006' title='June 2010'>June 2010</a></li>
	<li><a href='indexd189.html?m=201005' title='May 2010'>May 2010</a></li>
	<li><a href='indexb5c0.html?m=201004' title='April 2010'>April 2010</a></li>
	<li><a href='indexf258.html?m=201003' title='March 2010'>March 2010</a></li>
	<li><a href='index6e30.html?m=201002' title='February 2010'>February 2010</a></li>
	<li><a href='index6b19.html?m=201001' title='January 2010'>January 2010</a></li>
	<li><a href='index5c0a.html?m=200912' title='December 2009'>December 2009</a></li>
	<li><a href='index8f62.html?m=200911' title='November 2009'>November 2009</a></li>
	<li><a href='index451d.html?m=200910' title='October 2009'>October 2009</a></li>
	<li><a href='index3e04.html?m=200909' title='September 2009'>September 2009</a></li>
	<li><a href='index425a.html?m=200908' title='August 2009'>August 2009</a></li>
	<li><a href='index9907.html?m=200907' title='July 2009'>July 2009</a></li>
	<li><a href='index3104.html?m=200906' title='June 2009'>June 2009</a></li>
	<li><a href='indexc36d.html?m=200905' title='May 2009'>May 2009</a></li>
	<li><a href='index17e8.html?m=200904' title='April 2009'>April 2009</a></li>
	<li><a href='index10a5.html?m=200903' title='March 2009'>March 2009</a></li>
	<li><a href='index8988.html?m=200902' title='February 2009'>February 2009</a></li>
	<li><a href='index1419.html?m=200901' title='January 2009'>January 2009</a></li>
	<li><a href='index7866.html?m=200812' title='December 2008'>December 2008</a></li>
	<li><a href='index55f6.html?m=200811' title='November 2008'>November 2008</a></li>
	<li><a href='indexa7bc.html?m=200810' title='October 2008'>October 2008</a></li>
	<li><a href='indexe77c.html?m=200809' title='September 2008'>September 2008</a></li>
	<li><a href='indexcffc.html?m=200808' title='August 2008'>August 2008</a></li>
	<li><a href='index0e62.html?m=200807' title='July 2008'>July 2008</a></li>
	<li><a href='indexfda7.html?m=200806' title='June 2008'>June 2008</a></li>
	<li><a href='index7d64.html?m=200805' title='May 2008'>May 2008</a></li>
	<li><a href='index94dd.html?m=200804' title='April 2008'>April 2008</a></li>
	<li><a href='index9631.html?m=200803' title='March 2008'>March 2008</a></li>
	<li><a href='indexdd52.html?m=200802' title='February 2008'>February 2008</a></li>
	<li><a href='index21ee.html?m=200801' title='January 2008'>January 2008</a></li>
	<li><a href='index363c.html?m=200712' title='December 2007'>December 2007</a></li>
	<li><a href='index7493.html?m=200711' title='November 2007'>November 2007</a></li>
	<li><a href='index93a7.html?m=200710' title='October 2007'>October 2007</a></li>
	<li><a href='index4ca8.html?m=200709' title='September 2007'>September 2007</a></li>
	<li><a href='index6124.html?m=200708' title='August 2007'>August 2007</a></li>
	<li><a href='index6013.html?m=200707' title='July 2007'>July 2007</a></li>
	<li><a href='index2ab6.html?m=200706' title='June 2007'>June 2007</a></li>
	<li><a href='index44f0.html?m=200705' title='May 2007'>May 2007</a></li>
	<li><a href='indexf0b4.html?m=200704' title='April 2007'>April 2007</a></li>
	<li><a href='index481d.html?m=200703' title='March 2007'>March 2007</a></li>
	<li><a href='indexcbea.html?m=200702' title='February 2007'>February 2007</a></li>
	<li><a href='index9cdc.html?m=200701' title='January 2007'>January 2007</a></li>
	<li><a href='index3ea4.html?m=200612' title='December 2006'>December 2006</a></li>
	<li><a href='index67ca.html?m=200611' title='November 2006'>November 2006</a></li>
	<li><a href='indexff49.html?m=200610' title='October 2006'>October 2006</a></li>
	<li><a href='index611c.html?m=200609' title='September 2006'>September 2006</a></li>
	<li><a href='index9a21.html?m=200608' title='August 2006'>August 2006</a></li>
	<li><a href='index3ee9.html?m=200607' title='July 2006'>July 2006</a></li>
	<li><a href='indexe13a.html?m=200606' title='June 2006'>June 2006</a></li>
</ul>
</div>

<div class="aisLeftNav">
			<li id="linkcat-16" class="linkcat"><h2>Blogroll</h2>
	<ul>
<li><a href="http://ayende.com/Blog">Ayende Rahien</a></li>
<li><a href="http://www.softinsight.com/bnoyes/default.aspx">Brian Noyes</a></li>
<li><a href="http://chriskoenig.net/">Chris Koenig</a></li>
<li><a href="http://scienceblogs.com/goodmath/" title="MarkCC reveals the beauty in mathematics and exposes its misuse.">Good Math, Bad Math</a></li>
<li><a href="http://joshsmithonwpf.wordpress.com/">Josh Smith on WPF</a></li>
<li><a href="http://west-wind.com/Weblog/default.aspx">Rick Strahl</a></li>
<li><a href="http://www.udidahan.com/?blog=true">Udi Dahan</a></li>

	</ul>
</li>
<li id="linkcat-17" class="linkcat"><h2>Links</h2>
	<ul>
<li><a href="http://www.absg.com/" title="my day job">ABSG</a></li>
<li><a href="http://www.d20universe.com/" title="my friends boostrap">d20 Universe</a></li>
<li><a href="http://updatecontrols.net/" title="my open source project">Update Controls .NET</a></li>

	</ul>
</li>
<li id="linkcat-32" class="linkcat"><h2>Podroll</h2>
	<ul>
<li><a href="http://dotnetrocks.com/" title="Interviews with leaders in the .NET community.">.NET Rocks!</a></li>
<li><a href="http://hanselminutes.com/" title="News and interviews from all aspects of software, with an insider&#039;s view of Microsoft.">Hanselminutes</a></li>

	</ul>
</li>
	</div>

<div class="aisLeftNav">
<h2>Books</h2>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0764526413&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I5" id="I5"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0201633612&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I6" id="I6"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0136291554&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I7" id="I7"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=1888009195&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I8" id="I8"></iframe>
</div>
<div class="aisLeftNav">
<h2>Meta</h2>
<ul>
		<li><a href="wp-login.html">Login</a></li>
	<li><a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional">Valid <abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a></li>
	<li><a href="http://gmpg.org/xfn/"><abbr title="XHTML Friends Network">XFN</abbr></a></li>
	<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress</a></li>
	</ul>
</div>
<div class="aisLeftContent">
<h2>Community</h2>
<ul>
	<script type="text/javascript" src="../../localhost/embed/92q2bbma.js"></script>
</ul>
</div>

</div></div></div>
</div>		</td>
		<td>

	<div id="content" class="narrowcolumn">

	
		
			<div class="post" id="post-44">
				<h2><a href="index49b1.html?p=44" rel="bookmark" title="Permanent Link to Share the Authority">Share the Authority</a></h2>
				<small>November 13th, 2006 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>In the typical database application, identity is created by an auto-increment key. Every insert to a table allocates a new number that uniquely identifies that new row. This number is used within the business logic of the application to return to that row in the future, and as foreign keys in other tables. It's a solution that works quite well.</p>
<p>That is, until it stops working.</p>
<p>One problem with this approach is that it fails to scale out. The one database server that allocates IDs becomes the one and only authority on identity. In order to create a new identity, any web server, any app server, and any integrated database server must abdicate to the one keeper of the auto-increment key. This one server becomes the bottleneck for rows in the table.</p>
<p>Database vendors have created ingenious solutions to this problem. It is possible with today's technology to connect a cluster of homogeneous servers and have them act as one big database. However, this solution is costly go build, tricky to configure, and difficult to maintain.</p>
<p>The problem (which we see time and again) is that our model has written a check that our technology can't cash. When we design our systems relationally, we assume that we can always go to one big table and that it will contain all of the rows that we need. If the customer in my system, she can be found in the one and only customer table. Since there is no other table that holds customers, the monotonically increasing ID is all I need to find her.</p>
<p>That assumption builds in a bottleneck that we later try to engineer out. In creating a cluster, we acknowledge that it can't <em>really</em> be one big table, but we still have to make it look like one. The relational model demands it.</p>
<p>But if we take a step back, we discover that we don't really need all of the promises that the relational model makes. Instead, we can live with a smaller set of promises that the technology can actually deliver.</p>
<p><strong>Here's my solution </strong><br />
Distribute data across different databases. These databases agree in schema, but differ in data. Identify rows not just by their auto-incremented ID numbers, but by a compound key that also includes a database ID. Yes, go ahead and store that database ID in a separate column -- make that the first column -- of every table.</p>
<p>Use a connection factory in your applications that recognizes this database ID. Based on that ID, create a connection to the appropriate database. Give your operations team control over that configuration so that they can control the allocation of IDs to databases. Give them tools to move data from one database to another in order to split or merge databases as demand requires.</p>
<p>Joining across databases is often impossible and never recommended. So keep all detail rows in the same database as their master. Choose your pivot points wisely to avoid the need for cross-database joining. Database allocation should be coarse, such as keeping all records for one client or account in the same database. But when you need finer grained control, choose a relationship that you exploit only through presentation-tier linking or middle-tier business logic, never through data-tier joins. You can serve a link on a web page that leads to another database, but don't mix data from two databases on one page.</p>
<p>And always allow for many database IDs to refer to one physical database server. This will be necessary when underutilized databases are merged. It will also give your operations team the ability to plan ahead for future splits should they become necessary.</p>
<p>One server or cluster may be all you ever need, but by sharing the authority you give yourself options. The operations team may thank you in years to come.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexc728.html?cat=7" title="View all posts in Databases" rel="category">Databases</a>,  <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a> |   <a href="index49b1.html?p=44#respond" title="Comment on Share the Authority">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-53">
				<h2><a href="index5fb3.html?p=53" rel="bookmark" title="Permanent Link to Electronic Voting Software">Electronic Voting Software</a></h2>
				<small>November 8th, 2006 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>I used a <a href="http://en.wikipedia.org/wiki/Diebold_Election_Systems">Diebold</a> terminal to vote in yesterday's election. All of the security issues aside (many of which have been covered elsewhere), I could not help but to critique their software as I was casting my ballot. I found that the system does some things well, but has a long way to go.</p>
<p>One of Alan Cooper's fundamental rules of user interaction design is that computerizing a real world metaphor makes it worse. You loose some of the features of the real world, and you take on none of the benefits of computerization. Case in point, the <a href="http://www.co.collin.tx.us/elections/election_information/2006/110706/ballots/BS_27.pdf">ballot</a> presented on the Diebold machine was made to look exactly like a paper ballot. It had boxes for the offices organized in three columns. Candidates' names were listed within the box. The boxes flowed down one column and jumped to the top of the next.</p>
<p>This ballot design was originally created for the mechanical punch system that electronic voting replaces. Columns work well in that system because that allows pages to open down the center and guide your stylus to a punch hole.</p>
<p>But columns do not work as well on a computer screen. The resolution of a display is much lower than that of paper, so text is naturally harder to read. To compensate, the voting terminal used a very large font. This caused text that would easily fit on a column of a paper ballot to sit uncomfortably within the similarly sized column of the on-screen ballot.</p>
<p>On the confirmation screen, the same layout was presented in a scrollable view. Because the flow was top-to-bottom then left-to-right, I found myself scrolling through the first column, then jumping back to the top to scroll the second column. Scrolling is bad enough with a mouse, but dragging your finger down a touch screen is terribly uncomfortable.</p>
<p>A better metaphor for a computer screen is to take the entire width. Then logically group the offices so that an entire group fits on one page. Put tabs across the top of the screen to let you jump to any group, and put indicators on the tabs that are incomplete. There are advantages to columns on a paper ballot, but those advantages do not translate to the computer screen. I know that a committee determines the layout of the ballot, and that they have many legal and political constraints in which to work, but I didn't see any allowance given to the medium.</p>
<p>On the plus side, the check boxes had good affordance, meaning that it was obvious that you could tap them. They looked like they wanted to be selected, and they gave satisfying visual feedback when activated. A punch hole on a paper ballot is much smaller, although equally satisfying when pierced.</p>
<p>Eventually, all voting will be electronic. It's just going to take us some time to learn what paper metaphors to leave behind as we move to the digital medium.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexd65e.html?cat=8" title="View all posts in User Interface" rel="category">User Interface</a> |   <a href="index5fb3.html?p=53#respond" title="Comment on Electronic Voting Software">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-52">
				<h2><a href="index4579.html?p=52" rel="bookmark" title="Permanent Link to Unused Icons on the Desktop">Unused Icons on the Desktop</a></h2>
				<small>November 7th, 2006 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>As a geek, I like to retain control over my desktop (my computer desktop, that is; my physical desktop is a mess). So when Windows pops up and tells me that I have unused icons on my desktop, I usually ignore it.</p>
<p>Today, however, I decided to give it a chance. It identified two icons that I have never actually used (one of which was Network Neighborhood) and asked if I'd like to delete them. I said yes. Then instead of actually deleting them, it moved them into a new folder called "Unused Desktop Shortcuts" which it created ... on my desktop.</p>
<p>Windows weaseled out potentially useful feature for fear that it might make a mistake. They replaced two unused icons with one. The recycle bin is there for a reason. If I make a mistake, I can go there to undo it. Please don't add an interruption, three clicks, and extraneous thought to my day only to stop half-way.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexd65e.html?cat=8" title="View all posts in User Interface" rel="category">User Interface</a> |   <a href="index4579.html?p=52#respond" title="Comment on Unused Icons on the Desktop">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-51">
				<h2><a href="index8cf7.html?p=51" rel="bookmark" title="Permanent Link to More Bad Behavior from iTunes">More Bad Behavior from iTunes</a></h2>
				<small>November 4th, 2006 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>I use iTunes to rip CDs, download podcasts, and synch my iPod. I use eMusic to purchase music. eMusic downloads to one folder, and iTunes manages another. In order to back up my music, I like to consolidate it all into the iTunes folder.</p>
<p>iTunes has a feature that does that for you. And it usually works. But today, this is what happened when I tried to consolidate my library:</p>
<p><img src="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2006/11/itunescopyfailed.jpg" alt="Copying Music failed. The file name was invalid or too long." title="Copying Music failed. The file name was invalid or too long." /></p>
<p>Which file? Was it invalid, or was it too long? What would be valid? How do I fix this?</p>
<p>Or better yet, iTunes should just rename the file itself and save me the hassle of this error message.</p>
<p><strong>Update</strong></p>
<p>After deleting, reimporting, and reconsolidating small groups of tracks, I discovered the file that was troubling iTunes. The file name including the ".mp3" extension was 134 characters long. I had to shorten it to 130 characters before iTunes would consolidate it. If you run into this error message, give that a try.</p>
<p><strong>Update 2</strong><br />
The comment from Torkel inspired me to write this quick application -- <a href="http://www.itunesfix.com/" title="iTunesFix">iTunesFix</a>. It is not a script, but a full-fledged .NET application. As such, it requres you to install the .NET framework and to trust that I haven't put anything evil in the exe. Run the program and browse for your iTunes Music Library.xml file. The program will scan the file looking for any file names that are over 130 characters in length. It will list them out for you to rename, delete, or otherwise manage as you will.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index81ea.html?cat=3" title="View all posts in Error messages" rel="category">Error messages</a> |   <a href="index8cf7.html?p=51#comments" title="Comment on More Bad Behavior from iTunes">101 Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-49">
				<h2><a href="index0012.html?p=49" rel="bookmark" title="Permanent Link to Alternative to Role-Based Security">Alternative to Role-Based Security</a></h2>
				<small>November 2nd, 2006 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>The ideas of users and roles are pervasive. Just about every OS includes the idea of a user who logs in and is a member of some role. And many types of web sites -- blogs, message boards, and wikis for example -- organize their registered users into roles like administrator, editor, author, and guest.</p>
<p>In this type of system, resource permissions are usually doled out not to individual users, but to all users in a role. All members of a role tend to perform the same types of actions to several resources. Authors create articles, editors modify them, and guests read them. Role-based security is a simple metaphor for permitting people to do the jobs that they want to do.</p>
<p>As pervasive as this metaphor is, we often forget that it is not the only option. Indeed, it is not even the best option. Role-based security has several flaws that make it inconvenient, and ultimately insecure.</p>
<p>The first weakness of role-based security is the root, or administrator. Someone has to define the roles, assign them permissions, and populate them with users. Even if this person doesn't have direct access to all resources in the system, he can easily create another user account for himself that does. It is impossible to keep secrets from Root.</p>
<p>The second weakness is coarse granularity. When a permission for a resource is granted to a role, all users in that role inherit that permission. But you might want to subdivide your editors and authors into teams, giving each team's editors permission to modify articles created by their own team's authors. You could create finer roles to account for this, but doing so requires administrator intervention.</p>
<p>Which brings us to the third weakness: the admin bottleneck. Any significant change requires an administrator. Administrators are busy people, and work should not stop while we wait for them to create new roles and assign new permissions. The people doing the work should be able to organize themselves and their resources on their own, independent of other groups.</p>
<p>The fourth weakness is centralization. The administrator represents one authority. All users and all roles are derived from this authority. It is difficult to merge two organizations that have different roots, as all users, roles, and resources must be merged into one of the two central authorities. LDAP directory services perform this operation, but they are difficult to set up and administer.</p>
<p>The fifth flaw is that the administrator controls identity. In order to gain access to the system, a person needs to go to the administrator to obtain a user account. The admin assigns them to a role and issues a name and password. For that brief period, both the user and root know the password. Furthermore, root has the authority to change the user's password or revoke the account at any time.</p>
<p>These flaws add up to a system that is inconvenient and insecure. The lack of convenience comes from the bottleneck of administration and the difficulty of merging. The insecurity comes from the all-powerful root, who has access to data and identities that he does not own.</p>
<p><strong>Here's my solution</strong></p>
<p>The alternative is so simple and powerful that I'm surprised to see how infrequently it is implemented. Just put the power in the hands of the users who create the resources. When people control their own identity and their own resources, the omnipotent root becomes obsolete.</p>
<p>The scenario is as follows. A person -- call him Jim -- approaches a system for the first time and creates his own user account. Jim only shares his password with the system, not with an admin. This new user account only has permissions to create new resources. No one has access to these new resources other than Jim. No one.</p>
<p>Then another person -- Helen -- establishes a user account in the same way. She and Jim want to work together, so she identifies herself to Jim both in-band (by giving him her user name) and out-of-band (by verifying that user name on the phone or face-to-face). Jim then assigns Helen permission to access the resource he created.</p>
<p>Now suppose Daniel and John want to join the team. Either Jim or Helen can give them access to the resource. But instead they decide to create a group. John creates the group and invites the others to join (again both in-band and out-of-band). Then Helen gives that group access to the resource. They can now create more resources under the umbrella of that group.</p>
<p>If Jim leaves the team, any remaining member can remove him from the group. Now he no longer has access to the resources controlled by the group, including the one that he started the whole project with. The team can organize themselves, authenticate their members, and control their resources without giving up any control to an administrator.</p>
<p><strong>The solution in practice</strong></p>
<p>Multi-user blog sites go part of the way toward this solution. You can go to blogspot.com and create an account without contacting an administrator. Then you create your own blog to which you alone can post. But everyone has read access to your resource. After all, it is a blog.</p>
<p>Google Docs and Spreadsheets goes a little further by allowing you to grant other users access to your resources. But you still can't create groups to manage permissions for entire teams.</p>
<p>By far the best implementation of this idea is <a href="http://www.adventuresinsoftware.com/blog/www.groove.net">Groove</a>, a peer-to-peer collaborative workspace acquired by Microsoft. Anyone can create a new space, invite anyone they want into that space, and maintain control over the resources therein. The space itself acts like a group, associating individual users with the resources that they control. Any member can invite others to the space, though last I looked you cannot revoke someone else's membership.</p>
<p>But there is nothing special about peer-to-peer. You can implement this idea on the web. Think about it next time you are setting up a collaborative site.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a>,  <a href="index376e.html?cat=13" title="View all posts in Security" rel="category">Security</a> |   <a href="index0012.html?p=49#comments" title="Comment on Alternative to Role-Based Security">4 Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-46">
				<h2><a href="index7ea6.html?p=46" rel="bookmark" title="Permanent Link to Alpahbetic Options">Alpahbetic Options</a></h2>
				<small>October 28th, 2006 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>In Windows, open a folder and open "Tools: Folder Options...". Click on the View tab. The Advanced Settings is a scrollable list of options.</p>
<p><img title="folderoptions.jpg" id="image47" alt="folderoptions.jpg" src="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2006/10/folderoptions.jpg" /><br />
If I want to turn on known extensions, do I look under D for for "Display", S for "Show", or H for "Hide"?</p>
<p>The same metaphor appears in Word 2003. Go to "Tools: Options..." and click the Compatibility tab.</p>
<p><img id="image48" alt="wordoptions.jpg" src="../../www.adventuresinsoftware.com/blog/wp-content/uploads/2006/10/wordoptions.jpg" /></p>
<p>This options are grouped by words like "Don't", "Surpress", and "Use". When looking for hanging indent tab stops, I won't be looking for "Don't".</p>
<p>The only explanation I can find for this metaphor is laziness, and not the good kind. Instead of taking the time to group and organize options for us, the developer just throws them into a checked list box. This is also an indicator of <a href="indexcbb6.html?p=41">feature indecision</a>. If you have so many options that you need to scroll through them, you have failed to decide how your features work.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexd65e.html?cat=8" title="View all posts in User Interface" rel="category">User Interface</a> |   <a href="index7ea6.html?p=46#respond" title="Comment on Alpahbetic Options">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-43">
				<h2><a href="index4170.html?p=43" rel="bookmark" title="Permanent Link to Java Tuple">Java Tuple</a></h2>
				<small>October 20th, 2006 <!-- by Michael L Perry --></small>

				<div class="entry">
					<blockquote><p><strong>Final Update</strong>The latest code is at <a href="index4cfb.html?p=546">http://adventuresinsoftware.com/blog/?p=546</a>. The javatuple.com site is going off-line.</p></blockquote>
<blockquote><p><strong>Update</strong> I've created a new version of this Java Tuple library. It can be found at <s>http://javatuple.com</s>. The new version uses generics for type safety. It also has extractor methods. If you use Java 1.4 or earlier, or you just prefer the previous version, please read on. Otherwise, visit javatuple.com.</p></blockquote>
<blockquote><p>Thanks.</p></blockquote>
<p>I don't know how many times I've needed a hash map with a compound key, but it seems to come up often. Every time, I am faced with the same question: do I really want to define a class for this key?It's seems like such a simple thing at first. Just a class with a few members. But then you have to initialize those members in the constructor. And then you need to write equals(). And don't forget hashCode(). Sometimes I'm tempted to create a concatenated string to get around the extra baggage. But that would be a hack.To solve this problem, I finally decided to create a Tuple class. A tuple is a an ordered collection of heterogeneous elements. Compare this to a vector, which is homogeneous. The type of a tuple is defined by the number and type of its elements.Examples of tuples that naturally occur in software are parameter lists and database rows. Both of these things have a fixed, finite number of elements that must occur in a certain order. All rows in a table have the same number and types of columns, but one column can have a different type from another. Some languages treat tuples as native data types, but not Java.My Tuple class comes in two pieces. The base class implements all of the comparison behavior. The concrete class lets you build a generic tuple.
<pre>package com.adventuresinsoftware.tuple;import java.util.ArrayList;import java.util.Iterator;public abstract class BaseTuple implements Comparable {    // Ordered collection of elements.    ArrayList elements = new ArrayList();    // Strings used to display the tuple.    String open;    String separator;    String close;    // Initialize the strings for this tuple type.    protected BaseTuple(String open, String separator, String close) {        this.open = open;        this.separator = separator;        this.close = close;    }    // Add elements to the tuple. Supports dot-chaining.    protected BaseTuple addElement(Object o) {        elements.add(o);        return this;    }    protected BaseTuple addElement(int i) {        return addElement(new Integer(i));    }    // Compare two tuples. All elements must be equal.    public boolean equals(Object obj) {        if (obj == null)            return false;        if (!(obj instanceof BaseTuple))            return false;        BaseTuple that = (BaseTuple) obj;        if (that.elements.size() != this.elements.size())            return false;        for (int i = 0; i &lt; elements.size(); ++i) {            if (!that.elements.get(i).equals(this.elements.get(i)))                return false;        }        return true;    }    // Calculate a hash code based on the hash of each element.    public int hashCode() {        int result = 0;        Iterator it = elements.iterator();        while (it.hasNext()) {            result = result * 37 + it.next().hashCode();        }        return result;    }    // Display the tuple using the open, separator, and close    // specified in the constructor.    public String toString() {        StringBuffer result = new StringBuffer(open);        Iterator it = elements.iterator();        while (it.hasNext()) {            result.append(it.next());            if (it.hasNext())                result.append(separator);        }        return result.append(close).toString();    }    // Order by the most significant element first.    // The tuples must agree in size and type.    public int compareTo(Object o) {        BaseTuple that = (BaseTuple) o;        for (int i = 0; i &lt; elements.size(); ++i) {            int compare = ((Comparable) this.elements.get(i))                .compareTo((Comparable) that.elements.get(i));            if (compare != 0)                return compare;        }        return 0;    }}</pre>
<pre>package com.adventuresinsoftware.tuple;public class Tuple extends BaseTuple {    // Display a coma-separated list of elements.    public Tuple() {        super("(", ", ", ")");    }    // Add generic elements to the tuple.    // Supports dot-chaining.    public Tuple add(Object o) {        super.addElement(o);        return this;    }    public Tuple add(int i) {        super.addElement(i);        return this;    }}</pre>
<p>To use a Tuple as a compound HashMap key, just construct one in place using dot-chaining.
<pre>    public void testTupleHashMap() {        Map population = new HashMap();        population.put(            new Tuple().add("TX").add("Dallas"),            new Integer(1213825));        population.put(            new Tuple().add("TX").add("Fort Worth"),            new Integer(624067));        population.put(            new Tuple().add("IL").add("Springfield"),            new Integer(203564));        population.put(            new Tuple().add("NM").add("Albuquerque"),            new Integer(494236));        assertEquals(new Integer(624067), population.get(            new Tuple().add("TX").add("Fort Worth")));        assertNull(population.get(            new Tuple().add("NM").add("Roswell")));        assertNull(population.get(            new Tuple().add("NJ").add("Springfield")));    }</pre>
<p>The Tuple class has a useful toString method.
<pre>    public void testTupleToString() {        Tuple tuple = new Tuple().add("MLB").add(1);        assertEquals( "(MLB, 1)", tuple.toString() );    }</pre>
<p>And if you want to create your own strictly typed tuples, you can declare your own derived class.
<pre>package com.adventuresinsoftware.tuple;public class Version extends BaseTuple {    // A version is a tuple of 4 integers separated by periods.    public Version(int major, int minor, int release, int qfe) {        super("", ".", "");        addElement(major).addElement(minor).addElement(release).addElement(qfe);    }}</pre>
<pre>    public void testVersion() {        Version v1 = new Version(2,0,2,3425);        Version v2 = new Version(2,1,0,241);        assertEquals("2.0.2.3425", v1.toString());        assertEquals("2.1.0.241", v2.toString());        assertTrue("Version 2.1.0.241 &gt; 2.0.2.3425", v2.compareTo(v1) &gt; 0);    }</pre>
<p>Enjoy!</p>
				</div>

				<p class="postmetadata">Posted in <a href="index5b0d.html?cat=12" title="View all posts in Java" rel="category">Java</a> |   <a href="index4170.html?p=43#comments" title="Comment on Java Tuple">43 Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-42">
				<h2><a href="indexfbd5.html?p=42" rel="bookmark" title="Permanent Link to Four Rules for APIs">Four Rules for APIs</a></h2>
				<small>October 17th, 2006 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>Java's Date and Calendar API is awful. Even when a quick date calculation is required, you have to stop the flow of your coding to go through the GregorianCalendar gyrations. It is impossible to simply express the intent with these defunct classes.</p>
<p>I've decided to use this as an learning exercise. What is it about Date and Calendar that makes it so difficult to use? What can we do to avoid these difficulties when designing our own classes? Fortunately, there is an alternative that gets it right. When comparing java.util to <a href="http://joda-time.sourceforge.net/">Joda</a>, the problems become quite apparent.</p>
<p>The first problem is that the Date class has no useful methods. In order to use a Date, one must almost always put it into a GregorianCalendar. Most of us writing in Java are working on business applications, and business uses the Gregorian calendar. Different countries have different names for the days of the week and the months of the year, but we all have days, weeks, months, and years. The Date class should expose those concepts directly.</p>
<p>The second problem is that method calls cannot be chained. OK, I've accepted the fact that to work with a Date, I have to construct a GregorianCalendar. So I start to type something like this:</p>
<pre>int day = new GregorianCalendar(date).get(Calendar.DAY);</pre>
<p>But, no, GregorianCalendar has no constructor that takes a Date. I have to construct and initialize it in two separate steps. And then, to make matters worse, the method that initializes the GregorianCalendar is void. So I can't even chain this call with the get. I have to do in three lines what I would like to do in one.</p>
<p>The third problem is that the API provides one generic getter and setter for all fields of a Calendar. A Calendar is a collection of fields identified by constants. But I don't care how you represent a Calendar, I just want to know what day it is.<br />
The fourth problem is that there is no distinction between a date (October 17, 2006), a time of day (10:11 pm), and a moment in time (October 17, 2006 at 10:11 pm). These different concepts need to be treated differently. When working with dates, for example, you don't apply time zones or daylight savings rules. The span between October 29 and October 30 is still 1 day, even though the span between midnight on those two days may be 25 hours (depending upon where you live).</p>
<p>Joda solves all of these problems. It is easy to use right where you need it without breaking stride. Do yourself a favor and start using it now, even if you are right in the middle of a project. You'll never want to be without it.</p>
<p>But the point of this post is not to plug Joda, but to codify four rules for creating good APIs:</p>
<ol>
<li>Put the useful methods on the most used classes. Don't force your audience to bring in objects that they don't already need.</li>
<li>Promote method chaining. This is accomplished in two ways. First, all methods should return something, even if it is "this". And second, provide all necessary conversions. Overload constructors, or better yet have a good set of static methods (GregorianCalendar.fromDate() would have been nice).</li>
<li>Break down the abstraction the way your audience will use it. Don't design the API based on implementation.</li>
<li>Create a different type for each useful distinct idea, even if it appears to be a special case of another. Remember, <a href="http://ootips.org/ellipse-circle.html">a circle is <em>not</em> an ellipse</a>, no matter what you learned in geometry.</li>
</ol>
<p>While you are working on the API, remember the golden rule Necessary and Sufficient. Don't go crazy with the convenience methods or you will only sow confusion.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index1cd2.html?cat=10" title="View all posts in Contracts" rel="category">Contracts</a>,  <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a>,  <a href="index0b40.html?cat=9" title="View all posts in Tools" rel="category">Tools</a> |   <a href="indexfbd5.html?p=42#respond" title="Comment on Four Rules for APIs">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-41">
				<h2><a href="indexcbb6.html?p=41" rel="bookmark" title="Permanent Link to Feature Indecision">Feature Indecision</a></h2>
				<small>October 16th, 2006 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>Here's a scenario that I've seen played out countless times. I recall a requirements meeting during which an issue came up about a new feature. The business analysts, software architects, and product managers present all had different opinions on the fine points of its behavior. All had valid opinions. The user might actually want the feature to work in any of the proposed ways. Nobody wanted to loose the argument by putting their opinions aside, so instead of choosing one we decided to ask the user what they wanted.</p>
<p>At first, we were going to ask via a modal dialog that appears when the user invokes the feature. Such pop-ups are hostile to the user experience, so it was changed to a checkbox on the screen that invoked the feature. However, this solution cluttered the UI, so we eventually buried it in a separate configuration window.</p>
<p>After the feature shipped, we received feedback that it behaved inconsistently. Sometimes it worked one way, and sometimes another. Apparently one power-user who knew about the configuration window was changing it, and all of the users who didn't were suffering the consequences.</p>
<p>The problem, of course, is that we failed to take responsibility for our product's behavior. As software designers, it is up to us to decide what a feature does. When we shirk that responsability, we create unnecessary complexity in the software. Complexity leads to confusion.</p>
<p>Now when I see feature indecision, I put a stop to it. Whenever someone recommends that we prompt the user, I ask if there is any way we can decide now. Sure, that means that some people leave the meeting "loosers", but the user wins in the end.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexd65e.html?cat=8" title="View all posts in User Interface" rel="category">User Interface</a> |   <a href="indexcbb6.html?p=41#comments" title="Comment on Feature Indecision">1 Comment &#187;</a></p>
			</div>

		
			<div class="post" id="post-40">
				<h2><a href="index3ba0.html?p=40" rel="bookmark" title="Permanent Link to More Trouble with Naming">More Trouble with Naming</a></h2>
				<small>October 13th, 2006 <!-- by Michael L Perry --></small>

				<div class="entry">
					<p>Previously, I posted a solution that I learned from my wife for the problem of domain name kiting, squatting, and misspelling. In that post, I mentioned that other nations have little control over the way that this international network is administered. The e360 Insight LLC v Spamhaus suit illustrates exactly why we should all be concerned.</p>
<p>Spamhaus maintains a blacklist of spammers. e360 Insight LLC sued Spamhaus after it was blacklisted, and won an $11.7 million ruling. But the US district court that ordered the payment has no validity against the UK-based Spamhaus, so e360 turned its attention to another US company: ICANN.</p>
<p>e360 has asked the court to order ICANN to suspend spamhaus.org until Spamhaus complies with the ruling.</p>
<p>A recent <a href="http://news.zdnet.co.uk/business/0,39020645,39284034,00.htm">ZDNet article</a> reports that ICANN is taking the high road in stating that it will refuse this order. I applaud their efforts to stay above the fray. But some day they will be drawn down into it, bringing the Internet (to some degree) with them.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index29c7.html?cat=11" title="View all posts in Naming" rel="category">Naming</a> |   <a href="index3ba0.html?p=40#respond" title="Comment on More Trouble with Naming">No Comments &#187;</a></p>
			</div>

		
		<div class="navigation">
			<div class="alignleft"><a href="indexf2e6.html?paged=36">&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="index20c4.html?paged=34">Next Entries &raquo;</a></div>
		</div>

	
	</div>
		</td>
	</tr>
</table>

<hr />
<div id="footer">
<!-- If you'd like to support WordPress, having the "powered by" link someone on your blog is the best way, it's our only promotion or advertising. -->
	<p>
		Adventures in Software is proudly powered by 
		<a href="http://wordpress.org/">WordPress</a>
		<br /><a href="indexd784.html?feed=rss2">Entries (RSS)</a>
		and <a href="indexa6da.html?feed=comments-rss2">Comments (RSS)</a>.
		<!-- 21 queries. 0.405 seconds. -->
	</p>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-389401-3");
pageTracker._trackPageview();
} catch(err) {}</script></div>

<!-- Gorgeous design by Michael Heilemann - http://binarybonsai.com/kubrick/ -->

		<div id="sk2-footer" style="color:#FFF; background-color:#444; padding: 3px 2px 3px 2px; border-top: #888 solid 1px;">This blog is protected by <a href="http://unknowngenius.com/blog/" title="Dave">dr Dave</a>'s <strong><a href="http://unknowngenius.com/blog/wordpress/spam-karma/" title="SK2">Spam Karma 2</a></strong>: <strong>274531</strong>  Spams eaten and counting...</div><script type="text/javascript" src="replies.js"></script>
<script type="text/javascript" src="blogger.js"></script>
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/michaellperry.json?callback=twitterCallback2&amp;count=5"></script>
<script type="text/javascript" src="http://search.twitter.com/search.json?q=@michaellperry&amp;callback=twitterCallbackReplies&amp;rpp=5"></script>
</body>

<!-- Mirrored from adventuresinsoftware.com/blog/?paged=35 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 13:11:17 GMT -->
</html>
