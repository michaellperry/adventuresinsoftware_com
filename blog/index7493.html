<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">


<!-- Mirrored from adventuresinsoftware.com/blog/?m=200711 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 12:50:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Adventures in Software   &raquo; 2007&raquo; November</title>

<meta name="generator" content="WordPress 2.3.3" /> <!-- leave this for stats -->

<link rel="stylesheet" href="wp-content/themes/ais2/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Adventures in Software RSS Feed" href="indexd784.html?feed=rss2" />
<link rel="pingback" href="xmlrpc.html" />
    <script type="text/javascript">
        function onSilverlightError(sender, args) {
            var appSource = "";
            if (sender != null && sender != 0) {
              appSource = sender.getHost().Source;
            }
            
            var errorType = args.ErrorType;
            var iErrorCode = args.ErrorCode;

            if (errorType == "ImageError" || errorType == "MediaError") {
              return;
            }

            var errMsg = "Unhandled Error in Silverlight Application " +  appSource + "\n" ;

            errMsg += "Code: "+ iErrorCode + "    \n";
            errMsg += "Category: " + errorType + "       \n";
            errMsg += "Message: " + args.ErrorMessage + "     \n";

            if (errorType == "ParserError") {
                errMsg += "File: " + args.xamlFile + "     \n";
                errMsg += "Line: " + args.lineNumber + "     \n";
                errMsg += "Position: " + args.charPosition + "     \n";
            }
            else if (errorType == "RuntimeError") {           
                if (args.lineNumber != 0) {
                    errMsg += "Line: " + args.lineNumber + "     \n";
                    errMsg += "Position: " +  args.charPosition + "     \n";
                }
                errMsg += "MethodName: " + args.methodName + "     \n";
            }

            throw new Error(errMsg);
        }
    </script>

	<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc0db0.php?rsd" />
 <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml" /> <style type='text/css'>
<!--#header { background: url('wp-content/themes/ais2/images/header-imgae03.html?upper=A7A73F&amp;lower=77773F') no-repeat bottom center; }
--></style>
</head>
<body>
<div id="page">

<div class="aisTopBar">
	<form method="get" id="searchform" action="http://adventuresinsoftware.com/blog/">
<div>
<a href="indexd784.html?feed=rss2"><img src="../images/feed-icon-28x28.png" border="0"></a>
<input type="text" value="" name="s" id="s" />
<input type="submit" id="searchsubmit" value="Search" />
</div>
</form>
</div>

<div class="aisHeaderImageRight">
	<div class="aisHeaderImage">
	<div class="aisHeaderCornerRight">
	<div class="aisHeaderCornerLeft">
	<div class="aisImageBar">
	<div class="aisSubSites">
		<a href="index.html" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			home</span></span></span></a>
		<a class="aisSubSiteLink" href="indexb60a.html?cat=27"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			historic modeling</span></span></span></a>
		<a class="aisSubSiteLink" href="indexa88f.html?cat=36"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			update controls</span></span></span></a>
		<a href="index2d79.html?cat=26" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			degrees of freedom</span></span></span></a>
		<a class="aisSubSiteLink" href="indexba53.html?page_id=2"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			about us</span></span></span></a>

	</div>
	</div>
	</div>
	</div>
	</div>
</div>

<table style="width: 100%" cellspacing="0" cellpadding="0">
	<tr valign="top">
		<td width="210px">
<div id="sidebar">
<div class="aisLeftColumnFill">
<div class="aisLeftColumnBottom">
<div class="aisLeftColumnTop">
<div id="twitter_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Updates</h2>
<ul id="twitter_update_list"></ul>
<a href="http://twitter.com/michaellperry" id="follow">Follow me</a>
</div>
<div id="twitter_reply_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Replies</h2>
<ul id="twitter_reply_list"></ul>
</div>

<div class="aisLeftNav">
<a href='http://ineta.org/Speakers/SearchCommunitySpeakers.aspx?SpeakerId=c5110e21-9243-461b-a464-a6548524e885'><img alt='INETA Community Speakers Program' border='0' src='../../www.ineta.org/images/OfficialLogos/InetaCommunitySpeakersRequestMe.html' /></a>
</div>

<div class="aisLeftNav">
	<li class="pagenav"><h2>Pages</h2><ul><li class="page_item page-item-2"><a href="indexba53.html?page_id=2" title="About Us">About Us</a></li>
<li class="page_item page-item-210"><a href="index6ae3.html?page_id=210" title="Templates">Templates</a></li>
</ul></li></div>

<div class="aisLeftNav">
<h2>Archives</h2>
<ul>
	<li><a href='indexb4d5.html?m=201110' title='October 2011'>October 2011</a></li>
	<li><a href='indexc61a.html?m=201106' title='June 2011'>June 2011</a></li>
	<li><a href='indexa80d.html?m=201105' title='May 2011'>May 2011</a></li>
	<li><a href='index512b.html?m=201104' title='April 2011'>April 2011</a></li>
	<li><a href='index08fb.html?m=201103' title='March 2011'>March 2011</a></li>
	<li><a href='index52f4.html?m=201102' title='February 2011'>February 2011</a></li>
	<li><a href='index74f1.html?m=201101' title='January 2011'>January 2011</a></li>
	<li><a href='index8956.html?m=201012' title='December 2010'>December 2010</a></li>
	<li><a href='indexa1aa.html?m=201011' title='November 2010'>November 2010</a></li>
	<li><a href='indexe3d5.html?m=201010' title='October 2010'>October 2010</a></li>
	<li><a href='index9ab9.html?m=201009' title='September 2010'>September 2010</a></li>
	<li><a href='index1ff0.html?m=201008' title='August 2010'>August 2010</a></li>
	<li><a href='index9f11.html?m=201007' title='July 2010'>July 2010</a></li>
	<li><a href='index31f0.html?m=201006' title='June 2010'>June 2010</a></li>
	<li><a href='indexd189.html?m=201005' title='May 2010'>May 2010</a></li>
	<li><a href='indexb5c0.html?m=201004' title='April 2010'>April 2010</a></li>
	<li><a href='indexf258.html?m=201003' title='March 2010'>March 2010</a></li>
	<li><a href='index6e30.html?m=201002' title='February 2010'>February 2010</a></li>
	<li><a href='index6b19.html?m=201001' title='January 2010'>January 2010</a></li>
	<li><a href='index5c0a.html?m=200912' title='December 2009'>December 2009</a></li>
	<li><a href='index8f62.html?m=200911' title='November 2009'>November 2009</a></li>
	<li><a href='index451d.html?m=200910' title='October 2009'>October 2009</a></li>
	<li><a href='index3e04.html?m=200909' title='September 2009'>September 2009</a></li>
	<li><a href='index425a.html?m=200908' title='August 2009'>August 2009</a></li>
	<li><a href='index9907.html?m=200907' title='July 2009'>July 2009</a></li>
	<li><a href='index3104.html?m=200906' title='June 2009'>June 2009</a></li>
	<li><a href='indexc36d.html?m=200905' title='May 2009'>May 2009</a></li>
	<li><a href='index17e8.html?m=200904' title='April 2009'>April 2009</a></li>
	<li><a href='index10a5.html?m=200903' title='March 2009'>March 2009</a></li>
	<li><a href='index8988.html?m=200902' title='February 2009'>February 2009</a></li>
	<li><a href='index1419.html?m=200901' title='January 2009'>January 2009</a></li>
	<li><a href='index7866.html?m=200812' title='December 2008'>December 2008</a></li>
	<li><a href='index55f6.html?m=200811' title='November 2008'>November 2008</a></li>
	<li><a href='indexa7bc.html?m=200810' title='October 2008'>October 2008</a></li>
	<li><a href='indexe77c.html?m=200809' title='September 2008'>September 2008</a></li>
	<li><a href='indexcffc.html?m=200808' title='August 2008'>August 2008</a></li>
	<li><a href='index0e62.html?m=200807' title='July 2008'>July 2008</a></li>
	<li><a href='indexfda7.html?m=200806' title='June 2008'>June 2008</a></li>
	<li><a href='index7d64.html?m=200805' title='May 2008'>May 2008</a></li>
	<li><a href='index94dd.html?m=200804' title='April 2008'>April 2008</a></li>
	<li><a href='index9631.html?m=200803' title='March 2008'>March 2008</a></li>
	<li><a href='indexdd52.html?m=200802' title='February 2008'>February 2008</a></li>
	<li><a href='index21ee.html?m=200801' title='January 2008'>January 2008</a></li>
	<li><a href='index363c.html?m=200712' title='December 2007'>December 2007</a></li>
	<li><a href='index7493.html?m=200711' title='November 2007'>November 2007</a></li>
	<li><a href='index93a7.html?m=200710' title='October 2007'>October 2007</a></li>
	<li><a href='index4ca8.html?m=200709' title='September 2007'>September 2007</a></li>
	<li><a href='index6124.html?m=200708' title='August 2007'>August 2007</a></li>
	<li><a href='index6013.html?m=200707' title='July 2007'>July 2007</a></li>
	<li><a href='index2ab6.html?m=200706' title='June 2007'>June 2007</a></li>
	<li><a href='index44f0.html?m=200705' title='May 2007'>May 2007</a></li>
	<li><a href='indexf0b4.html?m=200704' title='April 2007'>April 2007</a></li>
	<li><a href='index481d.html?m=200703' title='March 2007'>March 2007</a></li>
	<li><a href='indexcbea.html?m=200702' title='February 2007'>February 2007</a></li>
	<li><a href='index9cdc.html?m=200701' title='January 2007'>January 2007</a></li>
	<li><a href='index3ea4.html?m=200612' title='December 2006'>December 2006</a></li>
	<li><a href='index67ca.html?m=200611' title='November 2006'>November 2006</a></li>
	<li><a href='indexff49.html?m=200610' title='October 2006'>October 2006</a></li>
	<li><a href='index611c.html?m=200609' title='September 2006'>September 2006</a></li>
	<li><a href='index9a21.html?m=200608' title='August 2006'>August 2006</a></li>
	<li><a href='index3ee9.html?m=200607' title='July 2006'>July 2006</a></li>
	<li><a href='indexe13a.html?m=200606' title='June 2006'>June 2006</a></li>
</ul>
</div>

<div class="aisLeftNav">
	</div>

<div class="aisLeftNav">
<h2>Books</h2>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0764526413&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I5" id="I5"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0201633612&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I6" id="I6"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0136291554&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I7" id="I7"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=1888009195&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I8" id="I8"></iframe>
</div>
<div class="aisLeftNav">
<h2>Meta</h2>
<ul>
		<li><a href="wp-login.html">Login</a></li>
	<li><a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional">Valid <abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a></li>
	<li><a href="http://gmpg.org/xfn/"><abbr title="XHTML Friends Network">XFN</abbr></a></li>
	<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress</a></li>
	</ul>
</div>
<div class="aisLeftContent">
<h2>Community</h2>
<ul>
	<script type="text/javascript" src="../../localhost/embed/92q2bbma.js"></script>
</ul>
</div>

</div></div></div>
</div>		</td>
		<td>

	<div id="content" class="narrowcolumn">

		
		 		<h2 class="pagetitle">Archive for November, 2007</h2>

		

		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"></div>
		</div>

				<div class="post">
				<h3 id="post-176"><a href="index3440.html?p=176" rel="bookmark" title="Permanent Link to The Right Time to Update">The Right Time to Update</a></h3>
				<small>Monday, November 26th, 2007</small>

				<div class="entry">
					<p>I use subversion for all of my personal and professional source code control. As I've stated before, I highly recommend that you <a href="http://www.adventuresinsoftware.com/blog/?p=95">set up an SVN repository</a> for managing and sharing your own projects. My client of choice is <a href="http://syncrosvnclient.com/">Syncro SVN</a>. But like all the other SVN clients that I've tried, it picks the wrong time to update.</p>
<p>When drilling down through the folders of a repository, all SVN clients pause each time a folder is opened to fetch data from the server. Syncro SVN keeps the tree populated while the program is running, so you can collapse and expand folders without penalty. However, once you close the program, it has to fetch folder contents all over again the next time you run it.</p>
<p>This pause for every folder puts a small tax on user navigation. It puts a speed bump on the road that the user takes to get something done. I hold in my head the place that I need to go and the thing that I need to do once I get there. A series of speed bumps, like the so-called &quot;Chinese&quot; water torture, can distract me from that goal and derail my progress.</p>
<p>An even more common example of the wrong time to update can be found in just about any program that downloads new versions of itself. Every once in a while, I start Firefox, Quicken, or iTunes to be asked if I want to install an update. The reason that I started this program was not to install an update. It was to get something accomplished. This question completely puts me off my goal and makes me worry. Is there some serious bug or security problem that I should let them fix? How long will this update take? What's the chance that it will fail and prevent me from accomplishing my goal altogether?</p>
<p>All of these programs let me say no, which I do by default. But then in most cases I'm just asked the question again the next time I try to get something done, so I eventually relent. Firefox is the best of a bad bunch, because it will hold off the update until the end of my session. Of course, it still has to ask, and then it has to tell me that it will update itself. I'd rather it just do that by default.</p>
<p><strong>Here's my solution</strong>    <br />I recently implemented automatic self update in a Windows program. I fashioned it after the Firefox model, but just made it work without any pop-ups.</p>
<p>First I created a launcher for the program. This launcher just runs the program, after doing some bookkeeping that I'll describe soon.</p>
<p>Then, when the program starts, it starts a background thread to go to the web site and check for newer versions. If it finds one, it downloads it in the background. If the user closes the program before the download completes, it is canceled. It will try again the next time the program starts.</p>
<p>If the download succeeds, then the new version is put in a sub folder for the launcher to find. This is the bookkeeping I was talking about. The next time the user runs the program, the launcher quickly (and silently) installs the new version before running it.</p>
<p><strong>Update data in the background</strong>    <br />The right time to update is when the user isn't looking. This works equally well for data updates as it does for software updates. Syncro SVN could start a background thread to pull down folder contents. This would get that processing off the main thread, and keep the user from experiencing a series of speed bumps.</p>
<p>But background processing isn't enough. If the background process is fired on demand, then the user is still waiting before going to the next step. You also need persistence. Once the folder contents are on the client, they should be accessible no matter what happens. If the user restarts the program, they should still be able to get instant access to folders that they've visited before. That means that those contents should be cached in someplace other than memory.</p>
<p>But wait! The user isn't seeing an up-to-date picture of the data! That's OK. It's fresh enough for the user to move forward toward his goal. Just refresh the data (in the background) when it gets too old. And give the user a manual refresh button if they don't see what they are looking for. Your user is smart. Just keep the speed bumps out of his way.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a>,  <a href="indexd65e.html?cat=8" title="View all posts in User Interface" rel="category">User Interface</a> |   <a href="index3440.html?p=176#respond" title="Comment on The Right Time to Update">No Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-175"><a href="indexa09e.html?p=175" rel="bookmark" title="Permanent Link to Definitive behavior patterns">Definitive behavior patterns</a></h3>
				<small>Monday, November 19th, 2007</small>

				<div class="entry">
					<p>In a <a href="http://www.adventuresinsoftware.com/blog/?p=171">previous post</a>, I described definitive behavior as something that doesn't change during the life of the object. This describes what definitive behavior is, but not how you would use it. Some of the ways to use definitive behavior are:</p>
<ul>
<li>Immutable data types</li>
<li>Extenders</li>
<li>Views</li>
</ul>
<p><strong>Immutable data types</strong>    <br />Objects in any OO language have properties that can change (dynamic behavior). When you can create an object and pass it into a method, that method can modify the state of the object. The caller might experience different behavior from the object after the method call than before. This is usually desirable, but sometimes it is not.</p>
<p>When it comes to fundamental data types, you don't want dynamic behavior. You don't want the method that you call to change your string or integer variables. In Java, C#, and VB (among others), these data types are immutable.</p>
<p>When you define your own data type, consider whether it will be used as a fundamental value. A complex number, for example, falls into this category. When you add two complex numbers, you want to return a new instance which holds the sum of their real and imaginary parts, respectively. You don't want to modify one of the addends, you want to return the sum.</p>
<p>The alternative to a value is an object with identity. Any number 3 is just the same as any other number 3. They are indistinguishable. But objects that have identity are unique, regardless of any defining characteristic.</p>
<p>Consider a person. You might define a PersonName class that has a first, middle, and last name. You might then define a Person class that has a PersonName property. A Person has identity irrespective of name. Two entirely different people can have the same name. And a person can change his or her name, but that does not change their identity. So while the PersonName class should be immutable, the Person class can change its name by creating a whole new instance of PersonName.</p>
<p><strong>Extenders</strong>    <br />How do you add properties to an existing object? One way is to declare a derived class, but then you have to create the object as an instance of that derived class. What if someone else has created the object, and they know nothing of your class?</p>
<p>A great way to do this is to define an extender class. This adds properties to an existing class through aggregation, not inheritance. The extender references the existing object and defines additional properties.</p>
<p><a href="http://www.javaworld.com/javaworld/jw-08-2001/jw-0817-automatic.html">One example</a> that I created long ago is a location model that extends network objects with their locations on a diagram. Routers, servers, and hubs have identity all their own. They know their IP addresses, their routing tables, and their connections to one another. But they know nothing about their representation on a two-dimensional network diagram. To add a point to a Server object, create a new LocatedServer object, having the reference of the Server and a point.</p>
<p>The properties that an extender adds to an object are dynamic. The user can drag the server around the network diagram. But the reference that the extender has to the object it extends is definitive. If you want to add a point to another server, you have to create a new extender for it.</p>
<p><strong>Views</strong>    <br />At some point, we want to present our objects to the user. It's best to separate the user interface from the business objects that it represents. Business objects should not know how to paint themselves. This gives you some flexibility in how you present your objects. The same objects can be presented in different ways within different contexts.</p>
<p>But the user interface is itself made up of objects, too. We have forms with text boxes, radio buttons, lists, etc. These are not business objects, so it's OK that they know how to paint themselves.</p>
<p>For the user interface objects to behave correctly, they need to know about the business objects that they represent. The user interface is simply a view into the business objects. The reference that a user interface has to a business object should be definitive. A form is created to edit just one object, and cannot be switched to another.</p>
<p>Some forms have navigators. You can hit a button to advance to the next record. In this case, the form is really tied to the collection of objects, not just the one. The reference to that collection is definitive; the current position within the collection is dynamic.</p>
<p>These are just three of the most common uses for definitive behavior. Other patterns exist, but most of your definitive behavior can be categorized as one of these. Be on the look-out for ways in which these appear in your code.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a>,  <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="indexa09e.html?p=175#comments" title="Comment on Definitive behavior patterns">1 Comment &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-174"><a href="index0325.html?p=174" rel="bookmark" title="Permanent Link to AiS 37: .NET Generics">AiS 37: .NET Generics</a></h3>
				<small>Sunday, November 11th, 2007</small>

				<div class="entry">
					<p><a href="http://media.libsyn.com/media/ais/AiS37.mp3">Listen Now</a></p>
<p>I recently had the opportunity to speak at the <a href="http://ddnug.net/">Dallas .NET Users Group</a>. My talk was entitled .NET Generics: more than just containers. You can find slides and code at the <a href="../generics/index.html">topic site</a>.</p>
<p>We had a lot of people in attendance, and many great comments afterward. I was particularly impressed with the diversity of experience represented by the people who wanted to talk after the presentation. I spoke with people completely unfamiliar with generics, as well as some who have already been using the techniques presented.</p>
<p>What most impressed me, though, is that all of these people, regardless of experience level, found something to take away from the discussion. The beginners will be opening angle brackets for the first time for something other than HTML. And the experts will be experimenting with composite algorithms.</p>
<p>It just goes to show that no matter how much we know, there's always more to learn. Enjoy the adventure.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a>,  <a href="indexb5e7.html?cat=15" title="View all posts in Shows" rel="category">Shows</a> |   <a href="index0325.html?p=174#comments" title="Comment on AiS 37: .NET Generics">1 Comment &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-173"><a href="indexec4a.html?p=173" rel="bookmark" title="Permanent Link to .NET Generics">.NET Generics</a></h3>
				<small>Wednesday, November 7th, 2007</small>

				<div class="entry">
					<p>I've just launched a topic site for my upcoming <a href="../generics/index.html">.NET Generics</a> presentation. I'll post audio and video when it's recorded, but you can get a preview of the slides and material.</p>
<p>If you are in Texas, please come to tomorrow's presentation at the <a href="http://ddnug.org/">Dallas .NET Users Group</a>. It's at the Microsoft campus in Las Colinas, on November 8 at 6:30.</p>
<p>Generics are a powerful mechanism for code reuse. Most .NET developers have used generic collections, but few have used the language feature to its fullest potential. Generics let us declaratively build algorithms out of smaller components.</p>
<p>I'll present the syntax and some basic patters in both VB.NET and C#. All of the examples are based on practical scenarios. Complete source code is available in both languages.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index8e7f.html?cat=19" title="View all posts in C#" rel="category">C#</a>,  <a href="index6c5d.html?cat=18" title="View all posts in Fun" rel="category">Fun</a>,  <a href="indexb5e7.html?cat=15" title="View all posts in Shows" rel="category">Shows</a> |   <a href="indexec4a.html?p=173#comments" title="Comment on .NET Generics">1 Comment &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-172"><a href="indexf4d1.html?p=172" rel="bookmark" title="Permanent Link to Effective Dates: an example of degrees of freedom">Effective Dates: an example of degrees of freedom</a></h3>
				<small>Friday, November 2nd, 2007</small>

				<div class="entry">
					<p>I'm working on a bug in a billing system that underscores the importance of degrees of freedom. The problem is in the effective date calculation.</p>
<p>Prices are effective during a range of dates. The pricing table stores the beginning and end of each range. A query selects prices where the date of business is greater than or equal to the start date, and less than the end date.</p>
<p>The bug is that pricing edits can leave the pricing table in an invalid state. Moving a start date of one range affects the end date of the previous range. If the start date moves earlier or later, the ranges have to switch places. The logic to keep this in sync is complex and fraught with bugs. And the last date range needs to have an open end date, which gets fixed only when a new price is added for a later date.</p>
<p><strong>Here's my solution</strong><br />
The number of unknowns in the system is 2n, a start and end date for each price. Each of these unknowns is being stored directly.</p>
<p>Each adjacent pair of ranges imposes one rule: that the end date of the previous is equal to the start date of the next. That's n-1 adjacent pairs, for n-1 equations.</p>
<p>Then there's one more rule which states that the final range has an open end date. This brings the total number of equations to n-1+1 = n.</p>
<p>The number of degrees of freedom is unknowns minus equations, or 2n-n = n. There is one degree of freedom per price. Therefore, we should only be storing one date for each price, and calculate the other.</p>
<p>This is just another way of getting to a solution that many of you have already jumped to. Only store the start date of each price. This lets us dump all of the complex update code that keeps the end date in sync.</p>
<p>To make this work, we had to change the query that uses end date. The new query selects all prices where the start date is on or before the date of business. Then it orders those prices by decreasing start date and decreasing create date. Finally, it selects only the top 1. This chooses the effective price that has not been superceded by a more recently effective price. In the case of a tie, this favors the price that was created later.</p>
<p>Bringing the storage in line with the degrees of freedom reduces the amount of business logic. Eliminating storage and logic can only eliminate bugs.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="indexf4d1.html?p=172#respond" title="Comment on Effective Dates: an example of degrees of freedom">No Comments &#187;</a></p>

			</div>

		
		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"></div>
		</div>

	
	</div>
		</td>
	</tr>
</table>

<hr />
<div id="footer">
<!-- If you'd like to support WordPress, having the "powered by" link someone on your blog is the best way, it's our only promotion or advertising. -->
	<p>
		Adventures in Software is proudly powered by 
		<a href="http://wordpress.org/">WordPress</a>
		<br /><a href="indexd784.html?feed=rss2">Entries (RSS)</a>
		and <a href="indexa6da.html?feed=comments-rss2">Comments (RSS)</a>.
		<!-- 17 queries. 0.291 seconds. -->
	</p>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-389401-3");
pageTracker._trackPageview();
} catch(err) {}</script></div>

<!-- Gorgeous design by Michael Heilemann - http://binarybonsai.com/kubrick/ -->

		<div id="sk2-footer" style="color:#FFF; background-color:#444; padding: 3px 2px 3px 2px; border-top: #888 solid 1px;">This blog is protected by <a href="http://unknowngenius.com/blog/" title="Dave">dr Dave</a>'s <strong><a href="http://unknowngenius.com/blog/wordpress/spam-karma/" title="SK2">Spam Karma 2</a></strong>: <strong>274531</strong>  Spams eaten and counting...</div><script type="text/javascript" src="replies.js"></script>
<script type="text/javascript" src="blogger.js"></script>
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/michaellperry.json?callback=twitterCallback2&amp;count=5"></script>
<script type="text/javascript" src="http://search.twitter.com/search.json?q=@michaellperry&amp;callback=twitterCallbackReplies&amp;rpp=5"></script>
</body>

<!-- Mirrored from adventuresinsoftware.com/blog/?m=200711 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 12:50:16 GMT -->
</html>
