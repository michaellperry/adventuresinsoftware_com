<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">


<!-- Mirrored from adventuresinsoftware.com/blog/?m=200609 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 12:52:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Adventures in Software   &raquo; 2006&raquo; September</title>

<meta name="generator" content="WordPress 2.3.3" /> <!-- leave this for stats -->

<link rel="stylesheet" href="wp-content/themes/ais2/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Adventures in Software RSS Feed" href="indexd784.html?feed=rss2" />
<link rel="pingback" href="xmlrpc.html" />
    <script type="text/javascript">
        function onSilverlightError(sender, args) {
            var appSource = "";
            if (sender != null && sender != 0) {
              appSource = sender.getHost().Source;
            }
            
            var errorType = args.ErrorType;
            var iErrorCode = args.ErrorCode;

            if (errorType == "ImageError" || errorType == "MediaError") {
              return;
            }

            var errMsg = "Unhandled Error in Silverlight Application " +  appSource + "\n" ;

            errMsg += "Code: "+ iErrorCode + "    \n";
            errMsg += "Category: " + errorType + "       \n";
            errMsg += "Message: " + args.ErrorMessage + "     \n";

            if (errorType == "ParserError") {
                errMsg += "File: " + args.xamlFile + "     \n";
                errMsg += "Line: " + args.lineNumber + "     \n";
                errMsg += "Position: " + args.charPosition + "     \n";
            }
            else if (errorType == "RuntimeError") {           
                if (args.lineNumber != 0) {
                    errMsg += "Line: " + args.lineNumber + "     \n";
                    errMsg += "Position: " +  args.charPosition + "     \n";
                }
                errMsg += "MethodName: " + args.methodName + "     \n";
            }

            throw new Error(errMsg);
        }
    </script>

	<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc0db0.php?rsd" />
 <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml" /> <style type='text/css'>
<!--#header { background: url('wp-content/themes/ais2/images/header-imgae03.html?upper=A7A73F&amp;lower=77773F') no-repeat bottom center; }
--></style>
</head>
<body>
<div id="page">

<div class="aisTopBar">
	<form method="get" id="searchform" action="http://adventuresinsoftware.com/blog/">
<div>
<a href="indexd784.html?feed=rss2"><img src="../images/feed-icon-28x28.png" border="0"></a>
<input type="text" value="" name="s" id="s" />
<input type="submit" id="searchsubmit" value="Search" />
</div>
</form>
</div>

<div class="aisHeaderImageRight">
	<div class="aisHeaderImage">
	<div class="aisHeaderCornerRight">
	<div class="aisHeaderCornerLeft">
	<div class="aisImageBar">
	<div class="aisSubSites">
		<a href="index.html" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			home</span></span></span></a>
		<a class="aisSubSiteLink" href="indexb60a.html?cat=27"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			historic modeling</span></span></span></a>
		<a class="aisSubSiteLink" href="indexa88f.html?cat=36"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			update controls</span></span></span></a>
		<a href="index2d79.html?cat=26" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			degrees of freedom</span></span></span></a>
		<a class="aisSubSiteLink" href="indexba53.html?page_id=2"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			about us</span></span></span></a>

	</div>
	</div>
	</div>
	</div>
	</div>
</div>

<table style="width: 100%" cellspacing="0" cellpadding="0">
	<tr valign="top">
		<td width="210px">
<div id="sidebar">
<div class="aisLeftColumnFill">
<div class="aisLeftColumnBottom">
<div class="aisLeftColumnTop">
<div id="twitter_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Updates</h2>
<ul id="twitter_update_list"></ul>
<a href="http://twitter.com/michaellperry" id="follow">Follow me</a>
</div>
<div id="twitter_reply_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Replies</h2>
<ul id="twitter_reply_list"></ul>
</div>

<div class="aisLeftNav">
<a href='http://ineta.org/Speakers/SearchCommunitySpeakers.aspx?SpeakerId=c5110e21-9243-461b-a464-a6548524e885'><img alt='INETA Community Speakers Program' border='0' src='../../www.ineta.org/images/OfficialLogos/InetaCommunitySpeakersRequestMe.html' /></a>
</div>

<div class="aisLeftNav">
	<li class="pagenav"><h2>Pages</h2><ul><li class="page_item page-item-2"><a href="indexba53.html?page_id=2" title="About Us">About Us</a></li>
<li class="page_item page-item-210"><a href="index6ae3.html?page_id=210" title="Templates">Templates</a></li>
</ul></li></div>

<div class="aisLeftNav">
<h2>Archives</h2>
<ul>
	<li><a href='indexb4d5.html?m=201110' title='October 2011'>October 2011</a></li>
	<li><a href='indexc61a.html?m=201106' title='June 2011'>June 2011</a></li>
	<li><a href='indexa80d.html?m=201105' title='May 2011'>May 2011</a></li>
	<li><a href='index512b.html?m=201104' title='April 2011'>April 2011</a></li>
	<li><a href='index08fb.html?m=201103' title='March 2011'>March 2011</a></li>
	<li><a href='index52f4.html?m=201102' title='February 2011'>February 2011</a></li>
	<li><a href='index74f1.html?m=201101' title='January 2011'>January 2011</a></li>
	<li><a href='index8956.html?m=201012' title='December 2010'>December 2010</a></li>
	<li><a href='indexa1aa.html?m=201011' title='November 2010'>November 2010</a></li>
	<li><a href='indexe3d5.html?m=201010' title='October 2010'>October 2010</a></li>
	<li><a href='index9ab9.html?m=201009' title='September 2010'>September 2010</a></li>
	<li><a href='index1ff0.html?m=201008' title='August 2010'>August 2010</a></li>
	<li><a href='index9f11.html?m=201007' title='July 2010'>July 2010</a></li>
	<li><a href='index31f0.html?m=201006' title='June 2010'>June 2010</a></li>
	<li><a href='indexd189.html?m=201005' title='May 2010'>May 2010</a></li>
	<li><a href='indexb5c0.html?m=201004' title='April 2010'>April 2010</a></li>
	<li><a href='indexf258.html?m=201003' title='March 2010'>March 2010</a></li>
	<li><a href='index6e30.html?m=201002' title='February 2010'>February 2010</a></li>
	<li><a href='index6b19.html?m=201001' title='January 2010'>January 2010</a></li>
	<li><a href='index5c0a.html?m=200912' title='December 2009'>December 2009</a></li>
	<li><a href='index8f62.html?m=200911' title='November 2009'>November 2009</a></li>
	<li><a href='index451d.html?m=200910' title='October 2009'>October 2009</a></li>
	<li><a href='index3e04.html?m=200909' title='September 2009'>September 2009</a></li>
	<li><a href='index425a.html?m=200908' title='August 2009'>August 2009</a></li>
	<li><a href='index9907.html?m=200907' title='July 2009'>July 2009</a></li>
	<li><a href='index3104.html?m=200906' title='June 2009'>June 2009</a></li>
	<li><a href='indexc36d.html?m=200905' title='May 2009'>May 2009</a></li>
	<li><a href='index17e8.html?m=200904' title='April 2009'>April 2009</a></li>
	<li><a href='index10a5.html?m=200903' title='March 2009'>March 2009</a></li>
	<li><a href='index8988.html?m=200902' title='February 2009'>February 2009</a></li>
	<li><a href='index1419.html?m=200901' title='January 2009'>January 2009</a></li>
	<li><a href='index7866.html?m=200812' title='December 2008'>December 2008</a></li>
	<li><a href='index55f6.html?m=200811' title='November 2008'>November 2008</a></li>
	<li><a href='indexa7bc.html?m=200810' title='October 2008'>October 2008</a></li>
	<li><a href='indexe77c.html?m=200809' title='September 2008'>September 2008</a></li>
	<li><a href='indexcffc.html?m=200808' title='August 2008'>August 2008</a></li>
	<li><a href='index0e62.html?m=200807' title='July 2008'>July 2008</a></li>
	<li><a href='indexfda7.html?m=200806' title='June 2008'>June 2008</a></li>
	<li><a href='index7d64.html?m=200805' title='May 2008'>May 2008</a></li>
	<li><a href='index94dd.html?m=200804' title='April 2008'>April 2008</a></li>
	<li><a href='index9631.html?m=200803' title='March 2008'>March 2008</a></li>
	<li><a href='indexdd52.html?m=200802' title='February 2008'>February 2008</a></li>
	<li><a href='index21ee.html?m=200801' title='January 2008'>January 2008</a></li>
	<li><a href='index363c.html?m=200712' title='December 2007'>December 2007</a></li>
	<li><a href='index7493.html?m=200711' title='November 2007'>November 2007</a></li>
	<li><a href='index93a7.html?m=200710' title='October 2007'>October 2007</a></li>
	<li><a href='index4ca8.html?m=200709' title='September 2007'>September 2007</a></li>
	<li><a href='index6124.html?m=200708' title='August 2007'>August 2007</a></li>
	<li><a href='index6013.html?m=200707' title='July 2007'>July 2007</a></li>
	<li><a href='index2ab6.html?m=200706' title='June 2007'>June 2007</a></li>
	<li><a href='index44f0.html?m=200705' title='May 2007'>May 2007</a></li>
	<li><a href='indexf0b4.html?m=200704' title='April 2007'>April 2007</a></li>
	<li><a href='index481d.html?m=200703' title='March 2007'>March 2007</a></li>
	<li><a href='indexcbea.html?m=200702' title='February 2007'>February 2007</a></li>
	<li><a href='index9cdc.html?m=200701' title='January 2007'>January 2007</a></li>
	<li><a href='index3ea4.html?m=200612' title='December 2006'>December 2006</a></li>
	<li><a href='index67ca.html?m=200611' title='November 2006'>November 2006</a></li>
	<li><a href='indexff49.html?m=200610' title='October 2006'>October 2006</a></li>
	<li><a href='index611c.html?m=200609' title='September 2006'>September 2006</a></li>
	<li><a href='index9a21.html?m=200608' title='August 2006'>August 2006</a></li>
	<li><a href='index3ee9.html?m=200607' title='July 2006'>July 2006</a></li>
	<li><a href='indexe13a.html?m=200606' title='June 2006'>June 2006</a></li>
</ul>
</div>

<div class="aisLeftNav">
	</div>

<div class="aisLeftNav">
<h2>Books</h2>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0764526413&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I5" id="I5"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0201633612&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I6" id="I6"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0136291554&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I7" id="I7"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=1888009195&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I8" id="I8"></iframe>
</div>
<div class="aisLeftNav">
<h2>Meta</h2>
<ul>
		<li><a href="wp-login.html">Login</a></li>
	<li><a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional">Valid <abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a></li>
	<li><a href="http://gmpg.org/xfn/"><abbr title="XHTML Friends Network">XFN</abbr></a></li>
	<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress</a></li>
	</ul>
</div>
<div class="aisLeftContent">
<h2>Community</h2>
<ul>
	<script type="text/javascript" src="../../localhost/embed/92q2bbma.js"></script>
</ul>
</div>

</div></div></div>
</div>		</td>
		<td>

	<div id="content" class="narrowcolumn">

		
		 		<h2 class="pagetitle">Archive for September, 2006</h2>

		

		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"></div>
		</div>

				<div class="post">
				<h3 id="post-35"><a href="index5c90.html?p=35" rel="bookmark" title="Permanent Link to Separation of Concerns in Ant">Separation of Concerns in Ant</a></h3>
				<small>Monday, September 25th, 2006</small>

				<div class="entry">
					<p>In a <a href="http://www.adventuresinsoftware.com/blog/?p=28">previous post</a>, I wrote about separation of concerns in various software tools. One of these was Ant. Since that time, I have come up with a solution to the problem.</p>
<p>To recap, the problem is that an Ant script defines two perpendicular dimensions of a build: actions and projects. Actions depend upon other actions, and projects on other projects. The work occurs at the intersections of these two dimensions, where an action is applied to a project.</p>
<p><strong>Here's my solution</strong><br />
The first step is to completely parameterize the actions so that they can be applied to any project. The locations of source files, the names of target jar files, and the classpath can all be specified as properties. Create a separate "actions.xml" file for these targets. The actions do not depend upon one another. These dependencies will be handled at a higher level. For example:</p>
<pre> &lt;property prefix="project" file="${home}/project.properties" /&gt;  &lt;!-- Get the source files. --&gt;
 &lt;target name="get"&gt;
  &lt;!-- Set Defaults --&gt;
  &lt;property name="branch" value="trunk" /&gt;
  &lt;property name="revision" value="HEAD" /&gt;
  &lt;svn username="${username}" password="${password}"&gt;
   &lt;checkout url="https://svn.mallardsoft.com/svn/productline/${branch}/${project}/" revision="${revision}" destPath="${temp}" /&gt;
  &lt;/svn&gt;
 &lt;/target&gt;

 &lt;!-- Compile the java sources. --&gt;
 &lt;target name="compile"&gt;
  &lt;javac srcdir="${src}" destdir="${classes}" debug="${debug}"&gt;
   &lt;classpath&gt;
    &lt;pathelement path="${project.libs}" /&gt;
    &lt;pathelement path="${project.depends}" /&gt;
   &lt;/classpath&gt;
   &lt;include name="**/*.java" /&gt;
  &lt;/javac&gt;
 &lt;/target&gt;

 &lt;!-- Jar the classes. --&gt;
 &lt;target name="jar"&gt;
  &lt;jar destfile="${dist}/${project.jar}.jar"&gt;
   &lt;fileset dir="${classes}" /&gt;
   &lt;fileset dir="${src}"&gt;
       &lt;exclude name="**/*.java"/&gt;
   &lt;/fileset&gt;
  &lt;/jar&gt;
 &lt;/target&gt;</pre>
<p>The second step is to create a properties file for each project. Paths are specified as colon-separated lists. I've already loaded two additional properties files that specify the locations of library and project jar files:</p>
<pre>jar=business_layer
libs=${lib.logging-log4j}:${lib.xerces}
depends=${proj.database_layer}</pre>
<p>The third step is to create a target for each project in your regular "build.xml" file. The target sets the "project" property and calls a target in "actions.xml":</p>
<pre> &lt;target name="database_layer"&gt;
  &lt;ant antfile="actions.xml" target="${target}"&gt;
   &lt;property name="project" value="database_layer" /&gt;
  &lt;/ant&gt;
 &lt;/target&gt;

 &lt;target name="business_layer" depends="database_layer"&gt;
  &lt;ant antfile="actions.xml" target="${target}"&gt;
   &lt;property name="project" value="business_layer" /&gt;
  &lt;/ant&gt;
 &lt;/target&gt;

 &lt;target name="web_interface" depends="business_layer"&gt;
  &lt;ant antfile="actions.xml" target="${target}"&gt;
   &lt;property name="project" value="web_interface" /&gt;
  &lt;/ant&gt;
 &lt;/target&gt;

 &lt;target name="swing_interface" depends="business_layer"&gt;
  &lt;ant antfile="actions.xml" target="${target}"&gt;
   &lt;property name="project" value="swing_interface" /&gt;
  &lt;/ant&gt;
 &lt;/target&gt;

 &lt;!-- Invoke the same target in all projects. --&gt;
 &lt;target name="all" depends="web_interface,swing_interface" /&gt;</pre>
<p>The fourth step is to define targets in build.xml that invoke the same action on all projects. These targets specify the dependencies among actions"</p>
<pre> &lt;!-- Get all projects. --&gt;
 &lt;target name="get"&gt;
  &lt;antcall target="all"&gt;
   &lt;param name="target" value="get" /&gt;
  &lt;/antcall&gt;
 &lt;/target&gt;

 &lt;!-- Compile all projects. --&gt;
 &lt;target name="compile" depends="get"&gt;
  &lt;antcall target="all"&gt;
   &lt;param name="target" value="compile" /&gt;
  &lt;/antcall&gt;
 &lt;/target&gt;

 &lt;!-- Jar all projects. --&gt;
 &lt;target name="jar" depends="compile"&gt;
  &lt;antcall target="all"&gt;
   &lt;param name="target" value="jar" /&gt;
  &lt;/antcall&gt;
 &lt;/target&gt;</pre>
<p>The designers of Ant probably never intended their tool to be used in this way, but it separates the actions from the projects. Now I can tweak an action for all projects in one place. Or I can add new projects and get all actions applied to it.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexfa64.html?cat=24" title="View all posts in Ant" rel="category">Ant</a>,  <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a> |   <a href="index5c90.html?p=35#comments" title="Comment on Separation of Concerns in Ant">1 Comment &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-34"><a href="index1e7e.html?p=34" rel="bookmark" title="Permanent Link to Professional User Interaction Design">Professional User Interaction Design</a></h3>
				<small>Thursday, September 21st, 2006</small>

				<div class="entry">
					<p>It takes a professional to design good software. As far as system design, I think most people would agree. It takes an experienced programmer or architect to know what is going to work and what isn't.</p>
<p>But when it comes to user interaction design, a surprising number of people think that they can get by without a professional. Many software interfaces are designed by programmers, some by business analysts, and a few by end-users. Most are not designed at all, but just evolve over many iterations of coding and testing.</p>
<p>Alan Cooper has written several books on user interaction design. I highly recommend About Face 2.0, a link to which can be found in the sidebar. He describes user interaction as the whole of a program's behavior from the user's point-of-view. This includes far more than the user interface, which is primarily concerned with how the program looks. So while a visual artist may be a member of a professional user interaction design team, many more disciplines are represented.</p>
<p>User interaction design requires a domain specialist, who understands the problems that the software attempts to solve. This person does not simply bring the existing process to the solution, but evaluates and suggests entirely new solutions to the problem.</p>
<p>User interaction design requires a psychologist who understands how people think. This person ensures that the user's perception of the software is compatible with the way the software solves the problem.</p>
<p>User interaction design requires an ergonomics engineer. This person makes sure that the user is comfortable while using the product. He or she evaluates the user's special needs, such as the environment in which they will be working.</p>
<p>User interaction design also requires someone with experience specifically in software. This person is not a programmer, but rather someone who considers software from the user's perspective. They are abreast of current standards and capabilities, but they can also innovate beyond the norm.</p>
<p>Alan Cooper articulates much clearer than I can the problem with relying upon the wrong people to design software. Check out this <a href="http://channel9.msdn.com/ShowPost.aspx?PostID=177721">video on Channel 9</a>.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexd65e.html?cat=8" title="View all posts in User Interface" rel="category">User Interface</a> |   <a href="index1e7e.html?p=34#respond" title="Comment on Professional User Interaction Design">No Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-33"><a href="indexdd23.html?p=33" rel="bookmark" title="Permanent Link to Definitive Behavior">Definitive Behavior</a></h3>
				<small>Monday, September 18th, 2006</small>

				<div class="entry">
					<p>A constructor is often said to initialize an object. But in my experience I have found that constructors are much more than that. They are the first method to be called in an object's lifetime, and you can call only one. So these special methods have earned more respect than to be treated as mere initializers.</p>
<p>The word "initializer" implies that the method sets the initial value of member variables. It is assumed that these variables can change their values at any time. But if a constructor is an initializer, then it is merely a convenience. There is no difference, say, between these two pieces of code:</p>
<pre>Person person = new Person("Michael", "Perry);</pre>
<p>or</p>
<pre>Person person = new Person();
person.FirstName = "Michael";
person.LastName = "Perry";</pre>
<p>If there are two ways of expressing the same idea, then the object's interface is bloated (see <a href="indexc7e3.html?p=31">Necessary and Sufficient</a>). The constructor should only set a value only if it can be set in no other way. It's parameters should be those things that do not change over the course of an object's lifetime.</p>
<p>I have found that objects have three types of behavior. The kind that we are most familiar with is dynamic behavior: things that can be changed. A member variable represents dynamic behavior because I can change its value (and therefore the behavior of the object) at any time. The FirstName and LastName properties of the Person class in the above example are dynamic.</p>
<p>The second kind is dependent behavior: things that depend upon other things. Dependent behavior is usually manifested as read-only member functions. They don't change the object; they calculate some value based on the state that the object already has. We might add a read-only FullName property to the Person class that concatenates the first and last names.</p>
<p>The third kind is definitive behavior: things that don't change during an object's lifetime. An object is constructed with this behavior, and it will keep it until it is destroyed. These behaviors are represented as constructor parameters, and often as read-only properties ("getters"). If they are values, they are usually identifying attributes, such as database keys or IDs. But quite often they are references to objects of larger scope, such as a business object for a UI component, or a storage provider for a message queue.</p>
<p>The best practice I've found is to avoid overloaded constructors. Reserve the one and only constructor for definitive behavior. This clearly documents to the users of the class that you have only one chance to set these values. You can only call one constructor. Use it wisely.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a> |   <a href="indexdd23.html?p=33#respond" title="Comment on Definitive Behavior">No Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-32"><a href="index6c46.html?p=32" rel="bookmark" title="Permanent Link to This just in&#8230;">This just in&#8230;</a></h3>
				<small>Monday, September 18th, 2006</small>

				<div class="entry">
					<p>Russell Elledge -- coworker first at Radiant and now at Handmark, founder of d20universe.com, Game Master, and good friend -- is the subject of a piece in the Dallas Morning News. Check him out: <a href="http://www.dallasnews.com/sharedcontent/dws/classifieds/news/jobcenter/infotech/stories/DN-t1systemsdesign_10emp.ART.State.Edition1.3f63039.html">System Designers Won't Go Hungry.</a></p>
				</div>

				<p class="postmetadata">Posted in <a href="index6c5d.html?cat=18" title="View all posts in Fun" rel="category">Fun</a>,  <a href="indexb31a.html?cat=1" title="View all posts in Uncategorized" rel="category">Uncategorized</a> |   <a href="index6c46.html?p=32#respond" title="Comment on This just in&#8230;">No Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-31"><a href="indexc7e3.html?p=31" rel="bookmark" title="Permanent Link to Necessary and Sufficient">Necessary and Sufficient</a></h3>
				<small>Thursday, September 14th, 2006</small>

				<div class="entry">
					<p>A good interface contains only the methods that it needs. The interface has enough methods to accomplish its task: the set methods is sufficient. In addition, the interface does not have any methods that it doesn't need: the set of methods is necessary. If you find that an interface has unnecessary methods, you should remove them. And if you find that it is insufficient, you must add to it.</p>
<p>A good contract is also both necessary and sufficient. A contract is more than the set of methods (the interface) that a type supports. It is also the constraints: preconditions, postconditions, and invariants. If it has unnecessary constraints, then there are otherwise valid situations that violate the contract. If it has insufficient constraints, then the contract allows some invalid situations.</p>
<p>A good unit test suite is also both necessary and sufficient. If it has unnecessary tests, then it is harder to maintain than it could be. If it has insufficient tests, then it won't detect all defects.</p>
<p>The balance of necessity and sufficiency is found all throughout mathematics. Software, being a form of applied mathematics, inherits this trait. Something that achieves this balance is beautiful to behold.</p>
<p>Two examples of this balance in literature can be found in my recommended book links. Euclid's Elements is the foundation for modern mathematics. He provides a small number of axioms, and from those he derives a large number of theorems. The axioms are necessary and sufficient to describe all of geometry. Bertrand Meyer's Object-Oriented Software Construction contains example after example of necessity and sufficiency in software contracts. Pay close attention to his Stack type.</p>
<p>Examples of software that do not achieve this balance are abundant. Many parts of the JDK have "convenience methods", which by definition are unnecessary. The SOAP specification is an insufficient contract, which leads to many interoperability problems.</p>
<p>Achieving this balance takes time. Only with experience can we hope to get there. It's something I strive for every day.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index1cd2.html?cat=10" title="View all posts in Contracts" rel="category">Contracts</a>,  <a href="index3f7b.html?cat=2" title="View all posts in Unit testing" rel="category">Unit testing</a>,  <a href="index2d79.html?cat=26" title="View all posts in dof" rel="category">dof</a> |   <a href="indexc7e3.html?p=31#comments" title="Comment on Necessary and Sufficient">3 Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-30"><a href="index5643.html?p=30" rel="bookmark" title="Permanent Link to Access Win32 from .NET">Access Win32 from .NET</a></h3>
				<small>Monday, September 11th, 2006</small>

				<div class="entry">
					<p>Back when C# was in technology preview, I wrote <a title="C#, the Natrural Progression" href="http://www.javaworld.com/javaworld/jw-08-2000/jw-0804-itw-csharp.html">a paper</a> analyzing the reasons for its existance. In this paper, I made note of the fact that C# can access the Win32 API directly. In the years since, I have occasionally needed to fall back on this feature. Unfortunately, it has not been easy to come up with exactly the right DllImport statements to make that happen.</p>
<p>That all changed when I found the <a href="http://custom.programming-in.net/">Windows API reference for C#, VB.NET, and VB6</a>. Just go to this site, search for an API, and copy the code into your project. No more guess work. I wish Microsoft would have collected all of this information in one place (such as MSDN). But this is a simple, nearly complete, no-frills reference.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index0b40.html?cat=9" title="View all posts in Tools" rel="category">Tools</a> |   <a href="index5643.html?p=30#respond" title="Comment on Access Win32 from .NET">No Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-29"><a href="index9cd7.html?p=29" rel="bookmark" title="Permanent Link to Dependency Analysis">Dependency Analysis</a></h3>
				<small>Saturday, September 9th, 2006</small>

				<div class="entry">
					<p>If you are doing any serious Java development, especially if you are using third-party libraries, you will want to keep track of your dependencies. Not only does a successful deployment requires all components, but interdependencies help determine the maintainability of a system.</p>
<p>Java jar files are not as strict as other deployment methods, such as DLLs. A jar file will load even if one of its dependents is not in the class path. An exception will only be thrown at run time when and if a jar accesses another that is not available. Without good dependency analysis, you will have to test every feature to ensure that you haven't missed one.</p>
<p>In addition to ensuring a smooth deployment, dependency analysis can identify parts of the system that are resiliant to change. Components that others depend upon cannot be easily changed, while those that no others depend upon can be modified. Robert Martin, one of my favorite authors, describes this phenomenon better than I can in <a href="http://www.objectmentor.com/resources/articles/oodmetrc.pdf">OO Design Quality Metrics</a>.</p>
<p>Kirk Knoernschild has created <a href="http://www.kirkk.com/main/Main/JarAnalyzer">JarAnalyzer</a> to discover dependencies among jar files. Not only does it help you to ensure that you package all prerequisite components, but it also uses dependency to calculate metrics according to Robert Martin's methods. I have incorporated this tool into the build process at Handmark as one more measure of quality.</p>
<p>One caveat. Dependency analysis tools cannot easily discover relationships through reflection. A common pattern for loading a class is:</p>
<pre>Class.forName("com.adventuresinsoftware.example.MyClass");</pre>
<p>This runs the static initializer for the class. But since the class name is in a string, anayslis tools cannot trace it. I use this pattern instead:</p>
<pre>com.adventuresinsoftware.example.MyClass.class.getName();</pre>
<p>It has the same effect, it is tracable, and as an added bonus you get compile-time validation and intellisense.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index0b40.html?cat=9" title="View all posts in Tools" rel="category">Tools</a> |   <a href="index9cd7.html?p=29#comments" title="Comment on Dependency Analysis">1 Comment &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-28"><a href="index3c55.html?p=28" rel="bookmark" title="Permanent Link to Separate Concerns">Separate Concerns</a></h3>
				<small>Thursday, September 7th, 2006</small>

				<div class="entry">
					<p>A spreadsheet contains both formulas and the data on which they operate. This makes it difficult to share formulas with someone else without sharing the data. If you want the same calculations performed on a different set of data, you have to make a copy of the spreadsheet. If you later need to update the calculations, you have to make the change in both places.</p>
<p>A Visual Source Safe database contains one tree of folders. A folder can represent a project, a package, a branch, or a shared library. Through discipline, programmers keep these different degrees of freedom on different levels of the tree. We will create a folder under a project to represent the trunk, and another to represent a branch. But what about branches of the shared libraries? Where do they go? Sometimes it is not easy to place one concern neatly below another.</p>
<p>An Ant build script contains several targets. A target can represent an action (clean, compile, deploy, etc.), or it can represent a project (shared library, business logic, web application, etc.). Targets depend upon other targets: deploy depends upon compile, and the web application depends upon the business logic. I need to clean and compile each of my projects, but only deploy my web applications. The web application deployment should include all dependent projects. When describing this to Ant, I end up with a cartesian product of actions for each project. If I later have to modify an action, I have to do so for every project. Similarly, to add a new project, I have to copy and paste all of the actions from another one.</p>
<p>All three of these scenarios suffer from a coupling of concerns. Different dimensions of the problem should be allowed to vary independently. But when the design of the solution mixes these dimensions, it becomes difficult to pull them apart later. Unfortunately, this sort of design flaw is usually not detected until the system has been in use for some time. Please take the time during the design phase to ask if yourself if you can separate concerns.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexfa64.html?cat=24" title="View all posts in Ant" rel="category">Ant</a>,  <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a>,  <a href="indexaa1e.html?cat=4" title="View all posts in VSS" rel="category">VSS</a> |   <a href="index3c55.html?p=28#comments" title="Comment on Separate Concerns">1 Comment &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-27"><a href="index1c4a.html?p=27" rel="bookmark" title="Permanent Link to The Train-Switch Pattern">The Train-Switch Pattern</a></h3>
				<small>Tuesday, September 5th, 2006</small>

				<div class="entry">
					<p>I've often heard server maintenance compared to changing the tires on a truck going 80 miles an hour. You can't take down the datacenter to install a new build. You have to do it on the fly.</p>
<p>J2EE application servers like JBoss are supposed to be able to do this. However, in my experience, I've never seen it work reliably. We've had to fall back on using the load balancer to divert traffic away from one web server at a time in order to perform the upgrade. This is a costly and difficult chore. And if something goes wrong during the operation, you are without backup.</p>
<p>Since this is such a difficult problem, I've rewitten it -- in the true spirit of mathematics -- into one that is easier.  The computer system is not one big monolith, but many discrete transactions that each have a beginning and an end. No longer are we working on one huge semi, we are working on several small train cars, all hurtling down the same track at incredible speed.</p>
<p>The load balancer solution diverts the traffic without waiting for (or causing) a lull. But the problem with the load balancer solution is that it is performed on the socket boundary. Good socket optimizations -- like pooling, asynchronous communications, and multiplexing -- favor long-lived sockets. This means that the load balancer tends to take a long time to quiet the traffic to one machine. Sockets are also intrisicly hardware-oriented. A socket addresses an IP, which the router maps to a specific NIC. Any socket-based switching solution would place unnecessary constraints on the hardware required to run it. You can't, for example, scale it all the way down to 1 server. What we need is a switch on logical rather than physical boundaries.</p>
<p><strong>Here's my solution</strong><br />
I have started designing into my solutions a train-switch at the transaction boundary. As a request comes in (not a socket, but an individual request), I'll have an infrastructure component parse it and prepare it for the business logic. Then, it will look in a business logic registry to obtain the pointer to the current handler. That request is forwarded to the handler and the infrastructure listends for more requests.</p>
<p>What makes this a train-switch is that the infrastructure also has a background thread waiting for updates. I could detect these updates as new DLLs or JARs in a special folder, but I prefer explicit notification. When the update is available, the infrastructure loads it and gets it ready. Then, in one quick synchronized action, it replaces the pointer in the registry. Now all new requests are directed toward the new version of the business logic.</p>
<p>What happens to the requests already in progress? They continue unharmed. The train-switch is only at the head of the track. Both business logic components can run in parallel. The switch is made while the system is up with absolutely no interruption.</p>
<p>There are a few things that you need to do to make this possible. First, avoid singletons. Singletons are convenient, but you can't have two different versions of a singleton running in parallel. Instead, use dependency-injection. Instead of an object getting the instance of a singleton that it needs, give that object a pointer to its service provider. That way you tell it explicitly which instance it depends upon, and two can run in parallel with no problem.</p>
<p>Second, business components must be self-contained, except at the boundaries. If a business component reaches outside of itself for some dependencies, then you can no longer upgrade those dependencies. There are only two boundadies that the request may cross: the business entry point and the data access layer. Define an interface for the business entry point, and use dependency-injection to give the business logic access to the database connection pool.</p>
<p>Third, you need to have one entry point into the application. You can try to use the train-switch pattern to swap out socket listeners, but then you are back to the problems with the load-balancer solution. The socket boundary is bigger than the problem requires, so you will have old code running longer than is necessary. Also, the listener switch cannot be performed atomically. If you take down the first listener and then put up the second, there is a chance that a socket connection will be refused. If you try the opposite order, you will find the address already in use. The only way to achieve an atomic train-switch is to have one consistent listener that lives outside of the more volitile business logic.<br />
Fourth, define a loose interface for the business logic. Since the listener cannot be replaced, its contract with the business layer cannot be changed. So define a contract that is flexible enough to handle changes to business needs. Property bags work well on this boundary; strict business method or document definitions do not. You should definitely have a strict contract between the client and the server, but the train-switch is not the place to enforce it.</p>
<p>I'm not sure why applciation servers like JBoss fail so miserably at reliable "hot-swapping". The container implements the listener and calls servlets on request -- not socket -- boundaries. And servlets define an extremely flexible interface. Perhaps they have problems with external dependencies. At any rate, I find it best to inject dependencies across interface boundaries and implement the train-switch pattern myself.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb0b7.html?cat=6" title="View all posts in Patterns" rel="category">Patterns</a> |   <a href="index1c4a.html?p=27#comments" title="Comment on The Train-Switch Pattern">2 Comments &#187;</a></p>

			</div>

		
		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"></div>
		</div>

	
	</div>
		</td>
	</tr>
</table>

<hr />
<div id="footer">
<!-- If you'd like to support WordPress, having the "powered by" link someone on your blog is the best way, it's our only promotion or advertising. -->
	<p>
		Adventures in Software is proudly powered by 
		<a href="http://wordpress.org/">WordPress</a>
		<br /><a href="indexd784.html?feed=rss2">Entries (RSS)</a>
		and <a href="indexa6da.html?feed=comments-rss2">Comments (RSS)</a>.
		<!-- 17 queries. 0.367 seconds. -->
	</p>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-389401-3");
pageTracker._trackPageview();
} catch(err) {}</script></div>

<!-- Gorgeous design by Michael Heilemann - http://binarybonsai.com/kubrick/ -->

		<div id="sk2-footer" style="color:#FFF; background-color:#444; padding: 3px 2px 3px 2px; border-top: #888 solid 1px;">This blog is protected by <a href="http://unknowngenius.com/blog/" title="Dave">dr Dave</a>'s <strong><a href="http://unknowngenius.com/blog/wordpress/spam-karma/" title="SK2">Spam Karma 2</a></strong>: <strong>274531</strong>  Spams eaten and counting...</div><script type="text/javascript" src="replies.js"></script>
<script type="text/javascript" src="blogger.js"></script>
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/michaellperry.json?callback=twitterCallback2&amp;count=5"></script>
<script type="text/javascript" src="http://search.twitter.com/search.json?q=@michaellperry&amp;callback=twitterCallbackReplies&amp;rpp=5"></script>
</body>

<!-- Mirrored from adventuresinsoftware.com/blog/?m=200609 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 12:52:10 GMT -->
</html>
