<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">


<!-- Mirrored from adventuresinsoftware.com/blog/?m=201002 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 12:37:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Adventures in Software   &raquo; 2010&raquo; February</title>

<meta name="generator" content="WordPress 2.3.3" /> <!-- leave this for stats -->

<link rel="stylesheet" href="wp-content/themes/ais2/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Adventures in Software RSS Feed" href="indexd784.html?feed=rss2" />
<link rel="pingback" href="xmlrpc.html" />
    <script type="text/javascript">
        function onSilverlightError(sender, args) {
            var appSource = "";
            if (sender != null && sender != 0) {
              appSource = sender.getHost().Source;
            }
            
            var errorType = args.ErrorType;
            var iErrorCode = args.ErrorCode;

            if (errorType == "ImageError" || errorType == "MediaError") {
              return;
            }

            var errMsg = "Unhandled Error in Silverlight Application " +  appSource + "\n" ;

            errMsg += "Code: "+ iErrorCode + "    \n";
            errMsg += "Category: " + errorType + "       \n";
            errMsg += "Message: " + args.ErrorMessage + "     \n";

            if (errorType == "ParserError") {
                errMsg += "File: " + args.xamlFile + "     \n";
                errMsg += "Line: " + args.lineNumber + "     \n";
                errMsg += "Position: " + args.charPosition + "     \n";
            }
            else if (errorType == "RuntimeError") {           
                if (args.lineNumber != 0) {
                    errMsg += "Line: " + args.lineNumber + "     \n";
                    errMsg += "Position: " +  args.charPosition + "     \n";
                }
                errMsg += "MethodName: " + args.methodName + "     \n";
            }

            throw new Error(errMsg);
        }
    </script>

	<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc0db0.php?rsd" />
 <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml" /> <style type='text/css'>
<!--#header { background: url('wp-content/themes/ais2/images/header-imgae03.html?upper=A7A73F&amp;lower=77773F') no-repeat bottom center; }
--></style>
</head>
<body>
<div id="page">

<div class="aisTopBar">
	<form method="get" id="searchform" action="http://adventuresinsoftware.com/blog/">
<div>
<a href="indexd784.html?feed=rss2"><img src="../images/feed-icon-28x28.png" border="0"></a>
<input type="text" value="" name="s" id="s" />
<input type="submit" id="searchsubmit" value="Search" />
</div>
</form>
</div>

<div class="aisHeaderImageRight">
	<div class="aisHeaderImage">
	<div class="aisHeaderCornerRight">
	<div class="aisHeaderCornerLeft">
	<div class="aisImageBar">
	<div class="aisSubSites">
		<a href="index.html" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			home</span></span></span></a>
		<a class="aisSubSiteLink" href="indexb60a.html?cat=27"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			historic modeling</span></span></span></a>
		<a class="aisSubSiteLink" href="indexa88f.html?cat=36"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			update controls</span></span></span></a>
		<a href="index2d79.html?cat=26" class="aisSubSiteLink"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			degrees of freedom</span></span></span></a>
		<a class="aisSubSiteLink" href="indexba53.html?page_id=2"><span class="aisSiteTabRight"><span class="aisSiteTabLeft"><span class="aisSiteTab">
			about us</span></span></span></a>

	</div>
	</div>
	</div>
	</div>
	</div>
</div>

<table style="width: 100%" cellspacing="0" cellpadding="0">
	<tr valign="top">
		<td width="210px">
<div id="sidebar">
<div class="aisLeftColumnFill">
<div class="aisLeftColumnBottom">
<div class="aisLeftColumnTop">
<div id="twitter_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Updates</h2>
<ul id="twitter_update_list"></ul>
<a href="http://twitter.com/michaellperry" id="follow">Follow me</a>
</div>
<div id="twitter_reply_div" class="aisLeftNav">
<h2 class="sidebar-title">Twitter Replies</h2>
<ul id="twitter_reply_list"></ul>
</div>

<div class="aisLeftNav">
<a href='http://ineta.org/Speakers/SearchCommunitySpeakers.aspx?SpeakerId=c5110e21-9243-461b-a464-a6548524e885'><img alt='INETA Community Speakers Program' border='0' src='../../www.ineta.org/images/OfficialLogos/InetaCommunitySpeakersRequestMe.html' /></a>
</div>

<div class="aisLeftNav">
	<li class="pagenav"><h2>Pages</h2><ul><li class="page_item page-item-2"><a href="indexba53.html?page_id=2" title="About Us">About Us</a></li>
<li class="page_item page-item-210"><a href="index6ae3.html?page_id=210" title="Templates">Templates</a></li>
</ul></li></div>

<div class="aisLeftNav">
<h2>Archives</h2>
<ul>
	<li><a href='indexb4d5.html?m=201110' title='October 2011'>October 2011</a></li>
	<li><a href='indexc61a.html?m=201106' title='June 2011'>June 2011</a></li>
	<li><a href='indexa80d.html?m=201105' title='May 2011'>May 2011</a></li>
	<li><a href='index512b.html?m=201104' title='April 2011'>April 2011</a></li>
	<li><a href='index08fb.html?m=201103' title='March 2011'>March 2011</a></li>
	<li><a href='index52f4.html?m=201102' title='February 2011'>February 2011</a></li>
	<li><a href='index74f1.html?m=201101' title='January 2011'>January 2011</a></li>
	<li><a href='index8956.html?m=201012' title='December 2010'>December 2010</a></li>
	<li><a href='indexa1aa.html?m=201011' title='November 2010'>November 2010</a></li>
	<li><a href='indexe3d5.html?m=201010' title='October 2010'>October 2010</a></li>
	<li><a href='index9ab9.html?m=201009' title='September 2010'>September 2010</a></li>
	<li><a href='index1ff0.html?m=201008' title='August 2010'>August 2010</a></li>
	<li><a href='index9f11.html?m=201007' title='July 2010'>July 2010</a></li>
	<li><a href='index31f0.html?m=201006' title='June 2010'>June 2010</a></li>
	<li><a href='indexd189.html?m=201005' title='May 2010'>May 2010</a></li>
	<li><a href='indexb5c0.html?m=201004' title='April 2010'>April 2010</a></li>
	<li><a href='indexf258.html?m=201003' title='March 2010'>March 2010</a></li>
	<li><a href='index6e30.html?m=201002' title='February 2010'>February 2010</a></li>
	<li><a href='index6b19.html?m=201001' title='January 2010'>January 2010</a></li>
	<li><a href='index5c0a.html?m=200912' title='December 2009'>December 2009</a></li>
	<li><a href='index8f62.html?m=200911' title='November 2009'>November 2009</a></li>
	<li><a href='index451d.html?m=200910' title='October 2009'>October 2009</a></li>
	<li><a href='index3e04.html?m=200909' title='September 2009'>September 2009</a></li>
	<li><a href='index425a.html?m=200908' title='August 2009'>August 2009</a></li>
	<li><a href='index9907.html?m=200907' title='July 2009'>July 2009</a></li>
	<li><a href='index3104.html?m=200906' title='June 2009'>June 2009</a></li>
	<li><a href='indexc36d.html?m=200905' title='May 2009'>May 2009</a></li>
	<li><a href='index17e8.html?m=200904' title='April 2009'>April 2009</a></li>
	<li><a href='index10a5.html?m=200903' title='March 2009'>March 2009</a></li>
	<li><a href='index8988.html?m=200902' title='February 2009'>February 2009</a></li>
	<li><a href='index1419.html?m=200901' title='January 2009'>January 2009</a></li>
	<li><a href='index7866.html?m=200812' title='December 2008'>December 2008</a></li>
	<li><a href='index55f6.html?m=200811' title='November 2008'>November 2008</a></li>
	<li><a href='indexa7bc.html?m=200810' title='October 2008'>October 2008</a></li>
	<li><a href='indexe77c.html?m=200809' title='September 2008'>September 2008</a></li>
	<li><a href='indexcffc.html?m=200808' title='August 2008'>August 2008</a></li>
	<li><a href='index0e62.html?m=200807' title='July 2008'>July 2008</a></li>
	<li><a href='indexfda7.html?m=200806' title='June 2008'>June 2008</a></li>
	<li><a href='index7d64.html?m=200805' title='May 2008'>May 2008</a></li>
	<li><a href='index94dd.html?m=200804' title='April 2008'>April 2008</a></li>
	<li><a href='index9631.html?m=200803' title='March 2008'>March 2008</a></li>
	<li><a href='indexdd52.html?m=200802' title='February 2008'>February 2008</a></li>
	<li><a href='index21ee.html?m=200801' title='January 2008'>January 2008</a></li>
	<li><a href='index363c.html?m=200712' title='December 2007'>December 2007</a></li>
	<li><a href='index7493.html?m=200711' title='November 2007'>November 2007</a></li>
	<li><a href='index93a7.html?m=200710' title='October 2007'>October 2007</a></li>
	<li><a href='index4ca8.html?m=200709' title='September 2007'>September 2007</a></li>
	<li><a href='index6124.html?m=200708' title='August 2007'>August 2007</a></li>
	<li><a href='index6013.html?m=200707' title='July 2007'>July 2007</a></li>
	<li><a href='index2ab6.html?m=200706' title='June 2007'>June 2007</a></li>
	<li><a href='index44f0.html?m=200705' title='May 2007'>May 2007</a></li>
	<li><a href='indexf0b4.html?m=200704' title='April 2007'>April 2007</a></li>
	<li><a href='index481d.html?m=200703' title='March 2007'>March 2007</a></li>
	<li><a href='indexcbea.html?m=200702' title='February 2007'>February 2007</a></li>
	<li><a href='index9cdc.html?m=200701' title='January 2007'>January 2007</a></li>
	<li><a href='index3ea4.html?m=200612' title='December 2006'>December 2006</a></li>
	<li><a href='index67ca.html?m=200611' title='November 2006'>November 2006</a></li>
	<li><a href='indexff49.html?m=200610' title='October 2006'>October 2006</a></li>
	<li><a href='index611c.html?m=200609' title='September 2006'>September 2006</a></li>
	<li><a href='index9a21.html?m=200608' title='August 2006'>August 2006</a></li>
	<li><a href='index3ee9.html?m=200607' title='July 2006'>July 2006</a></li>
	<li><a href='indexe13a.html?m=200606' title='June 2006'>June 2006</a></li>
</ul>
</div>

<div class="aisLeftNav">
	</div>

<div class="aisLeftNav">
<h2>Books</h2>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0764526413&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I5" id="I5"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0201633612&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I6" id="I6"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0136291554&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I7" id="I7"></iframe>
<br/>
<iframe src="http://rcm.amazon.com/e/cm?t=adventures0d2-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=1888009195&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" name="I8" id="I8"></iframe>
</div>
<div class="aisLeftNav">
<h2>Meta</h2>
<ul>
		<li><a href="wp-login.html">Login</a></li>
	<li><a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional">Valid <abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a></li>
	<li><a href="http://gmpg.org/xfn/"><abbr title="XHTML Friends Network">XFN</abbr></a></li>
	<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress</a></li>
	</ul>
</div>
<div class="aisLeftContent">
<h2>Community</h2>
<ul>
	<script type="text/javascript" src="../../localhost/embed/92q2bbma.js"></script>
</ul>
</div>

</div></div></div>
</div>		</td>
		<td>

	<div id="content" class="narrowcolumn">

		
		 		<h2 class="pagetitle">Archive for February, 2010</h2>

		

		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"></div>
		</div>

				<div class="post">
				<h3 id="post-483"><a href="index3758.html?p=483" rel="bookmark" title="Permanent Link to How do we collaborate through software: Take 2">How do we collaborate through software: Take 2</a></h3>
				<small>Thursday, February 25th, 2010</small>

				<div class="entry">
					<p>It is official. I have been invited to speak at <a href="http://ignitedallas.org/">Ignite Dallas</a>.</p>
<p>In my prior recording of the talk, I neglected to mention the names of some folks who have been influential in collaborative application design. This new recording remedies that oversight.</p>
<p>I also modified the second half of the talk to tell the partial ordering story a little better. It still needs the slides in order to really get it, but fortunately those are coming along.</p>
<p>Give it a <a href="../bin/CollaborateThroughSoftware2.mp3">listen</a>. Hope to see you next Wednesday!</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb60a.html?cat=27" title="View all posts in Historic Modeling" rel="category">Historic Modeling</a>,  <a href="index489b.html?cat=34" title="View all posts in Synchronization" rel="category">Synchronization</a> |   <a href="index3758.html?p=483#respond" title="Comment on How do we collaborate through software: Take 2">No Comments &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-482"><a href="index54a8.html?p=482" rel="bookmark" title="Permanent Link to How do we collaborate through software?">How do we collaborate through software?</a></h3>
				<small>Saturday, February 20th, 2010</small>

				<div class="entry">
					<p>I am preparing for the upcoming <a href="http://ignitedallas.org/">Ignite Dallas</a> event. 5 minutes, 20 slides that auto advance every 15 seconds. The final speaker list has not yet been determined, but I’m hopeful that I’ll have a chance to present.</p>
<p>I will be talking about the current thinking in collaborative applications.</p>
<ul>
<li>The CAP Theorem</li>
<li>Eventual Consistency</li>
<li>Event Sourcing</li>
<li>Partial Ordering</li>
</ul>
<p>The challenge is to condense all of this learning into 5 minutes, make it accessible, and make it entertaining. You can help.</p>
<p>Please take five minutes (actually 4:45) to listen to my <a href="../bin/CollaborateThroughSoftware.mp3">rough draft</a>. Leave comments on what I can improve, what I didn’t make clear, and anything I could leave out.</p>
<p>Then order your tickets to the event and see some really great performances. Or submit one of your own.</p>
				</div>

				<p class="postmetadata">Posted in <a href="indexb60a.html?cat=27" title="View all posts in Historic Modeling" rel="category">Historic Modeling</a>,  <a href="index489b.html?cat=34" title="View all posts in Synchronization" rel="category">Synchronization</a> |   <a href="index54a8.html?p=482#comments" title="Comment on How do we collaborate through software?">1 Comment &#187;</a></p>

			</div>

				<div class="post">
				<h3 id="post-481"><a href="indexf705.html?p=481" rel="bookmark" title="Permanent Link to Java/WCF Interop">Java/WCF Interop</a></h3>
				<small>Monday, February 8th, 2010</small>

				<div class="entry">
					<p>As of today (February 2010), the story of Java/WCF interoperability is fair. That wasn’t always the case. In the past, I’ve struggled to get Java and .NET to play nice. Today, I was able to make a .NET WCF client talk to a Java CXF web service with just a little coaxing. Here’s how I did it.</p>
<p><strong>Contract first</strong>    <br />The first step to successful interoperability is to define the contract. Somehow you need to generate the WSDL, and you need to tightly control what it looks like. Use tools to help you, but keep a close eye on what those tools do.</p>
<p>I started with a WCF service contract. This is a .NET interface that uses the [ServiceContract] and [OperationContract] attributes. Put this interface and all of the data types it uses into a class library project. Here’s an example:</p>
<pre>[<span style="color: #2b91af">ServiceContract</span>(Namespace = <span style="color: maroon">&quot;http://correspondence.updatecontrols.com&quot;</span>)]
<span style="color: blue">public</span> <span style="color: blue">interface</span> <span style="color: #2b91af">ISynchronizationService</span>
{
    [<span style="color: #2b91af">OperationContract</span>]
    <span style="color: #2b91af">FactTree</span> Get(<span style="color: #2b91af">FactTree</span> pivotTree, <span style="color: blue">long</span> pivotId, <span style="color: blue">long</span> timestamp);

    [<span style="color: #2b91af">OperationContract</span>]
    <span style="color: blue">void</span> Post(<span style="color: #2b91af">FactTree</span> messageBody);
}</pre>
<p>The FactTree data type used by this interface is decorated with the [DataContract] and [DataMember] attributes.</p>
<pre>[<span style="color: #2b91af">DataContract</span>(<span style="color: #2b91af">Namespace</span> = <span style="color: maroon">&quot;http://correspondence.updatecontrols.com&quot;</span>)]
<span style="color: blue">public</span> <span style="color: blue">class</span> <span style="color: #2b91af">FactTree</span>
{
    [<span style="color: #2b91af">DataMember</span>]
    <span style="color: blue">public</span> <span style="color: blue">long</span> <span style="color: #2b91af">DatabaseId</span> { <span style="color: blue">get</span>; <span style="color: blue">set</span>; }

    [<span style="color: #2b91af">DataMember</span>]
    <span style="color: blue">public</span> <span style="color: #2b91af">List</span>&lt;<span style="color: #2b91af">Fact</span>&gt; <span style="color: #2b91af">Facts</span> { <span style="color: blue">get</span>; <span style="color: blue">set</span>; }

    [<span style="color: #2b91af">DataMember</span>]
    <span style="color: blue">public</span> <span style="color: #2b91af">List</span>&lt;<span style="color: #2b91af">FactRole</span>&gt; <span style="color: #2b91af">Roles</span> { <span style="color: blue">get</span>; <span style="color: blue">set</span>; }

    [<span style="color: #2b91af">DataMember</span>]
    <span style="color: blue">public</span> <span style="color: #2b91af">List</span>&lt;<span style="color: #2b91af">FactType</span>&gt; <span style="color: #2b91af">Types</span> { <span style="color: blue">get</span>; <span style="color: blue">set</span>; }
}</pre>
<p><strong>Create a WCF service</strong></p>
<p>Even though we want to end up with a Java web service, an intermediate step is to implement this service in WCF.</p>
<ol>
<li>Create a new project in Visual Studio using the template Visual C#: Web: WCF Service Application.</li>
<li>Add a reference to the class library that defines the interface.</li>
<li>Change the name of the generated service from Service1 to something meaningful.</li>
<li>Delete the generated IService1 interface.</li>
<li>Use your own interface instead.</li>
<li>Add a [ServiceBehavior] attribute to set the Namespace.</li>
</ol>
<p>At this point, the service looks something like this:</p>
<pre><span style="color: green">// NOTE: If you change the class name &quot;Service1&quot; here, you must also update the reference to &quot;Service1&quot; in Web.config and in the associated .svc file.</span>
[<span style="color: #2b91af">ServiceBehavior</span>(<span style="color: #2b91af">Namespace</span> = <span style="color: maroon">&quot;http://correspondence.updatecontrols.com&quot;</span>)]
<span style="color: blue">public</span> <span style="color: blue">class</span> <span style="color: #2b91af">SynchronizationService</span> : <span style="color: #2b91af">ISynchronizationService</span>
{
    <span style="color: blue">public</span> <span style="color: #2b91af">FactTree</span> <span style="color: #2b91af">Get</span>(<span style="color: #2b91af">FactTree</span> pivotTree, <span style="color: blue">long</span> pivotId, <span style="color: blue">long</span> timestamp)
    {
        <span style="color: blue">throw</span> <span style="color: blue">new</span> <span style="color: #2b91af">NotImplementedException</span>();
    }

    <span style="color: blue">public</span> <span style="color: blue">void</span> <span style="color: #2b91af">Post</span>(<span style="color: #2b91af">FactTree</span> messageBody)
    {
        <span style="color: blue">throw</span> <span style="color: blue">new</span> <span style="color: #2b91af">NotImplementedException</span>();
    }
}</pre>
<p>Like the comment says, we need to edit the svc file and the web.config. Right-click the svc file in the project tree and select “View Markup”. Change the Service attribute to the fully qualified name of the service class.</p>
<pre><span style="color: blue">&lt;</span><span style="color: maroon">%@</span> ServiceHost <span style="color: red">Language</span>=&quot;<span style="color: blue">C#</span>&quot; <span style="color: red">Debug</span>=&quot;<span style="color: blue">true</span>&quot;
  <span style="color: red">Service</span>=&quot;<span style="color: blue">UpdateControls.Correspondence.WebService.SynchronizationService</span>&quot;
  <span style="color: red">CodeBehind</span>=&quot;<span style="color: blue">SynchronizationService.svc.cs</span>&quot; %<span style="color: blue">&gt;</span></pre>
<p>The web.config change is slightly more complicated. There’s a lot of junk in web.config that you don’t need to worry about. The section you want is all the way at the bottom. Look for the &lt;service&gt; tag. It has two attributes: name and behaviorConfiguration. Also look for the &lt;endpoint&gt; tag right below it. It has three attributes: address, binding, and contract.</p>
<ol>
<li>Change the service name to the fully qualified name of your service class.</li>
<li>Change the endpoint binding from wsHttpBinding to basicHttpBinding.</li>
<li>Change the endpoint contract from IService1 to the fully qualified name of your interface.</li>
</ol>
<p>Here’s a trick to getting the fully qualified names. Delete the text between the quotes of the attributes. Open the Class View by hitting Ctrl+Shift+C in Visual Studio. Expand the tree to find your service class and interface. Drag them onto the web.config file between the quotes.</p>
<p>You can also change the name of the service behavior, but that’s not necessary for this intermediate step.</p>
<p><strong>Examine the WSDL</strong></p>
<p>These steps ensure that we have nice clean WSDL to work from. Take a look at it by running your WCF service application. A directory listing will open in the browser. Click on the svc file. If you get a yellow screen, please double-check your steps.</p>
<p>Click on the link to see the WSDL you’ve created. Different browsers react differently to raw XML. IE and Firefox will show it to you, but Chrome will give you a blank screen. You’ll have to view source to see the WSDL in Chrome.</p>
<p>On this first page, you’ll see all of the input and output messages, and the operations, and the service itself. Double-check that the service uses binding=&quot;i0:BasicHttpBinding_...&quot;.</p>
<p>Hack the url to look at more detailed information. Change the query string to “?wsdl=wsdl0” to see the declaration for the binding. It uses “http://schemas.xmlsoap.org/soap/http” with the “document” style.</p>
<p>Hack the url again with “?xsd=xsd0” to see the data types. You should recognize these data types as the ones you wrote in C#. Notice that it turns all of your List&lt;T&gt;s into ArrayOfTs. When we import these into Java, they will become classes containing List&lt;T&gt;.</p>
<p><strong>Create the Java contract project</strong></p>
<p>Create a Java project in your favorite IDE (mine is Eclipse). Open a command prompt and go to the source directory of that project (probably ends in “src”). Download <a href="http://cxf.apache.org/">Apache CXF</a> and unzip it to your hard drive (mine is in “c:\apache-cxf-2.2.6”).</p>
<p>Go back to the first WSDL page, the one with the “?wsdl” query string. This is the URL that we are going to generate Java files from. Copy this URL and use it at the command line:</p>
<pre>\apache-cxf-<span style="color: maroon">2</span><span style="color: maroon">.2</span><span style="color: maroon">.6</span>\bin\wsdl2java.bat http://localhost:<span style="color: maroon">3642</span>/SynchronizationService.svc<span style="color: #2b91af">?</span>wsdl</pre>
<p>CXF will generate a bunch of class files. Most will be in a package derived from your namespace. One will be in “com.microsoft.schemas._2003._10.serialization”. If you find one in org.tempuri package, you forgot a Namespace setting in one of your attributes. These class files are decorated with enough annotations to make them compatible with the WCF service.</p>
<p><strong>Create the Java service project</strong></p>
<p>Although you could put your service implementation and contract in the same project, I prefer to keep them separate. You can use the contract project to write a different service implementation, or even to write a client.</p>
<p>Create a new Dynamic Web Project. Add to the new project a reference to the contact project. You will also need to add this reference to the Java EE Module Dependencies in the project properties. Otherwise it won’t copy the contract jar file to the service lib directory, resulting in a NoClassDefFoundError at runtime. Then add a class that implements the service contract. Copy the @WebService annotation from the interface to the class. The service looks something like this:</p>
<pre>@WebService(targetNamespace = <span style="color: maroon">&quot;http://correspondence.updatecontrols.com&quot;</span>, name = <span style="color: maroon">&quot;ISynchronizationService&quot;</span>)
<span style="color: blue">public</span> <span style="color: blue">class</span> SynchronizationService <span style="color: blue">implements</span> ISynchronizationService {

    @Override
    <span style="color: blue">public</span> FactTree get(FactTree pivotTree, Long pivotId, Long timestamp) {
        <span style="color: green">// TODO Auto-generated method stub</span>
        <span style="color: blue">return</span> <span style="color: blue">null</span>;
    }

    @Override
    <span style="color: blue">public</span> <span style="color: blue">void</span> post(FactTree messageBody) {
        <span style="color: green">// TODO Auto-generated method stub</span>

    }

}</pre>
<p>The service project needs the CXF jar files. Copy them from the CXF install folder (C:\apache-cxf-2.2.6\lib) into the project’s library folder (WebContent\WEB-INF\lib). This is the minimal set that you will need:</p>
<ul>
<li>jaxb-api-2.1.jar</li>
<li>jaxb-impl-2.1.12.jar</li>
<li>wsdl4j-1.6.2.jar</li>
<li>XmlSchema-1.4.5.jar</li>
<li>cxf-2.2.6.jar</li>
</ul>
<p>Now we need to publish this web service as a servlet. The quickest way to do that is to derive a class from CXFNonSpringServlet. Right-click the project and select &quot;New: Servlet”. Change the servlet base class to “org.apache.cxf.transport.servlet.CXFNonSpringServlet”. Uncheck the boxes to implement doGet and doPost. The base class handles those for you. Once the class is created, override the loadBus method.</p>
<pre><span style="color: blue">package</span> com.updatecontrols.correspondence.service;

<span style="color: blue">import</span> javax.servlet.ServletConfig;
<span style="color: blue">import</span> javax.servlet.ServletException;
<span style="color: blue">import</span> javax.xml.ws.Endpoint;

<span style="color: blue">import</span> org.apache.cxf.transport.servlet.CXFNonSpringServlet;

<span style="color: blue">public</span> <span style="color: blue">class</span> SynchronizationServlet <span style="color: blue">extends</span> CXFNonSpringServlet {
    @Override
    <span style="color: blue">public</span> <span style="color: blue">void</span> loadBus(ServletConfig servletConfig) <span style="color: blue">throws</span> ServletException {
        <span style="color: blue">super</span>.loadBus(servletConfig);        

        Endpoint.publish(<span style="color: maroon">&quot;/SynchronizationService&quot;</span>, <span style="color: blue">new</span> SynchronizationService());
    }
}</pre>
<p>Open the web.xml file. You will notice that a servlet mapping was created for you. This mapping is set up to handle URLs that directly address the servlet, but the CXF servlet adds the service name to the URL. Add a “/*” to the end of the URL pattern to direct all such addresses to the servlet.</p>
<pre><span style="color: blue">&lt;?</span><span style="color: maroon">xml</span> <span style="color: red">version</span>=&quot;<span style="color: blue">1.0</span>&quot; <span style="color: red">encoding</span>=&quot;<span style="color: blue">UTF-8</span>&quot;<span style="color: blue">?&gt;</span>
<span style="color: blue">&lt;</span><span style="color: maroon">web-app</span> <span style="color: red">id</span>=&quot;<span style="color: blue">WebApp_ID</span>&quot; <span style="color: red">version</span>=&quot;<span style="color: blue">2.4</span>&quot; <span style="color: red">xmlns</span>=&quot;<span style="color: blue">http://java.sun.com/xml/ns/j2ee</span>&quot; <span style="color: red">xmlns:xsi</span>=&quot;<span style="color: blue">http://www.w3.org/2001/XMLSchema-instance</span>&quot; <span style="color: red">xsi:schemaLocation</span>=&quot;<span style="color: blue">http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd</span>&quot;<span style="color: blue">&gt;</span>
    <span style="color: blue">&lt;</span><span style="color: maroon">display-name</span><span style="color: blue">&gt;</span>correspondence_sync_service<span style="color: blue">&lt;</span>/<span style="color: maroon">display-name</span><span style="color: blue">&gt;</span>
    <span style="color: blue">&lt;</span><span style="color: maroon">servlet</span><span style="color: blue">&gt;</span>
        <span style="color: blue">&lt;</span><span style="color: maroon">description</span><span style="color: blue">&gt;</span>
        <span style="color: blue">&lt;</span>/<span style="color: maroon">description</span><span style="color: blue">&gt;</span>
        <span style="color: blue">&lt;</span><span style="color: maroon">display-name</span><span style="color: blue">&gt;</span>SynchronizationServlet<span style="color: blue">&lt;</span>/<span style="color: maroon">display-name</span><span style="color: blue">&gt;</span>
        <span style="color: blue">&lt;</span><span style="color: maroon">servlet-name</span><span style="color: blue">&gt;</span>SynchronizationServlet<span style="color: blue">&lt;</span>/<span style="color: maroon">servlet-name</span><span style="color: blue">&gt;</span>
        <span style="color: blue">&lt;</span><span style="color: maroon">servlet-class</span><span style="color: blue">&gt;</span>
        com.updatecontrols.correspondence.service.SynchronizationServlet<span style="color: blue">&lt;</span>/<span style="color: maroon">servlet-class</span><span style="color: blue">&gt;</span>
    <span style="color: blue">&lt;</span>/<span style="color: maroon">servlet</span><span style="color: blue">&gt;</span>
    <span style="color: blue">&lt;</span><span style="color: maroon">servlet-mapping</span><span style="color: blue">&gt;</span>
        <span style="color: blue">&lt;</span><span style="color: maroon">servlet-name</span><span style="color: blue">&gt;</span>SynchronizationServlet<span style="color: blue">&lt;</span>/<span style="color: maroon">servlet-name</span><span style="color: blue">&gt;</span>
        <span style="color: blue">&lt;</span><span style="color: maroon">url-pattern</span><span style="color: blue">&gt;</span>/SynchronizationServlet<strong>/*</strong><span style="color: blue">&lt;</span>/<span style="color: maroon">url-pattern</span><span style="color: blue">&gt;</span>
    <span style="color: blue">&lt;</span>/<span style="color: maroon">servlet-mapping</span><span style="color: blue">&gt;</span>
<span style="color: blue">&lt;</span>/<span style="color: maroon">web-app</span><span style="color: blue">&gt;</span></pre>
<p>Run the project in Tomcat to make sure the servlet is published correctly. Point a browser at the servlet (in my case http://localhost:8080/correspondence_sync_service/SynchronizationServlet) and you should see a listing of available SOAP services. Append the service name to the URL (http://localhost:8080/correspondence_sync_service/SynchronizationServlet/SynchronizationService) and you will get a 500 error. If you get a 404, you haven’t modified the web.xml file correctly.</p>
<p><strong>Create a WCF client</strong></p>
<p>The last step is the easiest. Since we started by creating a WCF service contract, we can ask WCF to create a client proxy. I documented this technique in <a href="indexbcd6.html?p=338">.NET to .NET web services without WSDL</a>. It turns out that this trick works equally well for .NET to Java web services.</p>
<p>Add an endpoint to the app.config of your client. The URL should be the servlet name followed by the service name. For example:</p>
<pre><span style="color: blue">&lt;?</span><span style="color: maroon">xml</span> <span style="color: red">version</span>=&quot;<span style="color: blue">1.0</span>&quot; <span style="color: red">encoding</span>=&quot;<span style="color: blue">utf-8</span>&quot; <span style="color: blue">?&gt;</span>
<span style="color: blue">&lt;</span><span style="color: maroon">configuration</span><span style="color: blue">&gt;</span>
  <span style="color: blue">&lt;</span><span style="color: maroon">system.serviceModel</span><span style="color: blue">&gt;</span>
    <span style="color: blue">&lt;</span><span style="color: maroon">bindings</span><span style="color: blue">&gt;</span>
      <span style="color: blue">&lt;</span><span style="color: maroon">basicHttpBinding</span><span style="color: blue">&gt;</span>
        <span style="color: blue">&lt;</span><span style="color: maroon">binding</span> <span style="color: red">name</span>=&quot;<span style="color: blue">SynchronizationServiceSoapBinding</span>&quot; <span style="color: red">closeTimeout</span>=&quot;<span style="color: blue">00:01:00</span>&quot;
            <span style="color: red">openTimeout</span>=&quot;<span style="color: blue">00:01:00</span>&quot; <span style="color: red">receiveTimeout</span>=&quot;<span style="color: blue">00:10:00</span>&quot; <span style="color: red">sendTimeout</span>=&quot;<span style="color: blue">00:01:00</span>&quot;
            <span style="color: red">allowCookies</span>=&quot;<span style="color: blue">false</span>&quot; <span style="color: red">bypassProxyOnLocal</span>=&quot;<span style="color: blue">false</span>&quot; <span style="color: red">hostNameComparisonMode</span>=&quot;<span style="color: blue">StrongWildcard</span>&quot;
            <span style="color: red">maxBufferSize</span>=&quot;<span style="color: blue">65536</span>&quot; <span style="color: red">maxBufferPoolSize</span>=&quot;<span style="color: blue">524288</span>&quot; <span style="color: red">maxReceivedMessageSize</span>=&quot;<span style="color: blue">65536</span>&quot;
            <span style="color: red">messageEncoding</span>=&quot;<span style="color: blue">Text</span>&quot; <span style="color: red">textEncoding</span>=&quot;<span style="color: blue">utf-8</span>&quot; <span style="color: red">transferMode</span>=&quot;<span style="color: blue">Buffered</span>&quot;
            <span style="color: red">useDefaultWebProxy</span>=&quot;<span style="color: blue">true</span>&quot;<span style="color: blue">&gt;</span>
          <span style="color: blue">&lt;</span><span style="color: maroon">readerQuotas</span> <span style="color: red">maxDepth</span>=&quot;<span style="color: blue">32</span>&quot; <span style="color: red">maxStringContentLength</span>=&quot;<span style="color: blue">8192</span>&quot; <span style="color: red">maxArrayLength</span>=&quot;<span style="color: blue">16384</span>&quot;
              <span style="color: red">maxBytesPerRead</span>=&quot;<span style="color: blue">4096</span>&quot; <span style="color: red">maxNameTableCharCount</span>=&quot;<span style="color: blue">16384</span>&quot; /<span style="color: blue">&gt;</span>
          <span style="color: blue">&lt;</span><span style="color: maroon">security</span> <span style="color: red">mode</span>=&quot;<span style="color: blue">None</span>&quot;<span style="color: blue">&gt;</span>
            <span style="color: blue">&lt;</span><span style="color: maroon">transport</span> <span style="color: red">clientCredentialType</span>=&quot;<span style="color: blue">None</span>&quot; <span style="color: red">proxyCredentialType</span>=&quot;<span style="color: blue">None</span>&quot; <span style="color: red">realm</span>=&quot;<span style="color: blue"></span>&quot;/<span style="color: blue">&gt;</span>
            <span style="color: blue">&lt;</span><span style="color: maroon">message</span> <span style="color: red">clientCredentialType</span>=&quot;<span style="color: blue">UserName</span>&quot; <span style="color: red">algorithmSuite</span>=&quot;<span style="color: blue">Default</span>&quot; /<span style="color: blue">&gt;</span>
          <span style="color: blue">&lt;</span>/<span style="color: maroon">security</span><span style="color: blue">&gt;</span>
        <span style="color: blue">&lt;</span>/<span style="color: maroon">binding</span><span style="color: blue">&gt;</span>
      <span style="color: blue">&lt;</span>/<span style="color: maroon">basicHttpBinding</span><span style="color: blue">&gt;</span>
    <span style="color: blue">&lt;</span>/<span style="color: maroon">bindings</span><span style="color: blue">&gt;</span>
    <span style="color: blue">&lt;</span><span style="color: maroon">client</span><span style="color: blue">&gt;</span>
      <span style="color: blue">&lt;</span><span style="color: maroon">endpoint</span> <span style="color: red">address</span>=&quot;<span style="color: blue"><strong>http://localhost:8080/correspondence_sync_service/SynchronizationServlet/SynchronizationService</strong></span>&quot;
          <span style="color: red">binding</span>=&quot;<span style="color: blue">basicHttpBinding</span>&quot; <span style="color: red">bindingConfiguration</span>=&quot;<span style="color: blue">SynchronizationServiceSoapBinding</span>&quot;
          <span style="color: red">contract</span>=&quot;<span style="color: blue">UpdateControls.Correspondence.WebService.Contract.ISynchronizationService</span>&quot; <span style="color: red">name</span>=&quot;<span style="color: blue">SynchronizationService</span>&quot; /<span style="color: blue">&gt;</span>
    <span style="color: blue">&lt;</span>/<span style="color: maroon">client</span><span style="color: blue">&gt;</span>
  <span style="color: blue">&lt;</span>/<span style="color: maroon">system.serviceModel</span><span style="color: blue">&gt;</span>
<span style="color: blue">&lt;</span>/<span style="color: maroon">configuration</span><span style="color: blue">&gt;</span></pre>
<p>And with that you have a .NET WCF client communicating with a Java CXF server. I expect that similar strategies could be used to go the other direction, although I haven’t tried yet.</p>
				</div>

				<p class="postmetadata">Posted in <a href="index8e7f.html?cat=19" title="View all posts in C#" rel="category">C#</a>,  <a href="index5b0d.html?cat=12" title="View all posts in Java" rel="category">Java</a> |   <a href="indexf705.html?p=481#respond" title="Comment on Java/WCF Interop">No Comments &#187;</a></p>

			</div>

		
		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"></div>
		</div>

	
	</div>
		</td>
	</tr>
</table>

<hr />
<div id="footer">
<!-- If you'd like to support WordPress, having the "powered by" link someone on your blog is the best way, it's our only promotion or advertising. -->
	<p>
		Adventures in Software is proudly powered by 
		<a href="http://wordpress.org/">WordPress</a>
		<br /><a href="indexd784.html?feed=rss2">Entries (RSS)</a>
		and <a href="indexa6da.html?feed=comments-rss2">Comments (RSS)</a>.
		<!-- 17 queries. 0.341 seconds. -->
	</p>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-389401-3");
pageTracker._trackPageview();
} catch(err) {}</script></div>

<!-- Gorgeous design by Michael Heilemann - http://binarybonsai.com/kubrick/ -->

		<div id="sk2-footer" style="color:#FFF; background-color:#444; padding: 3px 2px 3px 2px; border-top: #888 solid 1px;">This blog is protected by <a href="http://unknowngenius.com/blog/" title="Dave">dr Dave</a>'s <strong><a href="http://unknowngenius.com/blog/wordpress/spam-karma/" title="SK2">Spam Karma 2</a></strong>: <strong>274531</strong>  Spams eaten and counting...</div><script type="text/javascript" src="replies.js"></script>
<script type="text/javascript" src="blogger.js"></script>
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/michaellperry.json?callback=twitterCallback2&amp;count=5"></script>
<script type="text/javascript" src="http://search.twitter.com/search.json?q=@michaellperry&amp;callback=twitterCallbackReplies&amp;rpp=5"></script>
</body>

<!-- Mirrored from adventuresinsoftware.com/blog/?m=201002 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 12:37:37 GMT -->
</html>
